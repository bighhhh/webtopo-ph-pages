(function(){var __webpack_modules__={52547:function(e,t,a){"use strict";a.d(t,{A:function(){return p}});var o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.isSelectPoint?"选择点位":"选择遥测/遥信",visible:e.dialogVisible,center:"",width:"70%",fullscreen:!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.successCellback=null}}},[e.isSelectPoint?t("el-form",{staticClass:"ele-form-search",staticStyle:{"margin-bottom":"5px"},attrs:{"label-width":"77px",size:"mini"}},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"测量编号:"}},[t("el-input",{model:{value:e.where.mpId,callback:function(t){e.$set(e.where,"mpId",t)},expression:"where.mpId"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"测量名称:"}},[t("el-input",{model:{value:e.where.mpName,callback:function(t){e.$set(e.where,"mpName",t)},expression:"where.mpName"}})],1)],1),t("el-col",{attrs:{span:4}},[t("div",{staticClass:"ele-form-actions"},[t("el-button",{staticClass:"ele-btn-icon",attrs:{type:"primary",icon:"el-icon-search",size:"mini",loading:e.loading},on:{click:e.reload}},[e._v(" 查询 ")]),t("el-button",{attrs:{size:"mini",loading:e.loading},on:{click:e.reset}},[e._v(" 重置 ")])],1)]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"ele-form-actions",on:{change:function(t){return e.$refs.table.reload()}}},[t("el-checkbox-group",{model:{value:e.readAndWriteVar,callback:function(t){e.readAndWriteVar=t},expression:"readAndWriteVar"}},e._l(e.variablesList,(function(a){return t("el-checkbox",{key:a.code,attrs:{label:a.code}},[e._v(e._s(a.name))])})),1)],1)])],1)],1):e._e(),t("el-row",{attrs:{gutter:20}},[e.isSelectPoint?t("el-col",{attrs:{span:e.isSelectPoint&&e.isSelectAttr?12:24}},[t("el-table",{ref:"pointTable",attrs:{data:e.pointData,height:450,"highlight-current-row":""},on:{"current-change":e.selectPointFun}},[t("el-table-column",{attrs:{property:"mpId",label:"编号","min-width":"30%"}}),t("el-table-column",{attrs:{property:"mpName",label:"测量点","min-width":"40%"}}),e.isSelectAttr?e._e():t("el-table-column",{attrs:{"min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.save(a.row)}}},[e._v(" 选择 ")])]}}],null,!1,1956226778)})],1),t("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:e.page.total,"page-size":e.page.limit},on:{"current-change":t=>e.datasource({page:t,where:e.where})}})],1):e._e(),e.isSelectAttr?t("el-col",{attrs:{span:e.isSelectPoint&&e.isSelectAttr?12:24}},[t("el-table",{ref:"table",attrs:{data:e.attrsData,height:500}},[t("el-table-column",{attrs:{property:"attrId",label:"编号","min-width":"30%"}}),t("el-table-column",{attrs:{property:"attrName",label:"属性名","min-width":"40%"}}),t("el-table-column",{attrs:{label:"操作","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.save(a.row)}}},[e._v(" 选择 ")])]}}],null,!1,1956226778)})],1)],1):e._e()],1)],1)},s=[],i=a(31512),r=a(38083),l=a(94380),n={name:"SelectPoint",mixins:[i.c],inject:["getBlueprintInfo"],props:{variables:{type:Array,default:()=>[l.ut.readble.code,l.ut.writeable.code,l.ut.readbleAndWriteable.code]}},data(){let e={mpId:"",mpName:"",consId:""};return{variablesList:l.ut,readAndWriteVar:[...this.variables],loading:!1,showType:"",selectPoint:{mpId:0,mpName:"表计0"},pointColumns:[{prop:"mpId",label:"编号",sortable:!0,showOverflowTooltip:!0,minWidth:110},{prop:"mpName",label:"测量点",sortable:!0,showOverflowTooltip:!0,minWidth:110}],attrColumns:[{prop:"attrId",label:"编号",sortable:!0,showOverflowTooltip:!0,minWidth:110},{prop:"attrName",label:"属性名",sortable:!0,showOverflowTooltip:!0,minWidth:110},{columnKey:"action",label:"操作",width:220,align:"center",resizable:!1,slot:"action",showOverflowTooltip:!0}],dialogVisible:!1,tableData:[],defaultWhere:e,where:{...e},successCellback:null,isSelectPoint:!0,isSelectAttr:!0,pointData:[],attrsData:[],page:{total:0,limit:3}}},watch:{variables(){this.readAndWriteVar=[...this.variables]}},methods:{selectPointFun(e){e&&(this.selectPoint=e,this.attrsDatasource())},save(e){let t=r.A.setPoint(this.selectPoint,e);this.successCellback&&this.successCellback(t),this.$emit("select",t),this.close()},open({isSelectPoint:e=!0,isSelectAttr:t=!0,point:a}={},o){a&&(this.selectPoint=a),this.isSelectPoint=e,this.isSelectAttr=t,this.successCellback=o,this.dialogVisible=!0,this.reload()},close(){this.dialogVisible=!1},reset(){this.where={...this.defaultWhere},this.reload()},reload(){this.selectPoint=null,this.datasource({page:1,where:this.where}),this.attrsDatasource()},async datasource({page:e,where:t,order:a}){this.loading=!0,t.consId=this.getBlueprintInfo().consId;let o=await this.webtopoAPI.getPoints({...t,...a,page:e,limit:this.page.limit});this.total=o?.data?.count??0,this.selectPoint?.mpId||(this.selectPoint=o?.data?.list?.[0],this.$refs?.pointTable?.setCurrentRow(this.selectPoint)),this.loading=!1,this.pointData=o?.data.list},async attrsDatasource({where:e={}}={}){this.loading=!0,e.mpId=this.selectPoint?.mpId,e.consId=this.getBlueprintInfo().consId,e.readAndWriteVar=this.readAndWriteVar;let t=await this.webtopoAPI.getAttrs({...e});this.loading=!1,this.attrsData=t?.data}}},V=n,c=a(56604),u=(0,c.A)(V,o,s,!1,null,null,null),p=u.exports},86335:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var o=function(){var e=this,t=e._self._c;return t("v-chart",{ref:"dataChart",attrs:{autoresize:"",option:e.chartDataOption,"update-options":{lazyUpdate:!0}}})},s=[],i=a(25600),r=a(50771),l=a(71425),n=a(70595),V=a(63793),c=a(74468),u=a(50124),p=a(72867),d=a(85047);(0,i.Y)([r.a,l.a,V.a,c.a,u.a,p.a]);var h={name:"BarChart",components:{VChart:d.Ay},mixins:[(0,n.b)({ref:"dataChart",type:"bar",options:{xAxis:{boundaryGap:!0}}})],data(){return{}},computed:{},methods:{},mounted(){}},g=h,m=a(56604),f=(0,m.A)(g,o,s,!1,null,null,null),b=f.exports},16986:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var o=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("v-chart",{directives:[{name:"show",rawName:"v-show",value:e.chartDataOption,expression:"chartDataOption"}],ref:"dataChart",attrs:{autoresize:"",option:e.chartDataOption,"update-options":{lazyUpdate:!0,notMerge:!0}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.chartDataOption,expression:"!chartDataOption"}],staticClass:"default-div"},[t("div",[e._v("配置option")]),t("div",[e._v("通过图表属性配置option")])])],1)},s=[],i=a(73178),r=i.A,l=a(56604),n=(0,l.A)(r,o,s,!1,null,"7a961f83",null),V=n.exports},98976:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var o=function(){var e=this,t=e._self._c;return t("v-chart",{ref:"dataChart",attrs:{autoresize:"",option:e.chartDataOption,"update-options":{lazyUpdate:!0}}})},s=[],i=(a(15724),a(54461)),r=a(25600),l=a(50771),n=a(16174),V=a(70595),c=a(31764),u=a(94380),p=a(63793),d=a(74468),h=a(50124),g=a(72867),m=a(85047);(0,r.Y)([l.a,n.a,p.a,d.a,h.a,g.a]);var f={name:"LineChart",components:{VChart:m.Ay},mixins:[(0,V.b)({ref:"dataChart",type:"line",dataDealWith:(e,t)=>{let a=t.defaultOption,o={},s={};e.forEach((e=>{let t=(0,i.HN)(e.dataTime,"HH:mm:ss"),a=o[t];a||(o[t]=a={});let r=`${e.mpId}.${e.attrId}`;a[r]=e.realData;let l=s[r];l||(s[r]=l=`${e.mpName}.${e.attrName}`)}));let r=[],l=(0,c.cloneDeep)(t[u.qX].series);for(let[i,n]of Object.entries(s)){let e;r.push({...l,name:n,data:Object.values(o).map((t=>{let a;return a=void 0===t[i]?void 0!==e?e[i]:0:t[i],e=t,a}))})}return a.legend&&(a.legend.data=Object.values(s)),a.xAxis&&(a.xAxis.data=Object.keys(o)),a.series=r,a}})],data(){return{}},computed:{},methods:{},mounted(){}},b=f,v=a(56604),A=(0,v.A)(b,o,s,!1,null,null,null),y=A.exports},78927:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var o=function(){var e=this,t=e._self._c;return t("v-chart",{ref:"dataChart",attrs:{autoresize:"",option:e.chartDataOption,"update-options":{lazyUpdate:!0}}})},s=[],i=(a(15724),a(31764)),r=a(25600),l=a(50771),n=a(54851),V=a(70595),c=a(63793),u=a(74468),p=a(50124),d=a(72867),h=a(85047);(0,r.Y)([l.a,n.a,c.a,u.a,p.a,d.a]);var g={name:"PieChart",components:{VChart:h.Ay},mixins:[(0,V.b)({ref:"dataChart",type:"pie",dataDealWith(e){let t=(0,i.groupBy)(e,(e=>`${e.mpId}.${e.attrId}`)),a=[];for(let[,o]of Object.entries(t)){let e,t=0;o.forEach((a=>{e=e??`${a.mpName}.${a.attrName}`,isNaN(a.realData)||(t+=Number(a.realData))})),a.push({name:e,value:t})}return{xAxis:!1,yAxis:!1,series:{config:[{data:a}]}}}})]},m=g,f=a(56604),b=(0,f.A)(m,o,s,!1,null,null,null),v=b.exports},23909:function(e,t,a){"use strict";var o={};a.r(o),a.d(o,{getAttrs:function(){return p},getCaptcha:function(){return c},getImages:function(){return g},getJSONById:function(){return h},getMpAndMstypeNames:function(){return v},getPoints:function(){return u},listNotPage:function(){return b},palpitate:function(){return f},saveOrUpdate:function(){return d},setData:function(){return A},uploadFile:function(){return m}});var s={};a.r(s),a.d(s,{bottomAlign:function(){return ze},centerAlign:function(){return Oe},changePageSize:function(){return ve},freeModel:function(){return Ue},getEdgePoints:function(){return Me},hjAlign:function(){return ke},hjAverageAlign:function(){return Ce},insertAlarmPoint:function(){return fe},leftAlign:function(){return Se},mattAlign:function(){return Ae},moveDown:function(){return Be},moveUp:function(){return Re},pageBottomAlign:function(){return we},pageHJCenterAlign:function(){return Ne},pageLeftAlign:function(){return xe},pagePVCenterAlign:function(){return _e},pageRightAlign:function(){return Te},pageTopAlign:function(){return ye},pvAlign:function(){return De},pvAverageAlign:function(){return Ee},reInsertPoint:function(){return be},rightAlign:function(){return Pe},toBack:function(){return Fe},toFront:function(){return Le},topAlign:function(){return je},verticalCenterAlign:function(){return Ie}});var i=a(31706),r=a(96569),l=a.n(r),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[null===e.key?t("Webtopo",{attrs:{webtopoAPI:e.webAPI}}):t("preview",{ref:"preview",attrs:{svgId:"model1.json",webtopoAPI:e.webAPI,isConnect:e.isConnect,isPreview:!0},on:{register:e.register}})],1)},V=[];a(5673),a(30164),a(21279);async function c(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function u({page:e,limit:t}){let a=[{mpId:1,mpName:"测量点1"},{mpId:2,mpName:"测量点2"},{mpId:3,mpName:"测量点3"},{mpId:4,mpName:"测量点4"}],o={data:{code:1,data:{count:a.length,list:a.slice((e-1)*t,e*t)}}};return 1===o.data.code?o.data:Promise.reject(new Error(o.data.message))}async function p(){let e={data:{code:1,data:[{attrId:1,attrName:"A相电压"},{attrId:2,attrName:"B相电压"},{attrId:3,attrName:"C相电压"}]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function d(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function h(e){let t={data:{code:1,data:{}}};const a=await fetch(`webtopo/model/json/${e}?_t=${(new Date).getTime()}`),o=await a.json();return console.log("请求结果",o),o?{data:o}:Promise.reject(new Error(t.data.message))}async function g(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function m(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function f(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function b(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function v(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}async function A(){let e={data:{code:1,data:[]}};return 1===e.data.code?e.data:Promise.reject(new Error(e.data.message))}var y={name:"App",data(){return{webAPI:o,key:null,isConnect:!0}},created(){const e=new URLSearchParams(window.location.search),t=e.get("key");this.key=t,console.log(t)},methods:{register(){}}},w=y,_=a(56604),N=(0,_.A)(w,n,V,!1,null,null,null),x=N.exports,M=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"ele-admin-theme-dark big-a-webtopo",style:`height: ${e.contentHeight}; user-select: none;min-width:1200px;`},[t("el-header",{staticStyle:{"min-height":"60px",display:"flex","align-items":"center"},attrs:{height:"unset"}},[t("top-pane",{attrs:{saveForm:e.saveForm,graphConfig:e.graphConfig},on:{loadJSON:e.initGraphData,afterSaveing:e.afterSaveing}})],1),t("el-container",{staticStyle:{height:"0px"}},[t("el-aside",{staticClass:"aside left-menu",class:{"left-menu-fold":e.leftFold},staticStyle:{width:"unset"}},[t("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},on:{"tab-click":e.handleMenuClick}},[t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"组件",placement:"right-start"}},[t("i",{staticClass:"el-icon-s-ticket",staticStyle:{"font-size":"26px"}})])],1),t("left-pane")],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"装饰",placement:"right-start"}},[t("i",{staticClass:"el-icon-s-open",staticStyle:{"font-size":"26px"}})])],1),t("decorate-menu")],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图库",placement:"right-start"}},[t("i",{staticClass:"el-icon-picture",staticStyle:{"font-size":"26px"}})])],1)]),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图纸",placement:"right-start"}},[t("i",{staticClass:"el-icon-files",staticStyle:{"font-size":"26px"}})])],1)])],1)],1),t("el-main",{staticStyle:{padding:"0px",display:"flex",overflow:"hidden"}},[t("div",{ref:"graphDiv",staticClass:"graph-div"},[t("add-node-dialog"),e.isDraw?t("div",{staticClass:"draw-title"},[e._v("绘制模式")]):e._e(),t("div",{ref:"graph-container",attrs:{slot:"reference",id:"graph-container"},slot:"reference"}),t("div",{attrs:{id:"zoom-btn"}},[t("el-button",{attrs:{icon:"el-icon-full-screen",size:"mini"},on:{click:e.recover}}),t("el-button-group",[t("el-button",{attrs:{icon:"el-icon-zoom-out",size:"mini"},on:{click:e.zoomOut}}),t("el-button",{attrs:{icon:"el-icon-zoom-in",size:"mini"},on:{click:e.zoomIn}})],1)],1),t("div",{attrs:{id:"model-btn"}},[t("el-button",{on:{click:function(t){e.drawer=!0}}},[e._v("组态模板")])],1),t("el-drawer",{attrs:{title:"组态模板",modal:!1,visible:e.drawer,direction:"btt"},on:{"update:visible":function(t){e.drawer=t}}},[t("div",{staticStyle:{display:"flex"}},e._l(e.models,(function(a){return t("div",{key:a.index,staticClass:"model-div"},[t("el-image",{staticStyle:{height:"200px",margin:"6px",border:"#263847","border-width":"1px","border-style":"dotted"},attrs:{src:`webtopo/model/model${a.index}.png`}},[t("div",{staticStyle:{height:"100%",display:"flex","align-items":"center","justify-content":"center"},attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])]),t("label",[e._v(e._s(a.text))]),t("div",{staticClass:"model-app-btn"},[t("el-button",{on:{click:function(t){return e.appModel(`model${a.index}`)}}},[e._v("应用")])],1)],1)})),0)])],1),t("div",{staticClass:"right-div",style:"width:"+(e.rightFold?"0px":"300px")},[t("div",{staticClass:"fold right-fold",on:{click:function(t){e.rightFold=!e.rightFold}}},[t("i",{class:e.rightFold?"el-icon-arrow-left":"el-icon-arrow-right"})]),t("right-pane",{ref:"rightPaneRef",attrs:{graphConfig:e.graphConfig},on:{"update:graphConfig":function(t){e.graphConfig=t},"update:graph-config":function(t){e.graphConfig=t}}})],1)])],1)],1)},T=[],k=(a(15724),a(31764)),D=a(54461),C=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],ref:"tooltip",staticClass:"bg-color",staticStyle:{"z-index":"999"},attrs:{id:"tooltip",role:"tooltip"}},[t("div",{staticStyle:{padding:"10px"}},[t("el-radio-group",{model:{value:e.selectEdge,callback:function(t){e.selectEdge=t},expression:"selectEdge"}},[t("el-radio",{attrs:{label:"pipeline-edge"}},[e._v("管道")]),t("el-radio",{attrs:{label:"circuit-edge"}},[e._v("线路")])],1)],1),t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"flex",align:"center"}},[t("el-col",{attrs:{span:6}},[e._v(" 管道路由:")]),t("el-col",{attrs:{span:18}},[t("el-select",{attrs:{placeholder:"选择路由",size:"mini"},model:{value:e.router,callback:function(t){e.router=t},expression:"router"}},[t("el-option",{attrs:{value:"normal",label:"默认路由"}},[t("div",[e._v("默认路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 原样返回路径点 ")])]),t("el-option",{attrs:{value:"orth",label:"正交路由"}},[t("div",[e._v("正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段组成 ")])]),t("el-option",{attrs:{value:"oneSide",label:"受限正交路由"}},[t("div",[e._v("受限正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由受限的三段水平或垂直的正交线段组成 ")])]),t("el-option",{attrs:{value:"manhattan",label:"智能正交路由"}},[t("div",[e._v("智能正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段组成，并自动避开路径上的其他节点（障碍） ")])]),t("el-option",{attrs:{value:"metro",label:"智能地铁线路由"}},[t("div",[e._v("智能地铁线路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段和斜角线段组成，类似地铁轨道图，并自动避开路径上的其他节点（障碍） ")])]),t("el-option",{attrs:{value:"er",label:"实体关系路由"}},[t("div",[e._v("实体关系路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由 Z 字形的斜角线段组成 ")])])],1)],1)],1),t("el-row",{attrs:{type:"flex",align:"center"}},[t("el-col",{attrs:{span:6}},[e._v(" 连接器:")]),t("el-col",{attrs:{span:18}},[t("el-select",{attrs:{placeholder:"选择连接器",size:"mini"},model:{value:e.connector,callback:function(t){e.connector=t},expression:"connector"}},[t("el-option",{attrs:{value:"normal",label:"简单"}},[t("div",[e._v("简单")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点。 ")])]),t("el-option",{attrs:{value:"smooth",label:"平滑"}},[t("div",[e._v("平滑")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用三次贝塞尔曲线线连接起点、路由点和终点。 ")])]),t("el-option",{attrs:{value:"rounded",label:"圆角"}},[t("div",[e._v("圆角")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点，并在线段连接处用圆弧链接（倒圆角）。 ")])]),t("el-option",{attrs:{value:"jumpover",label:"跳线"}},[t("div",[e._v("跳线")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点，并在边与边的交叉处用跳线符号链接。 ")])])],1)],1)],1)],1),t("div",{staticStyle:{"border-right":"unset"},attrs:{id:"dialogStencil"}})])])},E=[];const O={connector:{name:"rounded"},attrs:{fill:{style:{}}}};class I{constructor(){this.isload=!1,this.hdIsLoad=!1}initNodeTool(e,t){e.registerNodeTool("add-button",{inherit:"button",rotate:!0,markup:[{tagName:"circle",selector:"button",className:"add-button",attrs:{slot:"reference",r:14,fill:"#c8e3ff",cursor:"pointer"}},{tagName:"text",textContent:"+",selector:"icon",attrs:{fill:"white",fontSize:30,textAnchor:"middle",pointerEvents:"none",y:"0.3em"}}],x:"50%",y:"0",offset:{x:0,y:-20},onClick({e:e}){t&&t(e)}},!0),e.registerNodeTool("top-add-button",{inherit:"add-button",x:"50%",y:"0",offset:{x:0,y:-30}},!0),e.registerNodeTool("right-add-button",{inherit:"add-button",x:"100%",y:"50%",offset:{x:30,y:0}},!0),e.registerNodeTool("left-add-button",{inherit:"add-button",x:"0",y:"50%",offset:{x:-30,y:0}},!0),e.registerNodeTool("bottom-add-button",{inherit:"add-button",x:"50%",y:"100%",offset:{x:0,y:30}},!0),e.registerNodeTool("event-doubou-btn",{inherit:"button",rotate:!0,markup:[{tagName:"circle",selector:"button",className:"add-button",attrs:{slot:"reference",r:14,fill:"#c8e3ff",cursor:"pointer"}},{tagName:"image",selector:"icon",attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PHN2ZyB0PSIxNjg5NzU5OTE5ODI3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEzNjQiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNDc4IDE3NmM5MS4xMjcgMCAxNjUgNzQuMjgzIDE2NSAxNjUuOTE1IDAgNy43OC02LjI3MSAxNC4wODUtMTQuMDA3IDE0LjA4NXMtMTQuMDA3LTYuMzA2LTE0LjAwNy0xNC4wODVjMC03Ni4wNzUtNjEuMzMtMTM3Ljc0Ni0xMzYuOTg2LTEzNy43NDYtNzUuNjU1IDAtMTM2Ljk4NiA2MS42NzEtMTM2Ljk4NiAxMzcuNzQ2IDAgNy43OC02LjI3MSAxNC4wODUtMTQuMDA3IDE0LjA4NVMzMTMgMzQ5LjY5NCAzMTMgMzQxLjkxNUMzMTMgMjUwLjI4MyAzODYuODczIDE3NiA0NzggMTc2eiBtLTAuNS02OEM2MDYuNDU5IDEwOCA3MTEgMjEyLjc0MyA3MTEgMzQxLjk1YzAgNy43Ni02LjI3OCAxNC4wNS0xNC4wMjIgMTQuMDUtNy43NDQgMC0xNC4wMjItNi4yOS0xNC4wMjItMTQuMDUgMC0xMTMuNjg4LTkxLjk4Ni0yMDUuODUyLTIwNS40NTYtMjA1Ljg1Mi0xMTMuNDcgMC0yMDUuNDU2IDkyLjE2NC0yMDUuNDU2IDIwNS44NTMgMCA3Ljc1OS02LjI3OCAxNC4wNDktMTQuMDIyIDE0LjA0OS03Ljc0NCAwLTE0LjAyMi02LjI5LTE0LjAyMi0xNC4wNUMyNDQgMjEyLjc0NCAzNDguNTQxIDEwOCA0NzcuNSAxMDh6IiBmaWxsPSIjN0U0MURGIiBwLWlkPSIxMzY1Ij48L3BhdGg+PHBhdGggZD0iTTM5NiA3MTlhMTkyLjUgMTkzIDAgMSAwIDM4NSAwIDE5Mi41IDE5MyAwIDEgMC0zODUgMFoiIGZpbGw9IiNGNEVERkYiIHAtaWQ9IjEzNjYiPjwvcGF0aD48cGF0aCBkPSJNNTM4LjE1IDI3NC44NzNjMzIuNDE0IDQuODMgNDMuNzA2IDI1LjczMiA0NC45NzUgNjAuODQ0bDAuMTI1IDUuNTY4IDAuMDQgMTYuNTc3IDAuMDYzIDIuODEgNC4zMzEgMTExLjE4M2M3Ljc3LTEuNzczIDE2LjQ5NC0yLjM1IDI2LjEyNi0xLjQwMyAzMS40NDkgMy4wOTIgNDYuMTggMjIuNzc3IDQ5LjQ2NiA1Ny43MiA0My4xMTktMi41MjIgNjQuMTU2IDIzLjI2NCA2Ny4yMjYgNzAuODg4bDAuOTg2IDE1Ljg4MWMxLjk3IDMzLjI5NCAyLjUxMiA1NC44MDYgMi41MTIgOTUuNCAwIDU0Ljc1NS0xMy4xNzYgMTAzLjUwNS0zNS4xNTEgMTQ1LjYxLTcuNzE5IDE0Ljc4OS0xNi4wMDkgMjcuNzE1LTI0LjMzNSAzOC43MTctNS4wOTMgNi43My05LjE1NCAxMS40MDYtMTEuNjU1IDEzLjk2Ny01LjUwOSA1LjY0Mi0xNC42NDQgNS44NC0yMC40MDMgMC40NDUtNS40LTUuMDU5LTUuOTE1LTEzLjIzOS0xLjQyLTE4Ljg5bDMuMjg4LTMuNjdjMi4wOS0yLjQwNyA0LjQ0Ni01LjMwNSA3LjAwNC04LjY4NiA3LjQxLTkuNzkgMTQuODU1LTIxLjQgMjEuODIzLTM0Ljc1IDE5Ljk4Ny0zOC4yOTYgMzEuOTg4LTgyLjY5OSAzMS45ODgtMTMyLjc0MmwtMC4wNy0yMmMtMC4yMzQtMzEuOTg5LTEuMTA0LTUyLjMzNi0zLjM3LTg3LjVsLTAuMzcxLTQuNzdjLTIuNzYtMjkuOTU5LTEyLjU3Ny00MS40NzQtMzcuMzI2LTM5LjYzOGwtMC4wMDIgODQuMjJjMCA3LjkyMy02LjIwMiAxNC4zNDYtMTMuODUzIDE0LjM0Ni03LjIgMC0xMy4xMTgtNS42OS0xMy43OS0xMi45NjVsLTAuMDYzLTEuMzgxdi05NS44ODhjMC0zMi4zMzctNi4zOTgtNDMuOTExLTI1LjEwMy00NS43NS05LjA3Mi0wLjg5Mi0xNi40NzcgMC4xMS0yMi4zNiAyLjI4TDU5Mi45OSA2MDhjMC4zMDUgNy44MzUtNS45MTQgMTQuNDMtMTMuODkgMTQuNzMtNy41MDkgMC4yODItMTMuODk4LTUuMTEzLTE0Ljg3OC0xMi4yOGwtMC4xMi0xLjM2NC05LjY0LTI0Ny40NDFjLTAuMDY4LTIuMjA1LTAuMDk3LTQuMTItMC4xMDQtNi45NzVsLTAuMDA4LTEyLjQ3LTAuMDUtMy4yMTljLTAuNTMyLTI0LjU4Mi01LjE2NS0zMy43NTItMjAuNDg1LTM2LjAzNS0yMi4xNzUtMy4zMDMtMzQuMTg0IDkuMzE0LTM1LjY2NiAzMy41MmwtMC4xMjYgMy4xMjFjLTAuNDIzIDE1LjUwMiAwLjI5IDY0LjQxOCAxLjgyOCAxMzUuMTI1bDEuODQ0IDc5LjE2NyAxLjU5NSA2Mi41NTJhMTMuOTMgMTMuOTMgMCAwIDEtMC44NzggNS4yNzJsMC41NTMgNy44NDVjMC41NTYgNy44NjQtNS40NjYgMTQuNjgxLTEzLjQ1IDE1LjIyOC03LjUxMyAwLjUxNS0xNC4wODctNC43MDktMTUuMjk3LTExLjg4bC0wLjE2My0xLjM2Ny0xOC4xMDUtMjU2LjU5Yy0wLjYyLTIzLjIyOC03LjMyMi0zNC4wMzMtMjUuNjktMzQuMzg1LTE4LjY3NC0wLjM1OC0yNy42ODggMTIuNzQ4LTI4LjI1NCAzNi4xMDVsLTAuMDI5IDIuMzcgNy44ODcgMzMxLjM2MmMwLjE4OCA3Ljg4LTYuMTQ2IDE0LjQxNy0xNC4xNDcgMTQuNjA2LTcuNTMgMC4xNy0xMy44NTItNS4zNDYtMTQuNzI2LTEyLjU2NWwtMC4xLTEuMzcyLTMuMDg4LTEyOS44NTdjLTQuMzkzLTAuMzk2LTkuMzUtMC42NzctMTMuNDUtMC42NzctMTQuMjk0IDAtMjQuOTMyIDExLjY2My0yOC4wMjcgMzQuOTE0bC0wLjc1IDYuMjA1LTAuMzI0IDIuODc2YTY2NS4yIDY2NS4yIDAgMCAwLTEuNzQ1IDE4LjM4IDc2Ny45MjggNzY3LjkyOCAwIDAgMC0yLjQ1NyA0OS45ODZjLTAuNzkyIDQ5LjQzNCA1Ljk1IDcyLjM4IDI4LjQ4NyAxMDUuNTUgMi45ODIgNC4zOSA2LjQwOSA4Ljk5NCAxMC4yNDcgMTMuNzg1IDcuNTM1IDkuNDA3IDE2LjUzIDE5LjM4IDI2LjY3IDI5LjcxIDExLjY0MyAxMS44NTggMjQuMTU2IDIzLjU0OSAzNi42NzMgMzQuNTRsNS4xIDQuNDM2IDEwLjQ0MSA4LjgxMmMwLjQyNCAwLjM0OCAwLjc2OSAwLjYyOSAxLjAzMSAwLjg0IDYuMDU3IDQuODk0IDcuMDc1IDEzLjg2NSAyLjI3NCAyMC4wMzgtNC44MDIgNi4xNzMtMTMuNjA1IDcuMjEtMTkuNjYyIDIuMzE3bC0zLjc3Ny0zLjExNC01Ljg1Ny00Ljk0NGE3NTcuNjY1IDc1Ny42NjUgMCAwIDEtNy44Mi02Ljc3NmMtMTMuMDA1LTExLjQxOC0yNi4wMTItMjMuNTctMzguMTg5LTM1Ljk3NC0xMC43NjQtMTAuOTYzLTIwLjM4LTIxLjYyNi0yOC41NjYtMzEuODQ1LTQuMjg1LTUuMzQ4LTguMTU0LTEwLjU0Ni0xMS41NzctMTUuNTg1LTI1Ljg5LTM4LjEwMy0zNC4zNDktNjYuODk4LTMzLjQ2Mi0xMjIuMjU2YTc5Ni43OTIgNzk2Ljc5MiAwIDAgMSAyLjU1LTUxLjg4NmwwLjcxMi04LjE4NWMwLjI0My0yLjYxOCAwLjQ5LTUuMTI1IDAuNzM3LTcuNTEzbDEuMTc4LTEwLjMwM0MzMTIuMjQzIDU3Ni42NzEgMzMzLjcwNSA1NTIgMzY0LjM1MiA1NTJjMy45NzYgMCA4LjQxNiAwLjE4OCAxMi43NjggMC41MTlMMzczIDM3OS4zNjJjMC0zOS4xMDcgMTguNTkyLTY4LjEgNTcuODIyLTY3LjM0OCAxNy42ODkgMC4zNCAzMC40OCA2LjAxNyAzOS4xNyAxNS42NjMgNC44NzctMzUuMzk5IDI5LjYwOC01OC41NDcgNjguMTU4LTUyLjgwNHoiIGZpbGw9IiMxQzBFNTAiIHAtaWQ9IjEzNjciPjwvcGF0aD48L3N2Zz4="}}],x:"100%",y:"0",offset:{x:30,y:0}},!0),e.registerNodeTool("event-timer-btn",{inherit:"button",rotate:!0,markup:[{tagName:"image",selector:"icon",attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PHN2ZyB0PSIxNjg5ODE2NTg2NTU4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MjYiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNDkxLjI4NzI3MyA5MTUuMzE2MzY0Yy0yMjQuNTgxODE4IDAtNDA3LjI3MjcyNy0xODIuNjkwOTA5LTQwNy4yNzI3MjgtNDA3LjI3MjcyOCAwLTE1Ni4zOTI3MjcgODcuMjcyNzI3LTI5Ni40OTQ1NDUgMjI3LjYwNzI3My0zNjUuNjE0NTQ1IDExLjQwMzYzNi01LjU4NTQ1NSAyNS4zNjcyNzMtMC45MzA5MDkgMzEuMTg1NDU1IDEwLjcwNTQ1NCA1LjU4NTQ1NSAxMS42MzYzNjQgMC45MzA5MDkgMjUuMzY3MjczLTEwLjcwNTQ1NSAzMS4xODU0NTUtMTI0LjI3NjM2NCA2MS4yMDcyNzMtMjAxLjU0MTgxOCAxODUuMjUwOTA5LTIwMS41NDE4MTggMzIzLjcyMzYzNiAwIDE5OC45ODE4MTggMTYxLjc0NTQ1NSAzNjAuNzI3MjczIDM2MC43MjcyNzMgMzYwLjcyNzI3M3MzNjAuNzI3MjczLTE2MS43NDU0NTUgMzYwLjcyNzI3Mi0zNjAuNzI3MjczLTE2MS43NDU0NTUtMzYwLjcyNzI3My0zNjAuNzI3MjcyLTM2MC43MjcyNzJjLTEyLjggMC0yMy4yNzI3MjctMTAuNDcyNzI3LTIzLjI3MjcyOC0yMy4yNzI3MjhzMTAuNDcyNzI3LTIzLjI3MjcyNyAyMy4yNzI3MjgtMjMuMjcyNzI3YzIyNC41ODE4MTggMCA0MDcuMjcyNzI3IDE4Mi42OTA5MDkgNDA3LjI3MjcyNyA0MDcuMjcyNzI3cy0xODIuNjkwOTA5IDQwNy4yNzI3MjctNDA3LjI3MjcyNyA0MDcuMjcyNzI4eiIgZmlsbD0iIzNENzFGOSIgcC1pZD0iMjkyNyI+PC9wYXRoPjxwYXRoIGQ9Ik00OTEuMjg3MjczIDUzMS4zMTYzNjRjLTEyLjggMC0yMy4yNzI3MjctMTAuNDcyNzI3LTIzLjI3MjcyOC0yMy4yNzI3MjhsLTAuMjMyNzI3LTI3OS4yNzI3MjdjMC0xMi44IDEwLjQ3MjcyNy0yMy4yNzI3MjcgMjMuMjcyNzI3LTIzLjI3MjcyN3MyMy4yNzI3MjcgMTAuNDcyNzI3IDIzLjI3MjcyOCAyMy4yNzI3MjdsMC4yMzI3MjcgMjc5LjI3MjcyN2MwIDEyLjgtMTAuNDcyNzI3IDIzLjI3MjcyNy0yMy4yNzI3MjcgMjMuMjcyNzI4eiIgZmlsbD0iIzNENzFGOSIgcC1pZD0iMjkyOCI+PC9wYXRoPjxwYXRoIGQ9Ik02ODguNDA3MjczIDUzMS4zMTYzNjRoLTE5Ny4xMmMtMTIuOCAwLTIzLjI3MjcyNy0xMC40NzI3MjctMjMuMjcyNzI4LTIzLjI3MjcyOHMxMC40NzI3MjctMjMuMjcyNzI3IDIzLjI3MjcyOC0yMy4yNzI3MjdoMTk3LjEyYzEyLjggMCAyMy4yNzI3MjcgMTAuNDcyNzI3IDIzLjI3MjcyNyAyMy4yNzI3MjdzLTEwLjQ3MjcyNyAyMy4yNzI3MjctMjMuMjcyNzI3IDIzLjI3MjcyOHoiIGZpbGw9IiMzRDcxRjkiIHAtaWQ9IjI5MjkiPjwvcGF0aD48L3N2Zz4="}}],x:"100%",y:"0",offset:{x:30,y:0}},!0),e.registerNodeTool("event-left-btn",{inherit:"button",rotate:!0,markup:[{tagName:"image",selector:"icon",attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PHN2ZyB0PSIxNjg5ODE2NDAzMDY5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE0OTYiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNjU3LjA0NzE4MjAyIDEzMS45MzI3NTk5aC0xMTAuNjkzOTAyMDd2LTE4LjUzOTg2NTM3YzAtMzguNzE1NjAxMjItMjEuMjY2MzE2MTYtNzQuNzA0NzUxNjQtNTUuMDc0MzA1OTYtOTMuNzg5OTA3MTdsLTMyLjE3MjExOTMyLTE3Ljk5NDU3NTIxYy0xNi4zNTg3MDQ3NC05LjI2OTkzMjY5LTM3LjA3OTczMDczLTMuMjcxNzQwOTQtNDYuMzQ5NjYzNDMgMTMuMDg2OTYzOC05LjI2OTkzMjY5IDE2LjM1ODcwNDc0LTMuMjcxNzQwOTQgMzcuMDc5NzMwNzMgMTMuMDg2OTYzOCA0Ni4zNDk2NjM0M2wzMi4xNzIxMTkzMyAxNy45OTQ1NzUyYzEyLjU0MTY3MzYzIDcuMDg4NzcyMDUgMjAuMTc1NzM1ODQgMjAuMTc1NzM1ODQgMjAuMTc1NzM1ODMgMzQuMzUzMjc5OTV2MTguNTM5ODY1MzdIMzY2Ljk1MjgxNzk4Yy0xMDguNTEyNzQxNDMgMC0xOTYuMzA0NDU2ODggODguMzM3MDA1NTktMTk2LjMwNDQ1Njg3IDE5Ni4zMDQ0NTY4NnYyOTguODE5MDA2NTdjMCAxODEuNTgxNjIyNTkgMTQ3Ljc3MzYzMjgxIDMyOS45MDA1NDU1NiAzMjkuOTAwNTQ1NTcgMzI5LjkwMDU0NTU2aDIzLjQ0NzQ3NjhjMTgxLjU4MTYyMjU5IDAgMzI5LjkwMDU0NTU2LTE0Ny43NzM2MzI4MSAzMjkuOTAwNTQ1NTctMzI5LjkwMDU0NTU2VjMyOC4yMzcyMTY3NmMtMC41NDUyOTAxNS0xMDcuOTY3NDUxMjktODguMzM3MDA1NTktMTk2LjMwNDQ1Njg4LTE5Ni44NDk3NDcwMy0xOTYuMzA0NDU2ODZ6IG0xMjguMTQzMTg3MTIgNDk1LjY2ODc1MzU4YzAgMTQzLjk1NjYwMTctMTE3LjIzNzM4Mzk2IDI2MS43MzkyNzU4MS0yNjEuNzM5Mjc1ODIgMjYxLjczOTI3NTgzaC0yMy40NDc0NzY4Yy0xNDMuOTU2NjAxNyAwLTI2MS43MzkyNzU4MS0xMTcuMjM3MzgzOTYtMjYxLjczOTI3NTgyLTI2MS43MzkyNzU4M1Y0NzcuNjQ2NzIwMDVINzg0LjY0NTA3ODk4djE0OS45NTQ3OTM0M3ogbTAtMjE4LjExNjA2MzE4aC0yNjUuNTU2MzA2OTNWMjAwLjA5NDAyOTY0aDEzNi44Njc4Mjk2NWM3MC44ODc3MjA1MyAwIDEyOC4xNDMxODcxMiA1Ny44MDA3NTY3NCAxMjguMTQzMTg3MTIgMTI4LjE0MzE4NzEydjgxLjI0ODIzMzU0eiIgZmlsbD0iIzNENzFGOSIgcC1pZD0iMTQ5NyIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC43NzgxMDY5LjAuaTAiIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPjwvc3ZnPg=="}}],x:"100%",y:"0",offset:{x:30,y:35}},!0),e.registerNodeTool("event-right-btn",{inherit:"button",rotate:!0,markup:[{tagName:"image",selector:"icon",attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PHN2ZyB0PSIxNjg5ODE2NTQ0ODI5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE3ODgiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMzg3LjYyNjY2NyAxNDkuMzMzMzMzQTE3NC41MDY2NjcgMTc0LjUwNjY2NyAwIDAgMCAyMTMuMzMzMzMzIDMyMy42MjY2NjdWNTg4LjhjMC4yMzQ2NjcgMTYxLjY2NCAxMzEuMjQyNjY3IDI5Mi42NzIgMjkyLjkwNjY2NyAyOTIuOTA2NjY3aDIxLjMzMzMzM2MxNjEuNDI5MzMzLTAuNTk3MzMzIDI5Mi4wMzItMTMxLjQ3NzMzMyAyOTIuMjY2NjY3LTI5Mi45MDY2NjdWMzIzLjYyNjY2N0ExNzUuMTQ2NjY3IDE3NS4xNDY2NjcgMCAwIDAgNjQ1LjEyIDE0OS4zMzMzMzNIMzg3LjYyNjY2N3ogbS0xMDguMzczMzM0IDE3Ni4yMTMzMzRBMTEyIDExMiAwIDAgMSAzOTAuNCAyMTMuMzMzMzMzaDEwNC41MzMzMzN2MjEzLjMzMzMzNEgyNzkuMjUzMzMzdi0xMDEuMTJ6IG00NzQuMjQgMjYzLjA0YzAuNTk3MzMzIDEyNS45MDkzMzMtMTAwLjg2NCAyMjguNTAxMzMzLTIyNi43NzMzMzMgMjI5LjMzMzMzM2gtMjAuMjY2NjY3Yy0xMjYuMTQ0LTAuODMyLTIyNy43OTczMzMtMTAzLjYxNi0yMjcuMi0yMjkuNzZ2LTEwMS4xMmg0NzQuMjR2MTAxLjU0NjY2N3oiIGZpbGw9IiMzRDcxRjkiIHAtaWQ9IjE3ODkiIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guNzc4MTA2OS4wLmk1IiBjbGFzcz0ic2VsZWN0ZWQiPjwvcGF0aD48L3N2Zz4="}}],x:"100%",y:"0",offset:{x:30,y:70}},!0),e.registerNodeTool("event-mouseenter-btn",{inherit:"button",rotate:!0,markup:[{tagName:"image",selector:"icon",attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PHN2ZyB0PSIxNjg5NzYxNzYyODA1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE3ODMiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNzI0LjU4OTcxNCA1OTYuMTE0Mjg2aC0yMDMuODg1NzE0di0xNjguMjI4NTcyYTg0LjU1MzE0MyA4NC41NTMxNDMgMCAwIDAtMTY4LjcwNCAwdjE4NS42bC01LjkyNDU3MS02Ljg3NTQyOGE4NS4wMjg1NzEgODUuMDI4NTcxIDAgMCAwLTU5LjQyODU3Mi0yNC4yMTAyODYgODUuMDI4NTcxIDg1LjAyODU3MSAwIDAgMC02MC44MTgyODYgMTQzLjA2NzQyOWwxMzMuNDg1NzE1IDE0My4xMDRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMCA5LjYxODI4NSA2Ljg3NTQyOGMzLjQ3NDI4NiAxLjM4OTcxNCA3LjIwNDU3MSAyLjE5NDI4NiAxMC45NzE0MjkgMi4yNjc0MjloMzQ0LjY4NTcxNGE4MS4zNzE0MjkgODEuMzcxNDI5IDAgMCAwIDc3LjIzODg1Ny04NC41ODk3MTV2LTExMi40NTcxNDJhODEuMzcxNDI5IDgxLjM3MTQyOSAwIDAgMC03Ny4yNzU0MjgtODQuNTUzMTQzeiBtMjkuMjU3MTQzIDE5Ny4wMTAyODVjMCAxNS4xMDQtMTcuODQ2ODU3IDM1LjY5MzcxNC0yOS4yNTcxNDMgMzUuNjkzNzE1SDM5Ni44bC0xMzIuNTcxNDI5LTEzNy4xNDI4NTdhNDEuMTQyODU3IDQxLjE0Mjg1NyAwIDAgMSAwLTQ4LjkzMjU3MiAzMi40Mzg4NTcgMzIuNDM4ODU3IDAgMCAxIDQyLjA1NzE0MyA0LjU3MTQyOWw1MS4yIDQ3LjU0Mjg1N2EyNi41MTQyODYgMjYuNTE0Mjg2IDAgMCAwIDE5LjYzODg1NyA4LjIyODU3MSA0MC4yMjg1NzEgNDAuMjI4NTcxIDAgMCAwIDIyLjg5MzcxNS04LjIyODU3MXYtMjY2Ljk3MTQyOWMwLTE1LjA2NzQyOSAyMC45OTItMzEuMDg1NzE0IDM2LjA5Ni0zMS4wODU3MTRhMzcuOTI0NTcxIDM3LjkyNDU3MSAwIDAgMSAzNS4xODE3MTQgMzEuMDg1NzE0djE5MS4wODU3MTVjMCAxNS41NDI4NTcgNS45NjExNDMgMjcuODY3NDI5IDIxLjUwNCAyNy44Njc0MjhoMjMyLjY2NzQyOWE0MC42Njc0MjkgNDAuNjY3NDI5IDAgMCAxIDI5LjI1NzE0MiAzNC43NDI4NTdsLTAuODc3NzE0IDExMS41NDI4NTd6IiBmaWxsPSIjNjQ3NDhCIiBwLWlkPSIxNzg0Ij48L3BhdGg+PHBhdGggZD0iTTc5My4xNjExNDMgMTQ2LjI4NTcxNEgyMzAuODc1NDI5QTg0LjU1MzE0MyA4NC41NTMxNDMgMCAwIDAgMTQ2LjI4NTcxNCAyMzAuODc1NDI5djIyNC45MTQyODVhODQuMTE0Mjg2IDg0LjExNDI4NiAwIDAgMCA4NC41ODk3MTUgODQuMTE0Mjg2SDI1OS42NTcxNDNBMjcuODY3NDI5IDI3Ljg2NzQyOSAwIDAgMCAyODcuNTYxMTQzIDUxMmMwLTE1LjU0Mjg1Ny0xMi4zNjExNDMtMjMuNzcxNDI5LTI3LjkwNC0yMy43NzE0MjloLTI4Ljc4MTcxNGEzNi4wOTYgMzYuMDk2IDAgMCAxLTMyLjQ3NTQyOS0zMi40Mzg4NTd2LTIyNC45MTQyODVhMzUuMTgxNzE0IDM1LjE4MTcxNCAwIDAgMSAzMi40NzU0MjktMzEuNTYxMTQzaDU2Mi4yODU3MTRhMzQuNzQyODU3IDM0Ljc0Mjg1NyAwIDAgMSAzMiAzMS41MjQ1NzF2MjI0LjkxNDI4NmEzNS42NTcxNDMgMzUuNjU3MTQzIDAgMCAxLTMyIDMyLjQ3NTQyOEg2MDMuNDI4NTcxYy0xNS41NDI4NTcgMC0yOC4zNDI4NTcgOC4yMjg1NzEtMjguMzQyODU3IDIzLjc3MTQyOWEyOC4zNDI4NTcgMjguMzQyODU3IDAgMCAwIDE3LjQ0NDU3MiAyNS44NTYgMjcuNDI4NTcxIDI3LjQyODU3MSAwIDAgMCAxMC44OTgyODUgMi4wMTE0MjloMTg3Ljg2NzQyOWE4NC4xMTQyODYgODQuMTE0Mjg2IDAgMCAwIDg2LjQxODI4Ni04NC4xMTQyODZ2LTIyNC45MTQyODZBODQuNTUzMTQzIDg0LjU1MzE0MyAwIDAgMCA3OTMuMTI0NTcxIDE0Ni4yODU3MTR6IiBmaWxsPSIjM0Q3MUY5IiBwLWlkPSIxNzg1Ij48L3BhdGg+PC9zdmc+"}}],x:"100%",y:"0",offset:{x:30,y:105}},!0)}initHistoryData(e,t){this.hdIsLoad||(this.hdIsLoad=!0,e.registerNodeTool("history-data",{inherit:"button",rotate:!0,markup:[{tagName:"image",selector:"icon",style:{cursor:"pointer"},attrs:{transform:"matrix(1,0,0,1,-15,-15)",width:"30px",height:"30px","xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjkwMTkyMTgyOTExIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2MjYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3Mi42MTUzODUgNzguNzY5MjMxQzIxMi42NzY5MjMgNzguNzY5MjMxIDAgMjkxLjQ0NjE1NCAwIDU1MS4zODQ2MTVzMjEyLjY3NjkyMyA0NzIuNjE1Mzg1IDQ3Mi42MTUzODUgNDcyLjYxNTM4NSA0NzIuNjE1Mzg1LTIxMi42NzY5MjMgNDcyLjYxNTM4NC00NzIuNjE1Mzg1SDQ3Mi42MTUzODVWNzguNzY5MjMxeiIgZmlsbD0iIzI0OUNGMiIgcC1pZD0iMjYyNyI+PC9wYXRoPjxwYXRoIGQ9Ik0xMDI0IDQ3Mi42MTUzODVjMC0yNTkuOTM4NDYyLTIxMi42NzY5MjMtNDcyLjYxNTM4NS00NzIuNjE1Mzg1LTQ3Mi42MTUzODV2NDcyLjYxNTM4NWg0NzIuNjE1Mzg1eiIgZmlsbD0iI0E1RDZGQSIgcC1pZD0iMjYyOCI+PC9wYXRoPjwvc3ZnPg=="}}],x:"0",y:"0",offset:{x:-30,y:0},onClick(){t&&t()}},!0))}}var S=a(67395),P=a(77170),j=a(70494);const z={basis:[{label:"标题",shape:"super-node",options:{preserveAspectRatio:!1,markup:[{name:"文本",tagName:"text",selector:"text"}],attrs:{text:{text:"##",textAnchor:"middle",refX:.5,refY:.5,yAlign:"middle",fill:"#00FF00",fontSize:43,textWrap:{refWidth:1,refHeight:1,ellipsis:!1}}},tools:["node-editor"]}},{label:"文本",shape:"super-node",options:{preserveAspectRatio:!1,markup:[{name:"边框",tagName:"rect",selector:"body"},{name:"文本",tagName:"text",selector:"text"}],attrs:{body:{refWidth:1,refHeight:1,stroke:"#0709E7",strokeWidth:1,fill:"#000000"},text:{text:"###",textAnchor:"left",refX:1,refY:.5,yAlign:"middle",fill:"#00FF00",fontSize:20,textWrap:{width:"100%",height:"100%",ellipsis:!0,breakWord:!1}}},tools:["node-editor"]}},{label:"变量",shape:"super-node",options:{preserveAspectRatio:!1,markup:[{tagName:"rect",selector:"body"},{name:"边框",tagName:"rect",selector:"leftbody"},{name:"变量名",tagName:"text",selector:"variable"},{name:"边框",tagName:"rect",selector:"rightbody"},{name:"值",tagName:"text",selector:"text"}],attrs:{body:{refWidth:1,refHeight:1,fill:"none"},leftbody:{refWidth:.5,refHeight:1,stroke:"#0709E7",strokeWidth:1,fill:"#000000"},rightbody:{refX:.5,refWidth:.5,refHeight:1,stroke:"#0709E7",strokeWidth:1,fill:"#000000"},variable:{text:"##",textAnchor:"left",refX:8,refY:.5,yAlign:"middle",fill:"#00FF00",fontSize:20,textWrap:{refWidth:1,refHeight:1,ellipsis:!1}},text:{text:"##",textAnchor:"left",refX:.6,refY:.5,yAlign:"middle",fill:"#00FF00",fontSize:20,textWrap:{refWidth:1,refHeight:1,ellipsis:!1}}}}},{label:"矩形",shape:"super-node",options:{preserveAspectRatio:!1,markup:[{tagName:"rect",selector:"rect"}],attrs:{rect:{refWidth:1,refHeight:1,strokeWidth:1,stroke:"#5F95FF",fill:"#eff4ff6e"}}}},{label:"圆形",shape:"super-node",options:{width:200,height:200,preserveAspectRatio:!1,markup:[{tagName:"ellipse",selector:"ellipse"}],attrs:{ellipse:{refCx:.5,refCy:.5,refRx:.5,refRy:.5,strokeWidth:1,stroke:"#5F95FF",fill:"#eff4ff6e"}}}}],machine:[{label:"回流泵",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/huiliubeng.svg"}},data:{value:""},formula:{}}},{label:"水管",shape:"super-node",options:{width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/shuiguan.svg"}}}},{label:"水箱",shape:"super-node",options:{width:400,height:400,markup:[{tagName:"rect",selector:"water",name:"水"},{tagName:"image",selector:"watergif",name:"水花"},{tagName:"polygon",selector:"cist",name:"箱体"}],status:[{label:"加水状态",status:[{label:"加水",statu:{style:{water:{fill:"#37cfe7"},watergif:{visibility:"visible"}}}},{label:"停止",statu:{style:{water:{fill:"#FF0000"},watergif:{visibility:"hidden"}}}}]}],attrs:{water:{fill:"#37cfe7",refWidth:.9,refHeight:.65,refX:"1",refY:"0.21"},watergif:{visibility:"visible",refWidth:1,refHeight:1,href:"webtopo/nodes/img/spray.gif"},cist:{fill:"#37cfe7",stroke:"#000",refPoints:"283.2,131 87.7,129.1 85.1,911.2 938.9,911.2 938.9,131 740.8,131 740.8,241.3 849,245.4 853.1,807.1 177.1,799.2 181.1,246.6 283.2,245"}}}},{label:"梯子",shape:"super-node",options:{width:400,height:400,preserveAspectRatio:!0,markup:[{tagName:"image",selector:"watergif",name:"水花"}],attrs:{watergif:{visibility:"visible",refWidth:1,refHeight:1,href:"webtopo/nodes/Accessoires/Ladder.svg"}}}},{label:"齿轮",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/Animation/Gear.svg"}},status:[{label:"旋转",status:[{label:"正传",statu:{style:{body:{style:{animation:"2s linear 0s infinite normal both running rotate-center"}}}}},{label:"反转",statu:{style:{body:{style:{animation:"2s linear 0s infinite reverse both running rotate-center"}}}}},{label:"停止",statu:{style:{body:{style:{animation:"none"}}}}}]}]}}],fan:[{label:"风扇1",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,refX:1,refY:1,href:"webtopo/nodes/img/fan1.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇2",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan2.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇3",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan3.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇4",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan4.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇5",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan5.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇6",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan6.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇7",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan7.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇8",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan8.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇9",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan9.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇10",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan10.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇11",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan11.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇12",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan12.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇13",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan13.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇14",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan14.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇15",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan15.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}},{label:"风扇16",shape:"super-node",options:{preserveAspectRatio:!0,width:400,height:400,markup:[{name:"图片",tagName:"image",selector:"body",attrs:{width:"204px",height:"204px"}}],attrs:{body:{refWidth:1,refHeight:1,href:"webtopo/nodes/img/fan16.png"}},status:[{label:"旋转",status:[{label:"正传",statu:{class:{selector:"",className:"corotation-r"}}},{label:"反转",statu:{class:{selector:"",className:"reverse-r"}}},{label:"停止",statu:{class:{selector:"",className:""}}}]}]}}],charts:[]};var L=a(10674),F=a(94380);const R={label:"电压",selected:"500kv",status:[{label:"1000/800kv",statu:{style:{body:{stroke:"blue"}}}},{label:"750/660kv",statu:{style:{body:{stroke:"orange"}}}},{label:"500kv",statu:{style:{body:{stroke:"red"}}}},{label:"330kv",statu:{style:{body:{stroke:"rgb(30 144 255)"}}}},{label:"220kv",statu:{style:{body:{stroke:"purple"}}}},{label:"110kv",statu:{style:{body:{stroke:"rgb(240 65 85)"}}}},{label:"66kv",statu:{style:{body:{stroke:"gold"}}}},{label:"35kv",statu:{style:{body:{stroke:"yellow"}}}},{label:"20kv",statu:{style:{body:{stroke:"brown"}}}},{label:"15kv",statu:{style:{body:{stroke:"darkgreen"}}}},{label:"13kv",statu:{style:{body:{stroke:"lightgreen"}}}},{label:"10kv",statu:{style:{body:{stroke:"crimson"}}}},{label:"6kv",statu:{style:{body:{stroke:"rgb(0 0 139)"}}}},{label:"0kv",statu:{style:{body:{stroke:"grey"}}}},{label:"0W",statu:{style:{body:{stroke:"grey"}}}},{label:"0B",statu:{style:{body:{stroke:"white"}}}}]},B={"电力":[{name:"禁止",tagName:"use",url:"webtopo/nodes/power/Power.svg#error",attrs:{href:"webtopo/nodes/power/Power.svg#error",stroke:"red"},preserveAspectRatio:!0,status:[R]},{name:"隔离开关-下",tagName:"use",url:"webtopo/nodes/power/Power.svg#Dis_V_D_Open",attrs:{href:"webtopo/nodes/power/Power.svg#Dis_V_D_Open",stroke:"red"},preserveAspectRatio:!0,status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Dis_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Dis_V_D_Close"}}}}]},R]},{name:"隔离开关-上",tagName:"use",url:"webtopo/nodes/power/Power.svg#Dis_V_U_Open",attrs:{href:"webtopo/nodes/power/Power.svg#Dis_V_U_Open",stroke:"red"},preserveAspectRatio:!0,status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Dis_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Dis_V_U_Close"}}}}]},R]},{name:"机械开关-下",tagName:"use",url:"webtopo/nodes/power/Power.svg#Mec_V_D_Open",attrs:{href:"webtopo/nodes/power/Power.svg#Mec_V_D_Open",stroke:"red"},preserveAspectRatio:!0,status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mec_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mec_V_D_Close"}}}}]},R]},{name:"机械开关-上",tagName:"use",url:"webtopo/nodes/power/Power.svg#Mec_V_U_Open",attrs:{href:"webtopo/nodes/power/Power.svg#Mec_V_U_Open",stroke:"red"},preserveAspectRatio:!0,status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mec_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mec_V_U_Close"}}}}]},R]},{name:"负荷隔离开关",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#LoadDis_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_D_Close"}}}}]},R]},{name:"负荷隔离开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_U_OPen",stroke:"red"},url:"webtopo/nodes/power/Power.svg#LoadDis_V_U_OPen",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_U_OPen"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#LoadDis_V_U_Close"}}}}]},R]},{name:"圆形隔离开关",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#RoundDis_V_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#RoundDis_V_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#RoundDis_V_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#RoundDis_V_Close"}}}}]},R]},{name:"菱形隔离开关",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DiamondDis_V_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DiamondDis_V_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DiamondDis_V_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DiamondDis_V_Close"}}}}]},R]},{name:"小车隔离开关",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DrawoutDis_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_H_Close"}}}}]},R]},{name:"小车隔离开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DrawoutDis_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutDis_H_Close"}}}}]},R]},{name:"接地隔离开关-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#GroundDis_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_D_Close"}}}}]},R]},{name:"接地隔离开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#GroundDis_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#GroundDis_V_U_Close"}}}}]},R]},{name:"熔断器式隔离开关-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#FuseDis_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_D_Close"}}}}]},R]},{name:"熔断器式隔离开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#FuseDis_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseDis_V_U_Close"}}}}]},R]},{name:"多级单线开关-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Mul_SLine_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_D_Close"}}}}]},R]},{name:"多级单线开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Mul_SLine_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_SLine_V_U_Close"}}}}]},R]},{name:"多级多线开关-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_D_OPen",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Mul_MLine_V_D_OPen",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_D_OPen"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_D_Close"}}}}]},R]},{name:"多级多线开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Mul_MLine_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Mul_MLine_V_D_Close"}}}}]},R]},{name:"不闭锁按钮开关-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_D_OPen",stroke:"red"},url:"webtopo/nodes/power/Power.svg#UnlockButt_V_D_OPen",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_D_OPen"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_D_Close"}}}}]},R]},{name:"不闭锁按钮开关-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#UnlockButt_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#UnlockButt_V_U_Close"}}}}]},R]},{name:"断路器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Breaker_V_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Breaker_V_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker_V_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker_V_Close"}}}},{label:"非法",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker_V_Invalid"}}}},{label:"初始",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker_V_InitStop"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker_V_Close"}}}}]},R]},{name:"断路器2-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Breaker2_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_D_Close"}}}}]},R]},{name:"断路器2-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Breaker2_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Breaker2_V_U_Close"}}}}]},R]},{name:"闸刀状断路器-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DisBreaker_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_D_Close"}}}}]},R]},{name:"闸刀状断路器-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DisBreaker_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DisBreaker_V_U_Close"}}}}]},R]},{name:"熔断器式断路器-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#FuseBreaker_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_D_Close"}}}}]},R]},{name:"熔断器式断路器-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#FuseBreaker_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#FuseBreaker_V_U_Close"}}}}]},R]},{name:"小车断路器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DrawoutBreaker_V_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DrawoutBreaker_V_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutBreaker_V_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DrawoutBreaker_V_Close"}}}}]},R]},{name:"熔断器-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Fuse_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Fuse_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Fuse_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Fuse_V_D_Close"}}}}]},R]},{name:"熔断器-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Fuse_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Fuse_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Fuse_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#Fuse_V_D_Close"}}}}]},R]},{name:"跌落式熔断器-下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_D_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DropFuse_V_D_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_D_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_D_Close"}}}}]},R]},{name:"跌落式熔断器-上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_U_Open",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DropFuse_V_U_Open",status:[{label:"状态",selected:"开",status:[{label:"开",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_U_Open"}}}},{label:"关",statu:{style:{body:{href:"webtopo/nodes/power/Power.svg#DropFuse_V_D_Close"}}}}]},R]},{name:"电容器接地",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Capacitor_V_U",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Capacitor_V_U",status:[R]},{name:"串联电容",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#SeriesCapacitor_H",stroke:"red"},url:"webtopo/nodes/power/Power.svg#SeriesCapacitor_H",status:[R]},{name:"可变电容器_水平",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ReguCapacitor_H",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ReguCapacitor_H",status:[R]},{name:"可变电容器_竖直",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ReguCapacitor_V",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ReguCapacitor_V",status:[R]},{name:"预调电容器_水平",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#PresetCapacitor_H",stroke:"red"},url:"webtopo/nodes/power/Power.svg#PresetCapacitor_H",status:[R]},{name:"预调电容器_竖直",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#PresetCapacitor_V",stroke:"red"},url:"webtopo/nodes/power/Power.svg#PresetCapacitor_V",status:[R]},{name:"旁路电容",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#BypassCapacitor_H_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#BypassCapacitor_H_L",status:[R]},{name:"极性电容_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#PolarCapacitor_H_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#PolarCapacitor_H_L",status:[R]},{name:"极性电容_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#PolarCapacitor_H_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#PolarCapacitor_H_R",status:[R]},{name:"差动可调电容器_下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DiffReguCapacitor_V_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DiffReguCapacitor_V_D",status:[R]},{name:"差动可调电容器_上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DiffReguCapacitor_V_U",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DiffReguCapacitor_V_U",status:[R]},{name:"定片分离可调电容器_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#StaSepReguCapacitor_V_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#StaSepReguCapacitor_V_L",status:[R]},{name:"定片分离可调电容器_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#StaSepReguCapacitor_V_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#StaSepReguCapacitor_V_R",status:[R]},{name:"电抗器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Reactor_H",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Reactor_H",status:[R]},{name:"并联电抗器_接地下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ShuntReactor_V_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ShuntReactor_V_D",status:[R]},{name:"绕组",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Winding",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Winding",status:[R]},{name:"星型绕组",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#YWinding",stroke:"red"},url:"webtopo/nodes/power/Power.svg#YWinding",status:[R]},{name:"三角形绕组",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DeltaWinding",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DeltaWinding",status:[R]},{name:"自耦绕组",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#AutoWinding",stroke:"red"},url:"webtopo/nodes/power/Power.svg#AutoWinding",status:[R]},{name:"站用变压器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#StationTransformer",stroke:"red"},url:"webtopo/nodes/power/Power.svg#StationTransformer",status:[R]},{name:"带铁芯的电感器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#IroncoreInductor_H_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#IroncoreInductor_H_D",status:[R]},{name:"带铁芯连续可变电感器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#IroncoreVarInductor_H_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#IroncoreVarInductor_H_D",status:[R]},{name:"铁芯有间隙电感器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#IroncoreGapInductor_H_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#IroncoreGapInductor_H_D",status:[R]},{name:"可变电感器_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ReguInductor_H_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ReguInductor_H_R",status:[R]},{name:"可变电感器_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ReguInductor_H_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ReguInductor_H_L",status:[R]},{name:"电流互感器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT_V_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT_V_R",status:[R]},{name:"双铁芯双绕组电流互感器_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DDCT_V_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DDCT_V_R",status:[R]},{name:"双铁芯双绕组电流互感器_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#DDCT_V_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#DDCT_V_L",status:[R]},{name:"带抽斗的电流互感器_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT_V_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT_V_R",status:[R]},{name:"带抽斗的电流互感器_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT_V_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT_V_L",status:[R]},{name:"电流互感器1_右",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT1_V_R",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT1_V_R",status:[R]},{name:"电流互感器1_左",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT1_V_L",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT1_V_L",status:[R]},{name:"电流互感器2",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#CT2_V",stroke:"red"},url:"webtopo/nodes/power/Power.svg#CT2_V",status:[R]},{name:"电压互感器",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#PT",stroke:"red"},url:"webtopo/nodes/power/Power.svg#PT",status:[R]},{name:"负荷_上",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Load_U",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Load_U",status:[R]},{name:"负荷_下",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Load_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Load_D",status:[R]},{name:"注入",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#EquivalentSource",stroke:"red"},url:"webtopo/nodes/power/Power.svg#EquivalentSource",status:[R]},{name:"交流符",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ACSymbol",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ACSymbol",status:[R]},{name:"消弧线圈",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ArcSuppCoil_V_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ArcSuppCoil_V_D",status:[R]},{name:"避雷器1",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Arrester1_V_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Arrester1_V_D",status:[R]},{name:"避雷器2",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Arrester2_V_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Arrester2_V_D",status:[R]},{name:"接地符",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#Ground_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#Ground_D",status:[R]},{name:"无噪声接地符",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#NoiselessGround_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#NoiselessGround_D",status:[R]},{name:"保护接地符",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ProtectGround_D",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ProtectGround_D",status:[R]},{name:"可调节设备符号",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#ReguSymbol",stroke:"red"},url:"webtopo/nodes/power/Power.svg#ReguSymbol",status:[R]},{name:"非线性调节设备符号",tagName:"use",preserveAspectRatio:!0,attrs:{href:"webtopo/nodes/power/Power.svg#NolinearReguSymbol",stroke:"red"},url:"webtopo/nodes/power/Power.svg#NolinearReguSymbol",status:[R]}],"产品":[{name:"背景",url:"webtopo/nodes/Accessoires/Background.svg"},{name:"背景1",url:"webtopo/nodes/Accessoires/Background1.svg"},{name:"背景2",url:"webtopo/nodes/Accessoires/Background2.svg"},{name:"底板",url:"webtopo/nodes/Accessoires/BasePlate.svg"},{name:"下螺栓",url:"webtopo/nodes/Accessoires/BoltsBelow.svg"},{name:"上螺栓",url:"webtopo/nodes/Accessoires/BoltsTop.svg"},{name:"宽底",url:"webtopo/nodes/Accessoires/BottomBroad.svg"},{name:"小底",url:"webtopo/nodes/Accessoires/BottomSmall.svg"},{name:"梯子",url:"webtopo/nodes/Accessoires/Ladder.svg"},{name:"远处梯子",url:"webtopo/nodes/Accessoires/LadderFar.svg"},{name:"梯子油箱",url:"webtopo/nodes/Accessoires/LadderTank.svg"},{name:"梯子油箱上-01",url:"webtopo/nodes/Accessoires/LadderTankUp-01.svg"},{name:"架子",url:"webtopo/nodes/Accessoires/Rack.svg"},{name:"架子1",url:"webtopo/nodes/Accessoires/Rack1.svg"},{name:"栏杆",url:"webtopo/nodes/Accessoires/Railing.svg"},{name:"远处栏杆",url:"webtopo/nodes/Accessoires/RailingFar.svg"},{name:"左侧油箱楼梯",url:"webtopo/nodes/Accessoires/StairsTankLeft.svg"}],"动画":[{name:"火焰",url:"webtopo/nodes/Animation/Flame.svg"},{name:"火焰1",url:"webtopo/nodes/Animation/Flame1.svg"},{name:"火焰2",url:"webtopo/nodes/Animation/Flame2.svg"},{name:"火焰3",url:"webtopo/nodes/Animation/Flame3.svg"},{name:"齿轮",url:"webtopo/nodes/Animation/Gear.svg"},{name:"齿轮1",url:"webtopo/nodes/Animation/Gear1.svg"},{name:"齿轮轮毂",url:"webtopo/nodes/Animation/GearWheels.svg"},{name:"齿轮轮毂1",url:"webtopo/nodes/Animation/GearWheels1.svg"},{name:"烟雾",url:"webtopo/nodes/Animation/Smoke.svg"},{name:"烟雾1",url:"webtopo/nodes/Animation/Smoke1.svg"},{name:"烟雾2",url:"webtopo/nodes/Animation/Smoke2.svg"},{name:"烟雾3",url:"webtopo/nodes/Animation/Smoke3.svg"},{name:"长轴",url:"webtopo/nodes/Animation/SpindleLong.svg"},{name:"长轴1",url:"webtopo/nodes/Animation/SpindleLong1.svg"}],"鼓风机":[{name:"前置冷却风扇",url:"webtopo/nodes/Blowers/CoolFanFront.svg"},{name:"玻璃纤维风扇",url:"webtopo/nodes/Blowers/FiberglassFan.svg"},{name:"排烟器",url:"webtopo/nodes/Blowers/FumeExhauster.svg"},{name:"气体泵",url:"webtopo/nodes/Blowers/GasPump.svg"},{name:"压力风扇",url:"webtopo/nodes/Blowers/PressureBlower.svg"},{name:"径向排烟器",url:"webtopo/nodes/Blowers/RadialFumeExhauster.svg"},{name:"再生风扇",url:"webtopo/nodes/Blowers/RegenerativeBlower.svg"},{name:"涡旋风扇",url:"webtopo/nodes/Blowers/VortexBlower.svg"}],"锅炉":[{name:"水平锅炉",url:"webtopo/nodes/Boilers/BoilerHorizontal.svg"},{name:"水平锅炉剖面",url:"webtopo/nodes/Boilers/BoilerHorizontalCutaway.svg"},{name:"带火的水平锅炉剖面",url:"webtopo/nodes/Boilers/BoilerHorizontalCutawayWithFire.svg"},{name:"水平锅炉正面",url:"webtopo/nodes/Boilers/BoilerHorizontalFront.svg"},{name:"电热热水蒸汽锅炉",url:"webtopo/nodes/Boilers/ElectricHotWaterSteamBoiler.svg"},{name:"柔性水管锅炉",url:"webtopo/nodes/Boilers/FlexibleWaterTubeBoiler.svg"},{name:"柔性水管锅炉剖面",url:"webtopo/nodes/Boilers/FlexibleWaterTubeBoilerCutaway.svg"},{name:"柔性水管锅炉正面",url:"webtopo/nodes/Boilers/FlexibleWaterTubeBoilerFront.svg"},{name:"低排放锅炉",url:"webtopo/nodes/Boilers/LowEmissionBoiler.svg"},{name:"低排放锅炉正面",url:"webtopo/nodes/Boilers/LowEmissionBoilerFront.svg"}],"建筑物":[{name:"商业建筑",url:"webtopo/nodes/Buildings/Commercial.svg"},{name:"商业建筑1",url:"webtopo/nodes/Buildings/Commercial1.svg"},{name:"商业建筑2",url:"webtopo/nodes/Buildings/Commercial2.svg"},{name:"商业建筑3",url:"webtopo/nodes/Buildings/Commercial3.svg"},{name:"工厂",url:"webtopo/nodes/Buildings/Factory.svg"},{name:"工厂1",url:"webtopo/nodes/Buildings/Factory1.svg"},{name:"工厂2",url:"webtopo/nodes/Buildings/Factory2.svg"},{name:"工厂3",url:"webtopo/nodes/Buildings/Factory3.svg"},{name:"工厂4",url:"webtopo/nodes/Buildings/Factory4.svg"},{name:"户外设施",url:"webtopo/nodes/Buildings/OutdoorEnclosure.svg"},{name:"避难所",url:"webtopo/nodes/Buildings/Shelter.svg"}],"机柜":[{name:"大型空白机柜",url:"webtopo/nodes/Cabinets/CabinetBigBlank.svg"},{name:"大型空白机柜（左侧关闭）",url:"webtopo/nodes/Cabinets/CabinetBigBlankLeftClosed.svg"},{name:"大型空白机柜（左侧打开）",url:"webtopo/nodes/Cabinets/CabinetBigBlankLeftOpen.svg"},{name:"大型空白机柜（右侧关闭）",url:"webtopo/nodes/Cabinets/CabinetBigBlankRightClosed.svg"},{name:"大型空白机柜（右侧打开）",url:"webtopo/nodes/Cabinets/CabinetBigBlankRightOpen.svg"},{name:"大型薄型机柜",url:"webtopo/nodes/Cabinets/CabinetBigSlim.svg"},{name:"大型机柜侧面",url:"webtopo/nodes/Cabinets/CabinetSideBig.svg"},{name:"薄型机柜侧面",url:"webtopo/nodes/Cabinets/CabinetSideSlim.svg"},{name:"小型空白机柜",url:"webtopo/nodes/Cabinets/CabinetSmallBlank.svg"},{name:"小型空白机柜（左侧关闭）",url:"webtopo/nodes/Cabinets/CabinetSmallBlankLeftClosed.svg"},{name:"小型空白机柜（右侧关闭）",url:"webtopo/nodes/Cabinets/CabinetSmallBlankRightClosed.svg"},{name:"小型玻璃门机柜（左侧）",url:"webtopo/nodes/Cabinets/CabinetSmallGlassLeft.svg"},{name:"小型玻璃门机柜（右侧）",url:"webtopo/nodes/Cabinets/CabinetSmallGlassRight.svg"},{name:"小型薄型机柜",url:"webtopo/nodes/Cabinets/CabinetSmallSlim.svg"},{name:"HMI面板（右侧）",url:"webtopo/nodes/Cabinets/HMIPanelRight.svg"},{name:"小型料斗",url:"webtopo/nodes/Cabinets/HopperSmall.svg"}],"化学的":[{name:"空气洗涤器",url:"webtopo/nodes/Chemical/AirScrubber.svg"},{name:"空气剥离器",url:"webtopo/nodes/Chemical/AirStripper.svg"},{name:"空气剥离器1",url:"webtopo/nodes/Chemical/AirStripper1.svg"},{name:"原油处理单元",url:"webtopo/nodes/Chemical/CrudeUnit.svg"},{name:"结晶器",url:"webtopo/nodes/Chemical/Crystallizer.svg"},{name:"排气罩",url:"webtopo/nodes/Chemical/ExhaustHood.svg"},{name:"工艺塔",url:"webtopo/nodes/Chemical/ProcessColumn.svg"},{name:"工艺塔1",url:"webtopo/nodes/Chemical/ProcessColumn1.svg"},{name:"工艺搅拌器",url:"webtopo/nodes/Chemical/ProcessMixer.svg"},{name:"剥离器",url:"webtopo/nodes/Chemical/Stripper.svg"}],"容器":[{name:"3D纸箱（封闭）",url:"webtopo/nodes/Containers/3D-CardboardBoxClosed.svg"},{name:"3D纸箱（密封）",url:"webtopo/nodes/Containers/3D-CardboardBoxSealed.svg"},{name:"桶",url:"webtopo/nodes/Containers/Barrel.svg"},{name:"瓶子",url:"webtopo/nodes/Containers/Bottle.svg"},{name:"桶子",url:"webtopo/nodes/Containers/Bucket.svg"},{name:"饮料罐",url:"webtopo/nodes/Containers/CanBeverage.svg"},{name:"罐子（带脚）",url:"webtopo/nodes/Containers/CanFoot.svg"},{name:"纸箱（封闭）",url:"webtopo/nodes/Containers/CardboardBoxClosed.svg"},{name:"纸箱（打开）",url:"webtopo/nodes/Containers/CardboardBoxOpen.svg"},{name:"纸箱（密封）",url:"webtopo/nodes/Containers/CardboardBoxSealed.svg"},{name:"纸箱（用OSHA胶带紧密封闭）",url:"webtopo/nodes/Containers/CardboardBoxTightlySealedWithOSHA-Tape.svg"},{name:"容器",url:"webtopo/nodes/Containers/Container.svg"},{name:"板条箱",url:"webtopo/nodes/Containers/Crate.svg"},{name:"托盘",url:"webtopo/nodes/Containers/Pallet.svg"}],"输送机":[{name:"延长式推杆",url:"webtopo/nodes/Conveyors/ExtendedPusher.svg"},{name:"缩回式推杆",url:"webtopo/nodes/Conveyors/RetractedPusher.svg"}],"诊断":[{name:"信息警示（深色）",url:"webtopo/nodes/Diagnosis_Overlays/InfoAttentionDark.svg"},{name:"信息危险（深色）",url:"webtopo/nodes/Diagnosis_Overlays/InfoDangerDark.svg"},{name:"信息决策（深色）",url:"webtopo/nodes/Diagnosis_Overlays/InfoDecisionDark.svg"},{name:"信息错误严重（深色）",url:"webtopo/nodes/Diagnosis_Overlays/InfoErrorCriticalDark.svg"},{name:"信息（深色）",url:"webtopo/nodes/Diagnosis_Overlays/InfoInformationDark.svg"},{name:"诊断需求状态",url:"webtopo/nodes/Diagnosis_Overlays/StatusOnDiagMDemand.svg"},{name:"诊断故障状态",url:"webtopo/nodes/Diagnosis_Overlays/StatusOnDiagMFault.svg"},{name:"诊断良好状态",url:"webtopo/nodes/Diagnosis_Overlays/StatusOnDiagMGood.svg"},{name:"诊断未知状态",url:"webtopo/nodes/Diagnosis_Overlays/StatusOnDiagUnknown.svg"},{name:"树步骤默认",url:"webtopo/nodes/Diagnosis_Overlays/TreeStepDefault.svg"}],"流量计":[{name:"磁性流量计",url:"webtopo/nodes/Flow_Meters/MagneticFlowMeter.svg"},{name:"磁性流量计1",url:"webtopo/nodes/Flow_Meters/MagneticFlowMeter1.svg"},{name:"质量流量计",url:"webtopo/nodes/Flow_Meters/MassFlowMeter.svg"},{name:"涡轮流量计",url:"webtopo/nodes/Flow_Meters/TurbineMeter.svg"},{name:"涡轮流量计1",url:"webtopo/nodes/Flow_Meters/TurbineMeter1.svg"},{name:"超声波流量传感器",url:"webtopo/nodes/Flow_Meters/UltrasonicFlowTransducer.svg"},{name:"超声波流量传感器1",url:"webtopo/nodes/Flow_Meters/UltrasonicFlowTransducer1.svg"},{name:"文丘里流量计",url:"webtopo/nodes/Flow_Meters/VenturiFlowMeter.svg"}],"加热":[{name:"冷区域",url:"webtopo/nodes/Heatings/AreaCold.svg"},{name:"温暖区域",url:"webtopo/nodes/Heatings/AreaWarm.svg"},{name:"批处理烤箱",url:"webtopo/nodes/Heatings/BatchOven.svg"},{name:"冷蒸发器",url:"webtopo/nodes/Heatings/EvaporatorCold.svg"},{name:"蒸发器关闭",url:"webtopo/nodes/Heatings/EvaporatorOff.svg"},{name:"标准蒸发器",url:"webtopo/nodes/Heatings/EvaporatorStandard.svg"},{name:"温暖蒸发器",url:"webtopo/nodes/Heatings/EvaporatorWarm.svg"},{name:"无火热气氧化器冷区域",url:"webtopo/nodes/Heatings/FlamelessThermalOxidizerCold.svg"},{name:"无火热气氧化器关闭",url:"webtopo/nodes/Heatings/FlamelessThermalOxidizerOff.svg"},{name:"无火热气氧化器标准区域",url:"webtopo/nodes/Heatings/FlamelessThermalOxidizerStandard.svg"},{name:"无火热气氧化器温暖区域",url:"webtopo/nodes/Heatings/FlamelessThermalOxidizerWarm.svg"},{name:"换热器冷区域",url:"webtopo/nodes/Heatings/HeatExchangerCold.svg"},{name:"换热器关闭",url:"webtopo/nodes/Heatings/HeatExchangerOff.svg"},{name:"换热器标准区域",url:"webtopo/nodes/Heatings/HeatExchangerStandard.svg"},{name:"换热器温暖区域",url:"webtopo/nodes/Heatings/HeatExchangerWarm.svg"},{name:"加热元件冷区域",url:"webtopo/nodes/Heatings/HeatingElementCold.svg"},{name:"加热元件关闭",url:"webtopo/nodes/Heatings/HeatingElementOff.svg"},{name:"加热元件标准区域",url:"webtopo/nodes/Heatings/HeatingElementStandard.svg"},{name:"加热元件温暖区域",url:"webtopo/nodes/Heatings/HeatingElementWarm.svg"},{name:"简单冷凝器冷区域",url:"webtopo/nodes/Heatings/SimpleCondenserCold.svg"},{name:"简单冷凝器关闭",url:"webtopo/nodes/Heatings/SimpleCondenserOff.svg"},{name:"简单冷凝器标准区域",url:"webtopo/nodes/Heatings/SimpleCondenserStandard.svg"},{name:"简单冷凝器温暖区域",url:"webtopo/nodes/Heatings/SimpleCondenserWarm.svg"},{name:"垂直蒸汽发生器",url:"webtopo/nodes/Heatings/SteamGeneratorVertical.svg"},{name:"水平温度传感器",url:"webtopo/nodes/Heatings/TemeratureSensorHorizontal.svg"},{name:"垂直温度传感器",url:"webtopo/nodes/Heatings/TemeratureSensorVertical.svg"},{name:"热水器",url:"webtopo/nodes/Heatings/WaterHeater.svg"}],"IT设备":[{name:"移动设备 - 笔记本电脑",url:"webtopo/nodes/IT-Equipment/MobileDevicesLaptop.svg"},{name:"智能手机",url:"webtopo/nodes/IT-Equipment/MobileDevicesSmartphone.svg"},{name:"平板电脑",url:"webtopo/nodes/IT-Equipment/MobileDevicesTablet.svg"},{name:"卫星天线",url:"webtopo/nodes/IT-Equipment/NetworkSatelliteDish.svg"},{name:"交换机",url:"webtopo/nodes/IT-Equipment/NetworkSwitch.svg"},{name:"无线局域网接入点",url:"webtopo/nodes/IT-Equipment/NetworkWLANAccesspoint.svg"},{name:"客户端系统",url:"webtopo/nodes/IT-Equipment/PC-HardwareClientSystem.svg"},{name:"台式系统",url:"webtopo/nodes/IT-Equipment/PC-HardwareDesktopSystem.svg"},{name:"大型显示器",url:"webtopo/nodes/IT-Equipment/PC-HardwareMonitorBig.svg"},{name:"大型打印机",url:"webtopo/nodes/IT-Equipment/PC-HardwarePrinterBig.svg"},{name:"台式打印机",url:"webtopo/nodes/IT-Equipment/PC-HardwarePrinterDesktop.svg"},{name:"服务器系统（大型）",url:"webtopo/nodes/IT-Equipment/PC-HardwareServersystemBig.svg"},{name:"服务器系统（中型）",url:"webtopo/nodes/IT-Equipment/PC-HardwareServersystemMidium.svg"},{name:"服务器系统（小型）",url:"webtopo/nodes/IT-Equipment/PC-HardwareServersystemSmall.svg"}],"物料搬运":[{name:"重力给料机",url:"webtopo/nodes/Material_Handling/GravimetricFeeder.svg"},{name:"锤式破碎机",url:"webtopo/nodes/Material_Handling/HammerMill.svg"},{name:"粉碎机",url:"webtopo/nodes/Material_Handling/Shredder.svg"}],"混合器":[{name:"ISA搅拌器",url:"webtopo/nodes/Mixers/ISA-Agitator.svg"},{name:"混合器",url:"webtopo/nodes/Mixers/Mixer.svg"},{name:"简易混合器",url:"webtopo/nodes/Mixers/SimpleMixer.svg"},{name:"涡轮搅拌器",url:"webtopo/nodes/Mixers/TurbineAgitator.svg"},{name:"风扇",url:"webtopo/nodes/Mixers/Fun1.svg"}],"马达":[{name:"电动机",url:"webtopo/nodes/Motors/Motor.svg"},{name:"电动机1",url:"webtopo/nodes/Motors/Motor1.svg"},{name:"电动机2",url:"webtopo/nodes/Motors/Motor2.svg"},{name:"电动机3",url:"webtopo/nodes/Motors/Motor3.svg"},{name:"电动机4",url:"webtopo/nodes/Motors/Motor4.svg"},{name:"电动机5",url:"webtopo/nodes/Motors/Motor5.svg"},{name:"电动机5前部",url:"webtopo/nodes/Motors/Motor5Front.svg"},{name:"电动机6",url:"webtopo/nodes/Motors/Motor6.svg"},{name:"电动机7",url:"webtopo/nodes/Motors/Motor7.svg"},{name:"电动机7前部",url:"webtopo/nodes/Motors/Motor7Front.svg"},{name:"电动机8",url:"webtopo/nodes/Motors/Motor8.svg"},{name:"电动机8前部",url:"webtopo/nodes/Motors/Motor8Front.svg"},{name:"垂直电动机9",url:"webtopo/nodes/Motors/Motor9Vertical.svg"},{name:"电动机底座",url:"webtopo/nodes/Motors/MotorBase.svg"},{name:"电动机通风机",url:"webtopo/nodes/Motors/MotorVentilator.svg"},{name:"导轨夹",url:"webtopo/nodes/Motors/RailClip.svg"}],"自然":[{name:"蓝色火焰",url:"webtopo/nodes/Nature/BlueFlame.svg"},{name:"火焰",url:"webtopo/nodes/Nature/Fire.svg"},{name:"火焰",url:"webtopo/nodes/Nature/Flame.svg"},{name:"水滴",url:"webtopo/nodes/Nature/WaterDrop.svg"}],"管道":[{name:"90度弯头1",url:"webtopo/nodes/Pipes/90DegreeBend1.svg"},{name:"90度弯头2",url:"webtopo/nodes/Pipes/90DegreeBend2.svg"},{name:"90度弯头3",url:"webtopo/nodes/Pipes/90DegreeBend3.svg"},{name:"90度弯头4",url:"webtopo/nodes/Pipes/90DegreeBend4.svg"},{name:"带螺栓水平双法兰",url:"webtopo/nodes/Pipes/DoubleFlangeWithBoltsHorizontal.svg"},{name:"带螺栓垂直双法兰",url:"webtopo/nodes/Pipes/DoubleFlangeWithBoltsVertical.svg"},{name:"下方带螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithBoltsBelow.svg"},{name:"左侧带螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithBoltsLeft.svg"},{name:"右侧带螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithBoltsRight.svg"},{name:"顶部带螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithBoltsTop.svg"},{name:"水平无螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithoutBoltsHorizontal.svg"},{name:"垂直无螺栓法兰",url:"webtopo/nodes/Pipes/FlangeWithoutBoltsVertical.svg"},{name:"交叉点",url:"webtopo/nodes/Pipes/Intersection.svg"},{name:"水平管道",url:"webtopo/nodes/Pipes/PipeHorizontal.svg"},{name:"向下T型管道",url:"webtopo/nodes/Pipes/PipeTeeDown.svg"},{name:"向左T型管道",url:"webtopo/nodes/Pipes/PipeTeeLeft.svg"},{name:"向右T型管道",url:"webtopo/nodes/Pipes/PipeTeeRight.svg"},{name:"向上T型管道",url:"webtopo/nodes/Pipes/PipeTeeUp.svg"},{name:"垂直管道",url:"webtopo/nodes/Pipes/PipeVertical.svg"}],"顶部+箭头":[{name:"90度左箭头",url:"webtopo/nodes/Pipes-Overlays+Arrows/Arrow90Left.svg"},{name:"90度左箭头1",url:"webtopo/nodes/Pipes-Overlays+Arrows/Arrow90Left1.svg"},{name:"90度右箭头",url:"webtopo/nodes/Pipes-Overlays+Arrows/Arrow90Right.svg"},{name:"90度右箭头1",url:"webtopo/nodes/Pipes-Overlays+Arrows/Arrow90Right1.svg"},{name:"向下箭头",url:"webtopo/nodes/Pipes-Overlays+Arrows/ArrowDown.svg"},{name:"向下箭头1",url:"webtopo/nodes/Pipes-Overlays+Arrows/ArrowDown1.svg"},{name:"向上箭头",url:"webtopo/nodes/Pipes-Overlays+Arrows/ArrowUp.svg"},{name:"向上箭头1",url:"webtopo/nodes/Pipes-Overlays+Arrows/ArrowUp1.svg"},{name:"冲击波",url:"webtopo/nodes/Pipes-Overlays+Arrows/Impulse.svg"},{name:"冲击波1",url:"webtopo/nodes/Pipes-Overlays+Arrows/Impulse1.svg"},{name:"冲击波2",url:"webtopo/nodes/Pipes-Overlays+Arrows/Impulse2.svg"},{name:"冲击波3",url:"webtopo/nodes/Pipes-Overlays+Arrows/Impulse3.svg"},{name:"冲击波叠加",url:"webtopo/nodes/Pipes-Overlays+Arrows/ImpulseOverlay.svg"},{name:"冲击波叠加1",url:"webtopo/nodes/Pipes-Overlays+Arrows/ImpulseOverlay1.svg"},{name:"冲击波叠加2",url:"webtopo/nodes/Pipes-Overlays+Arrows/ImpulseOverlay2.svg"}],"泵":[{name:"90度泵",url:"webtopo/nodes/Pumps/90DegreePump.svg"},{name:"经典泵",url:"webtopo/nodes/Pumps/ClassicPump.svg"},{name:"冷却泵",url:"webtopo/nodes/Pumps/CoolPump.svg"},{name:"驱动泵",url:"webtopo/nodes/Pumps/DrivePump.svg"},{name:"吸末离心泵",url:"webtopo/nodes/Pumps/EndsuctionCentrifugalPump.svg"},{name:"防爆泵",url:"webtopo/nodes/Pumps/ExplosionProofPump.svg"},{name:"重型塑料离心泵",url:"webtopo/nodes/Pumps/HeavyDutyPlasticCentrifugalPump.svg"},{name:"水平泵（左侧）",url:"webtopo/nodes/Pumps/HorizontalPumpLeft.svg"},{name:"水平分体式泵",url:"webtopo/nodes/Pumps/HorizontalSplitCasePump.svg"},{name:"磁力驱动泵",url:"webtopo/nodes/Pumps/MagneticDrivePump.svg"},{name:"泵",url:"webtopo/nodes/Pumps/Pump.svg"},{name:"泵1",url:"webtopo/nodes/Pumps/Pump1.svg"},{name:"泵2",url:"webtopo/nodes/Pumps/Pump2.svg"},{name:"无密封泵",url:"webtopo/nodes/Pumps/SeallessPump.svg"},{name:"自吸离心泵",url:"webtopo/nodes/Pumps/SelfprimingCentrifugalPump.svg"},{name:"通风机",url:"webtopo/nodes/Pumps/Ventilator.svg"},{name:"垂直泵",url:"webtopo/nodes/Pumps/VerticalPump.svg"},{name:"垂直泵1",url:"webtopo/nodes/Pumps/VerticalPump1.svg"},{name:"垂直泵（向下）",url:"webtopo/nodes/Pumps/VerticalPumpDown.svg"},{name:"垂直泵（向上）",url:"webtopo/nodes/Pumps/VerticalPumpUp.svg"}],"尺度":[{name:"数字秤",url:"webtopo/nodes/Scales/DigitalScale.svg"},{name:"0-20刻度（样式1）",url:"webtopo/nodes/Scales/ScaleFrom_0-20-Style1.svg"}],"传感器":[{name:"微波液位传感器",url:"webtopo/nodes/Sensors/MicrowaveLevelSensor.svg"},{name:"非接触式温度计",url:"webtopo/nodes/Sensors/NoncontactThermometer.svg"},{name:"压力表",url:"webtopo/nodes/Sensors/PressureGuage.svg"},{name:"压力变送器",url:"webtopo/nodes/Sensors/PressureTransmitter.svg"}],"信号灯":[{name:"绿色信号灯",url:"webtopo/nodes/Signal_Lamps/SignalLampGreen.svg"},{name:"熄灭的信号灯",url:"webtopo/nodes/Signal_Lamps/SignalLampOff.svg"},{name:"红色信号灯",url:"webtopo/nodes/Signal_Lamps/SignalLampRed.svg"},{name:"黄色信号灯",url:"webtopo/nodes/Signal_Lamps/SignalLampYellow.svg"},{name:"全亮信号塔",url:"webtopo/nodes/Signal_Lamps/SignalTowerAllOn.svg"},{name:"关闭的信号塔",url:"webtopo/nodes/Signal_Lamps/SignalTowerOff.svg"}],"状态":[{name:"燃烧火焰",url:"webtopo/nodes/Status-Overlays/BurningFlame.svg"},{name:"燃烧火焰 1",url:"webtopo/nodes/Status-Overlays/BurningFlame1.svg"},{name:"冷却",url:"webtopo/nodes/Status-Overlays/Cool.svg"},{name:"正在冷却",url:"webtopo/nodes/Status-Overlays/CoolingDown.svg"},{name:"正在冷却 1",url:"webtopo/nodes/Status-Overlays/CoolingDown1.svg"},{name:"正在冷却 2",url:"webtopo/nodes/Status-Overlays/CoolingDown2.svg"},{name:"正在加热",url:"webtopo/nodes/Status-Overlays/HeatingUp.svg"},{name:"正在加热 1",url:"webtopo/nodes/Status-Overlays/HeatingUp1.svg"},{name:"正在加热 2",url:"webtopo/nodes/Status-Overlays/HeatingUp2.svg"},{name:"已暂停",url:"webtopo/nodes/Status-Overlays/Paused.svg"},{name:"运行中",url:"webtopo/nodes/Status-Overlays/Running.svg"},{name:"运行中 1",url:"webtopo/nodes/Status-Overlays/Running1.svg"},{name:"运行中 2",url:"webtopo/nodes/Status-Overlays/Running2.svg"},{name:"运行中 3",url:"webtopo/nodes/Status-Overlays/Running3.svg"},{name:"运行中箭头",url:"webtopo/nodes/Status-Overlays/RunningArrows.svg"},{name:"运行中箭头 1",url:"webtopo/nodes/Status-Overlays/RunningArrows1.svg"},{name:"运行中箭头 2",url:"webtopo/nodes/Status-Overlays/RunningArrows2.svg"},{name:"运行中箭头 3",url:"webtopo/nodes/Status-Overlays/RunningArrows3.svg"},{name:"状态温度正常",url:"webtopo/nodes/Status-Overlays/StateTempOk.svg"},{name:"已停止",url:"webtopo/nodes/Status-Overlays/Stopped.svg"}],"罐":[{name:"桶",url:"webtopo/nodes/Tanks/Barrel.svg"},{name:"元素移动",url:"webtopo/nodes/Tanks/ElementMove.svg"},{name:"平底容器",url:"webtopo/nodes/Tanks/FlatVessel.svg"},{name:"平底容器 1",url:"webtopo/nodes/Tanks/FlatVessel1.svg"},{name:"平底容器水平主体",url:"webtopo/nodes/Tanks/FlatVesselBodyHorizontal.svg"},{name:"平底容器垂直主体",url:"webtopo/nodes/Tanks/FlatVesselBodyVertical.svg"},{name:"平底容器顶部",url:"webtopo/nodes/Tanks/FlatVesselHead.svg"},{name:"平底容器顶部 1",url:"webtopo/nodes/Tanks/FlatVesselHead1.svg"},{name:"平底容器顶部水平左侧",url:"webtopo/nodes/Tanks/FlatVesselHeadHorizontalLeft.svg"},{name:"平底容器顶部水平右侧",url:"webtopo/nodes/Tanks/FlatVesselHeadHorizontalRight.svg"},{name:"平底容器漏斗",url:"webtopo/nodes/Tanks/FlatVesselHopper.svg"},{name:"漏斗",url:"webtopo/nodes/Tanks/Hopper.svg"},{name:"漏斗窗口",url:"webtopo/nodes/Tanks/HopperWindow.svg"},{name:"带窗口的漏斗",url:"webtopo/nodes/Tanks/HopperWithWindow.svg"},{name:"反应器",url:"webtopo/nodes/Tanks/Reactor.svg"},{name:"筒仓",url:"webtopo/nodes/Tanks/Silo.svg"},{name:"球形储罐",url:"webtopo/nodes/Tanks/SphericalTank.svg"},{name:"储存设施",url:"webtopo/nodes/Tanks/StorageFacility.svg"},{name:"储存设施 1",url:"webtopo/nodes/Tanks/StorageFacility1.svg"},{name:"储存设施水平",url:"webtopo/nodes/Tanks/StorageFacilityHorizontal.svg"},{name:"罐",url:"webtopo/nodes/Tanks/Tank.svg"},{name:"罐 1",url:"webtopo/nodes/Tanks/Tank1.svg"},{name:"罐 2",url:"webtopo/nodes/Tanks/Tank2.svg"},{name:"带刻度的罐 2",url:"webtopo/nodes/Tanks/Tank2WithScale.svg"},{name:"罐 3",url:"webtopo/nodes/Tanks/Tank3.svg"},{name:"带螺栓的罐 3",url:"webtopo/nodes/Tanks/Tank3WithBolts.svg"},{name:"罐 4",url:"webtopo/nodes/Tanks/Tank4.svg"},{name:"带铆钉的罐 4",url:"webtopo/nodes/Tanks/Tank4WithRivets.svg"},{name:"罐切面",url:"webtopo/nodes/Tanks/TankCutaway.svg"},{name:"罐门",url:"webtopo/nodes/Tanks/TankDoor.svg"},{name:"罐门 1",url:"webtopo/nodes/Tanks/TankDoor1.svg"},{name:"罐顶部",url:"webtopo/nodes/Tanks/TankHead.svg"},{name:"罐水平",url:"webtopo/nodes/Tanks/TankHorizontal.svg"},{name:"罐开口",url:"webtopo/nodes/Tanks/TankOpening.svg"},{name:"罐视窗",url:"webtopo/nodes/Tanks/TankPorthole.svg"},{name:"罐视窗 1",url:"webtopo/nodes/Tanks/TankPorthole1.svg"},{name:"罐视窗 2",url:"webtopo/nodes/Tanks/TankPorthole2.svg"}],"阀门":[{name:"控制阀门",url:"webtopo/nodes/Valves/ControlValve.svg"},{name:"手动阀门",url:"webtopo/nodes/Valves/HandValve.svg"},{name:"手动阀门 1",url:"webtopo/nodes/Valves/HandValve1.svg"},{name:"手动阀门 2",url:"webtopo/nodes/Valves/HandValve2.svg"},{name:"手动阀门 2 水平前方",url:"webtopo/nodes/Valves/HandValve2HorizontalFront.svg"},{name:"手动阀门 2 垂直",url:"webtopo/nodes/Valves/HandValve2Vertical.svg"},{name:"手动阀门 2 垂直前方",url:"webtopo/nodes/Valves/HandValve2VerticalFront.svg"},{name:"微型电动安全切断阀",url:"webtopo/nodes/Valves/MiniElectricSafetyShutoffValve.svg"},{name:"安全切断阀 - 副本",url:"webtopo/nodes/Valves/SafetyShutoffValve - Copy.svg"},{name:"安全切断阀",url:"webtopo/nodes/Valves/SafetyShutoffValve.svg"},{name:"阀门开启",url:"webtopo/nodes/Valves/ValveOpen.svg"},{name:"阀门关闭",url:"webtopo/nodes/Valves/ValveShut.svg"}],"车辆":[{name:"18轮卡车",url:"webtopo/nodes/Vehicles/18-WheelerTruck.svg"},{name:"右侧飞机",url:"webtopo/nodes/Vehicles/AirplaneRight.svg"},{name:"上升飞机",url:"webtopo/nodes/Vehicles/AirplaneUp.svg"},{name:"自行车",url:"webtopo/nodes/Vehicles/Bicycle.svg"},{name:"推土机",url:"webtopo/nodes/Vehicles/Bulldozer.svg"},{name:"汽车",url:"webtopo/nodes/Vehicles/Car.svg"},{name:"叉车",url:"webtopo/nodes/Vehicles/ForkLift.svg"},{name:"叉车 1",url:"webtopo/nodes/Vehicles/ForkLift1.svg"},{name:"直升机",url:"webtopo/nodes/Vehicles/Helicopter.svg"},{name:"装载机",url:"webtopo/nodes/Vehicles/Loader.svg"},{name:"铁路货车",url:"webtopo/nodes/Vehicles/RailroadBoxCar.svg"},{name:"铁路集装箱车",url:"webtopo/nodes/Vehicles/RailroadContainerCar.svg"},{name:"铁路油罐车",url:"webtopo/nodes/Vehicles/RailroadTankerCar.svg"},{name:"船",url:"webtopo/nodes/Vehicles/Ship.svg"},{name:"简易版18轮卡车",url:"webtopo/nodes/Vehicles/Simple-18-WheelerTruck.svg"},{name:"油罐卡车",url:"webtopo/nodes/Vehicles/TankerTruck.svg"}],"污水处理":[{name:"消化罐",url:"webtopo/nodes/Water_Wastewater/Digester.svg"},{name:"处理池",url:"webtopo/nodes/Water_Wastewater/TreatmentBasin.svg"},{name:"处理池 1",url:"webtopo/nodes/Water_Wastewater/TreatmentBasin1.svg"}],"电线电缆":[{name:"空线盘",url:"webtopo/nodes/Wires_Cables/EmptyWireSpool.svg"},{name:"充满电缆线盘",url:"webtopo/nodes/Wires_Cables/FilledCableSpool.svg"},{name:"充满电线盘",url:"webtopo/nodes/Wires_Cables/FilledWireSpool.svg"}],"装饰":[{name:"边框2",url:"webtopo/nodes/decorate/border2.svg"},{name:"边框2",url:"webtopo/nodes/decorate/border3.svg"},{name:"边框3",url:"webtopo/nodes/decorate/border4.svg"}]},U=["装饰","产品","动画","鼓风机","锅炉","建筑物","机柜","化学的","容器","输送机","诊断","流量计","加热","IT设备","物料搬运","混合器","马达","自然","管道","顶部+箭头","泵","尺度","传感器","信号灯","状态","罐","阀门","车辆","污水处理","电线电缆","电力"];var H=a(8080),$=a(25632),Y=a(34241);let W=new Y.S,G=[];const Q=e=>{let t=[];return G.forEach((a=>{t.push(e.createNode({key:(0,H.Ak)(),groupKey:"charts",shape:a,width:400,height:300,attrs:{foreignObject:{style:{transform:"scale(0.3)"}}}}))})),t},K=()=>{let e=a(51379),t={};e.keys().forEach((a=>{let o=e(a).default,s=o.name;t[s]=o}));let o=t,s=[];for(let[a,i]of Object.entries(o)){let e;if(i.mixins){for(let t of i.mixins)if(e=t.data()[F.qX],e)break}else e=i.data()[F.qX];if(e?.theme){let t=W.getTheme(e.theme);(0,k.merge)(e,t)}(0,$.kz)({shape:a,label:a,width:100,height:100,component:i,charts:e,[F.sD]:F.jM.echarts}),s.push(a)}G=s};class J{constructor(){this.stencils=[]}changeAllStencilGroup(e,t=[]){this.stencils.forEach((a=>{this.changeStencilGroup(e,a,t)})),localStorage.setItem("select_groups",JSON.stringify(t))}changeStencilGroup(e,t,a=[]){t.stopListening(),this.groups=this.getSelectGroups(),this.groups.forEach((e=>{try{t.removeGroup(e)}catch(a){}})),a.forEach((a=>{let o=B[a];t.addGroup({title:a,name:a,collapsed:!0,graphHeight:this.calcGraphHeight(o),layoutOptions:{rowHeight:100}});let s=this.packageImgNode(e,o,a);t.load(s,a)})),t.startListening()}async getStencils(e,t=(e=>e),a=(e=>e)){let o=this.nodesObj;if(!o){o={};for(let[t,a]of Object.entries(z))o[t]=this.packageNode(e,a,t);this.nodesObj=o}const s=await this.getCustomNodes();let i=new L.z({title:"全部展开/折叠",target:e,stencilGraphWidth:300,stencilGraphHeight:0,collapsable:!0,search(e,t){return-1!==e.store.data.label.indexOf(t)},placeholder:"搜索",getDragNode:a=>{let o=a.prop(F.sD);if(o===F.jM.echarts){let e=a.clone();return e.removeAttrByPath("foreignObject/style/transform"),e=t(e),e}let i,r=B[a.store.data.groupKey],l=z[a.store.data.groupKey];if(r){let e=r.find((e=>e.key===a.store.data.key));i=this.packageImagNodeJson(e)}else if(l)i=z[a.store.data.groupKey].find((e=>e.key===a.store.data.key));else{let e=s.find((e=>e.key===a.store.data.key));i=this.packageImagNodeJson(e)}let n=(0,k.cloneDeep)(i);n.options.markup=[{tagName:"g",selector:F.eo,children:[{tagName:"g",selector:F.qc,children:n.options.markup}]}];let V=e.createNode({...n.options,shape:n.shape,label:n.label}),c=V.store.data.size,u=c.height/c.width,p=100,d=100*u;return V.size({width:p,height:d},{silent:!0}),V=t(V),V},getDropNode:e=>{let t=e.clone();return t=a(t),t},groups:[{title:"基础图元",name:"basis",graphHeight:this.calcGraphHeight(o["basis"]),collapsed:!0,layoutOptions:{rowHeight:100}},{title:"图表",name:"charts",graphHeight:this.calcGraphHeight(o["charts"]),collapsed:!0,layoutOptions:{center:!0,columns:2,columnWidth:140,rowHeight:100,dy:120,dx:150,resizeToFit:!1}},{title:"风扇",name:"fan",collapsed:!0,graphHeight:this.calcGraphHeight(o["fan"]),layoutOptions:{rowHeight:100}},{title:"生产",name:"machine",graphHeight:this.calcGraphHeight(o["machine"]),collapsed:!0,layoutOptions:{rowHeight:110}},{title:"自定义",name:"custom",graphHeight:this.calcGraphHeight(s),collapsed:!0,layoutOptions:{rowHeight:110}}],layoutOptions:{columns:3,columnWidth:80,rowHeight:55,resizeToFit:!0}}),r=this.packageImgNode(e,s,"custom");i.load(r,"custom");for(let[V]of Object.entries(z))i.load(o[V],V);let l=this.chartsNodes;l||(this.chartsNodes=l=Q(e)),l&&i.load(l,"charts"),this.stencils.push(i);let n=this.getSelectGroups();return this.changeStencilGroup(e,i,n),i}async getCustomNodes(){try{const e=await fetch("webtopo/custom/index.json");console.log(e);const t=await e.json();return t??[]}catch(e){console.error("Error fetching file list:",e)}}calcGraphHeight(e){return e?.length?130*Math.ceil(e.length/3):0}getSelectGroups(){let e=[];try{let t=localStorage.getItem("select_groups");t&&(this.groups=e=JSON.parse(t))}catch(t){localStorage.removeItem("select_groups")}return e}packageImagNodeJson({name:e,url:t={},status:a,attrs:o,tagName:s="image",preserveAspectRatio:i=!1}){return{label:e,shape:"super-node",options:{preserveAspectRatio:i,width:400,height:400,markup:[{tagName:"rect",selector:"selectorRect",attrs:{x:0,y:0,fill:"none",pointerEvents:"visible"}},{name:"图片",tagName:s,selector:"body",attrs:{width:"204px",height:"204px"}}],status:a,attrs:{selectorRect:{refWidth:1,refHeight:1},body:{preserveAspectRatio:"none meet",refWidth:1,refHeight:1,href:t,...o}}}}}packageImgNode(e,t,a){return t.map((t=>{let o=this.packageImagNodeJson(t);return o.options.attrs=o.options.attrs??{},o.options.attrs[F.VY]={text:o.label,fill:"#888",fontSize:12,fontWeight:600,refX:"50%",refY:"120%",textAnchor:"middle",textVerticalAnchor:"top",fontFamily:"Arial, helvetica, sans-serif",textWrap:{width:"100%",height:20,ellipsis:!0}},t.key=t.url,"custom-vue-node"!=t.shape&&(o.options.markup=o.options.markup??[],o.options.markup.push({tagName:"text",selector:F.VY}),o.options.markup.push({tagName:"title",selector:"title"}),o.options.attrs["title"]={text:o.label}),e.createNode({key:t.url,groupKey:a,shape:o.shape??"super-node",label:o.label,...o.options})}))}packageNode(e,t,a){return t.map((t=>{let o=(0,k.cloneDeep)(t);o.options.attrs=o.options.attrs??{},o.options.attrs[F.VY]={text:o.label,fill:"#888",fontSize:12,fontWeight:600,refX:"50%",refY:"120%",textAnchor:"middle",textVerticalAnchor:"top",fontFamily:"Arial, helvetica, sans-serif"};const s=(0,H.Ak)();return t.key=s,"custom-vue-node"!=t.shape&&(o.options.markup=o.options.markup??[],o.options.markup.push({tagName:"text",selector:F.VY}),o.options.markup.push({tagName:"title",selector:"title"}),o.options.attrs["title"]={text:o.label}),e.createNode({key:s,groupKey:a,shape:o.shape??"super-node",label:o.label,...o.options})}))}clear(){this.stencils=[]}}var q=new J,Z=a(31512);let X=new I;var ee={name:"AddNodeDialog",mixins:[Z.c],data(){return{selectEdge:"pipeline-edge",connector:"normal",router:"normal",showPopper:!1,reference:null,shapeList:z,instance:null}},inject:["svg"],mounted(){X.initNodeTool(j.ke,(e=>{this.showPopper=!0,this.reference=e.currentTarget,this.instance&&this.instance.destroy(),this.instance=(0,S.n4)(this.reference,this.$refs.tooltip,{placement:"right"})})),(0,P.on)(document,"click",this.handleDocumentClick),this.nodeEventHook.onGraphInitHook((()=>{this.init()}))},methods:{handleDocumentClick(e){this.$el.contains(e.target)||!this.reference||this.reference.contains(e.target)||(this.showPopper=!1)},async init(){let e=await q.getStencils(this.graph,(e=>(this.showPopper=!1,e)),(e=>{console.log("target:",e);let t=this.selectNode(),a=this.graph.createEdge({shape:this.selectEdge,source:{cell:t.cell,connectionPoint:{name:"bbox",args:{offset:20,stroked:!0}}},target:{cell:e,connectionPoint:{name:"bbox",args:{offset:20,stroked:!0}}},connector:{name:this.connector},router:this.router});return setTimeout((()=>{this.graph.addEdge(a)}),1),a.toBack(),a.prop(F.f1,"管道_"+this.graph.getCellCount()),e.prop(F.f1,e.prop("label")+"_"+(this.graph.getCellCount()+1)),e}));document.getElementById("dialogStencil").appendChild(e.container)}},destroyed(){this.instance&&this.instance.destroy()}},te=ee,ae=(0,_.A)(te,C,E,!1,null,null,null),oe=ae.exports,se=a(38083),ie=a(75060),re=a(44077),le=a(35186),ne=a(21292),Ve=a(92494),ce=a(15246),ue=a(92626),pe=a(86162);class de{constructor(){this.angleMultiple=10,this.startDrawListening=[],this.endDrawListening=[],this.clickTimestamp=0,this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.handleClick=this.handleClick.bind(this),this.setTarget=this.setTarget.bind(this)}start(e,t){this.shape=t,this.stopListening(),this.graph=e,this.graph.cleanSelection(),this.graph.clearTransformWidgets(),this.startListening(),this.startDrawListening.forEach((e=>{e()}))}stop(){this.stopListening(),this.endDrawListening.forEach((e=>{e()}))}startListening(){this.graph.container.addEventListener("click",this.handleClick),this.graph.container.addEventListener("mousemove",this.setTarget)}stopListening(){this.drawEdge&&(this.drawEdge=null),this.graph&&(this.graph.container.removeEventListener("click",this.handleClick),this.graph.container.removeEventListener("mousemove",this.setTarget),this.graph=null)}handleClick(e){const t=(new Date).getTime();let a=!0;if(this.preEvent){let{pageX:t,pageY:o}=this.preEvent,{pageX:s,pageY:i}=e;const r=Math.sqrt((s-t)**2+(i-o)**2);a=r<5}if(this.preEvent=e,t-this.clickTimestamp<300&&a){let e=this.drawEdge.getVertices();e.pop(),this.drawEdge.setVertices(e),this.stop()}else this.draw(e);this.clickTimestamp=t}draw(e){let{pageX:t,pageY:a}=e,o=this.graph.pageToLocal(t,a);this.drawEdge?(this.addVertices(),this.isMove=!1,this.graph.stopBatch("draw")):this.startDraw(o)}startDraw({x:e,y:t}){let{shape:a,name:o}=this.shape;this.drawEdge=this.graph.addEdge({[F.f1]:`${o}_${this.graph.getCellCount()+1}`,shape:a,source:{x:e,y:t},target:{x:e,y:t},vertices:[],connector:{name:""}})}addVertices(){let e=this.drawEdge.getVertices(),t=this.drawEdge.getTarget();e.push(t),this.drawEdge.setVertices(e)}setTarget(e){if(this.drawEdge)if(this.isMove||this.graph.startBatch("draw"),this.isMove=!0,e.shiftKey){let t,a=this.drawEdge.getVertices();t=a&&a.length>0?{x:a[a.length-1].x,y:a[a.length-1].y}:this.drawEdge.getSource();let o=null;const s=this.angleMultiple;let{pageX:i,pageY:r}=e,l=this.graph.pageToLocal(i,r),n={x:l.x,y:l.y};const V=n.x-t.x,c=n.y-t.y,u=Math.sqrt(V*V+c*c),p=Math.atan2(c,V)*(180/Math.PI),d=Math.round(p/s)*s,h=d*Math.PI/180;o={x:t.x+Math.cos(h)*u,y:t.y+Math.sin(h)*u},this.drawEdge.setTarget(o)}else{let{pageX:t,pageY:a}=e,o=this.graph.pageToLocal(t,a);this.drawEdge.setTarget(o)}}onStartDrawListening(e=(()=>{})){let t=this.startDrawListening.find((t=>t===e&&t.toString()===e.toString()));t||this.startDrawListening.push(e)}onEndDrawListening(e=(()=>{})){this.endDrawListening.push(e);let t=this.endDrawListening.find((t=>t===e&&t.toString()===e.toString()));t||this.endDrawListening.push(e)}}var he=new de;class ge{init(e,{beforeAddCommand:t=(()=>{})}){let a;e.use(new pe.F),e.use(new ue.H({enabled:!0,pannable:!1,pageVisible:!0,pageBreak:!0,autoResize:!1})),he.onStartDrawListening((()=>{a=!0})),he.onEndDrawListening((()=>{a=!1})),e.use(new re.d({resizing:{enabled:e=>{if(a)return!1;let t=e.prop("lock");return!t},orthogonal:!0,preserveAspectRatio:e=>e.store.data.preserveAspectRatio},rotating:{enabled:e=>{if(a)return!1;let t=e.prop("lock");return!t}}})),e.use(new le.R({enabled:!0,clean:5e3,resizing:!0})),e.use(new ne.s({enabled:!0,global:!0})),e.use(new Ve.B({enabled:!0,useLocalStorage:!0})),e.use(new ce.B({beforeAddCommand:(e,a)=>{let o="tools"!=a.key;return o&&t(),o}})),e.use(new ie.L({rubberband:!0,strict:!0,showNodeSelectionBox:!1,rubberEdge:!0,pointerEvents:"none",following:!0,filter:e=>{if(a)return!1;let t=e.prop("lock");return!t}}));let o=e.getPlugin("transform");o.createWidget=function(e){this.clearWidgets();const t=this.createTransform(e);t&&(t.dispose=function(){this.remove(),this.off(),this.stopListening()}),t&&(this.widgets.set(e,t),t.on("*",((e,t)=>{this.trigger(e,t),this.graph.trigger(e,t)})))};let s=e.getPlugin("selection");s.selectionImpl.confirmUpdate=function(){return this.hide(),i(this),0},s.selectionImpl.updateContainer=function(){const e={x:1/0,y:1/0},t={x:0,y:0},a=this.collection.toArray();a.forEach((a=>{const o=this.graph.renderer.findViewByCell(a);if(o){const a=o.getBBox({useCellGeometry:!0});e.x=Math.min(e.x,a.x),e.y=Math.min(e.y,a.y),t.x=Math.max(t.x,a.x+a.width),t.y=Math.max(t.y,a.y+a.height)}})),j.Jf.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}),j.Jf.attr(this.selectionContainer,"data-selection-length",this.collection.length),this.collection.length>1&&this.showSelected(),this.collection.length;const o=this.options.content;if(o)if("function"===typeof o){const e=j.eY.call(o,this.graph,this,this.selectionContent);e&&(this.selectionContent.innerHTML=e)}else this.selectionContent.innerHTML=o;this.collection.length>0&&!this.container.parentNode?j.Jf.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)};let i=(0,k.debounce)((e=>{e.updateContainer(),e.showSelected()}),300,{leading:!1,trailing:!0})}}var me=ge;const fe=function(e){let t=e.getCellById(F.Rs);t||e.addNodes([{id:F.Rs,shape:"super-node",visible:!1,width:1,height:1,x:0,y:0,markup:[{tagName:"rect"}],lock:!0}])},be=function(e,t){e.removeCells(["point_left_top","point_right_top","point_left_bottom","point_bottom_bottom"]),e.addNodes([{id:"point_left_top",shape:"rect",visible:!1,width:1,height:1,x:0,y:0,lock:!0},{id:"point_right_top",shape:"rect",visible:!1,width:1,height:1,x:t.width-1,y:0,lock:!0},{id:"point_left_bottom",shape:"rect",visible:!1,width:1,height:1,x:0,y:t.height-1,lock:!0},{id:"point_bottom_bottom",shape:"rect",visible:!1,width:1,height:1,x:t.width-1,y:t.height-1,lock:!0}])},ve=function(e,t){let a=e.getPlugin("scroller");a&&(e.zoom(1,{absolute:!0}),e.options.width=t.width,e.options.height=t.height,a.resizePage(t.width,t.height),e.zoom(1,{absolute:!0}),a.transitionToRect({x:0,y:0,...t},{scaleGrid:.05,visibility:1}),be(e,t)),console.log("执行了画布大小")},Ae=function(e){let t=e.getSelectedCells();if(t.length<1)return;let a,o,s=(0,k.groupBy)(t,(e=>{if(e.isEdge())return null;let{y:t}=e.position();return t})),i=[],r=[],l=1;e.startBatch("mattAlign");for(let[n,V]of Object.entries(s))null!==n&&(V.sort(((e,t)=>{let a=e.position?.(),o=t.position?.();return a.x-o.x})),V.forEach((e=>{let{x:t,y:s}=e.position(),{width:n,height:V}=e.size();if(1===l)if(void 0===a&&(a=a??s,o=o??t),0===r.length)i[0]=t+n,r[0]=s+V,e.position(t,s);else{e.position(o,r[0]);let{x:t,y:a}=e.position(),{width:s,height:l}=e.size();i[0]=t+s,r[0]=a+l}if(2===l){if(r.length<2){e.position(i[0],a);let{y:t}=e.position(),{height:o}=e.size();r[1]=t+o}else{e.position(i[0],r[1]);let{y:t}=e.position(),{height:a}=e.size();r[1]=t+a}l=0}l++})));e.stopBatch("mattAlign")},ye=function(e){let t=e.getSelectedCells();if(t.length<1)return;let a=(0,k.minBy)(t,(e=>e.isEdge()?null:e.position().y));if(void 0===a)return;let o=a.position().y;e.startBatch("pageTopAlign"),t.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},s)=>{e.setVertexAt(s,{x:t,y:a-o})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t,y:a-o})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t,y:a-o})}return}let{x:t,y:a}=e.position();e.position(t,a-o,{deep:!0})})),e.stopBatch("pageTopAlign")},we=function(e,t){let a=e.getSelectedCells();if(a.length<1)return;let o=(0,k.maxBy)(a,(e=>{if(e.isEdge())return null;let{y:t}=e.position(),{height:a}=e.size();return t+a}));if(void 0===o)return;let{y:s}=o.position(),{height:i}=o.size(),r=t.pageSize.height,l=r-s-i;e.startBatch("pageBottomAlign"),a.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},o)=>{e.setVertexAt(o,{x:t,y:a+l})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t,y:a+l})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t,y:a+l})}return}let{x:t,y:a}=e.position();e.position(t,a+l,{deep:!0})})),e.stopBatch("pageBottomAlign")},_e=function(e,t){let a,o,s=e.getSelectedCells();if(s.length<1)return;if(s.forEach((e=>{if(e.isEdge())return;let{y:t}=e.position(),{height:s}=e.size(),i=t+s;a=a??t,o=o??t,a>t&&(a=t),o<i&&(o=i)})),void 0===o||void 0===a)return;let i=a+(o-a)/2,r=t.pageSize.height,l=r/2-i;e.startBatch("pagePVCenterAlign"),s.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},o)=>{e.setVertexAt(o,{x:t,y:a+l})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t,y:a+l})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t,y:a+l})}return}let{x:t,y:a}=e.position();e.position(t,a+l,{deep:!0})})),e.stopBatch("pagePVCenterAlign")},Ne=function(e,t){let a,o,s=e.getSelectedCells();if(s.length<1)return;if(s.forEach((e=>{if(e.isEdge())return;let{x:t}=e.position(),{width:s}=e.size(),i=t+s;a=a??t,o=o??t,a>t&&(a=t),o<i&&(o=i)})),void 0===o||void 0===a)return;let i=a+(o-a)/2,r=t.pageSize.width,l=r/2-i;e.startBatch("pageHJCenterAlign"),s.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},o)=>{e.setVertexAt(o,{x:t+l,y:a})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t+l,y:a})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t+l,y:a})}return}let{x:t,y:a}=e.position();e.position(t+l,a,{deep:!0})})),e.stopBatch("pageHJCenterAlign")},xe=function(e){let t=e.getSelectedCells();if(t.length<1)return;let a=(0,k.minBy)(t,(e=>e.isEdge()?null:e.position().x));if(void 0===a)return;let o=a.position().x;e.startBatch("pageLeftAlign"),t.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},s)=>{e.setVertexAt(s,{x:t-o,y:a})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t-o,y:a})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t-o,y:a})}return}let{x:t,y:a}=e.position();e.position(t-o,a,{deep:!0})})),e.stopBatch("pageLeftAlign")},Me=function(e,t){let a=e.getVertices(),o=e.getSourcePoint(),s=e.getTargetPoint(),i=[...a,o,s];return t?i.map((e=>e[t])):i},Te=function(e,t){let a=e.getSelectedCells();if(a.length<1)return;let o=(0,k.maxBy)(a,(e=>{if(e.isEdge())return;let{x:t}=e.position(),{width:a}=e.size();return t+a}));if(void 0===o)return;let{x:s}=o.position(),{width:i}=o.size(),r=t.pageSize.width,l=r-s-i;e.startBatch("pageRightAlign"),a.forEach((e=>{if(e.isEdge()){let t=e.getVertices();if(t?.forEach((({x:t,y:a},o)=>{e.setVertexAt(o,{x:t+l,y:a})})),!e.getSourceCellId()){let{x:t,y:a}=e.getSourcePoint();e.setSource({x:t+l,y:a})}if(!e.getTargetCellId()){let{x:t,y:a}=e.getTargetPoint();e.setTarget({x:t+l,y:a})}return}let{x:t,y:a}=e.position();e.position(t+l,a,{deep:!0})})),e.stopBatch("pageRightAlign")},ke=function(e){let t,a=e.getSelectedCells();a.length<=1||(a=a.sort(((e,t)=>{if(e.isEdge())return 1;if(t.isEdge())return-1;let a=e.position(),o=t.position();return a.x-o.x})),e.startBatch("hjAlign"),a.forEach((e=>{if(e.isEdge())return;if(void 0!=t){let{y:a}=e.position();e.position(t,a,{deep:!0})}let{x:a}=e.position(),{width:o}=e.size();t=a+o})),e.stopBatch("hjAlign"))},De=function(e){let t,a=e.getSelectedCells();a.length<=1||(a=a.sort(((e,t)=>{if(e.isEdge())return 1;if(t.isEdge())return-1;let a=e.position(),o=t.position();return a.y-o.y})),e.startBatch("pvAlign"),a.forEach((e=>{if(e.isEdge())return;if(void 0!=t){let{x:a}=e.position();e.position(a,t,{deep:!0})}let{y:a}=e.position(),{height:o}=e.size();t=a+o})),e.stopBatch("pvAlign"))},Ce=function(e){let t=e.getSelectedCells();if(t.length<=1)return;t=t.sort(((e,t)=>{if(e.isEdge())return 1;if(t.isEdge())return-1;let a=e.position(),o=t.position();return a.x-o.x}));let a,o,s=0,i=0,r=0;if(t.forEach((e=>{if(e.isEdge())return;let{x:t}=e.position(),{width:r}=e.size();a=a??t,o=a??t,o=o<t+r?t+r:o,s+=r,i++})),!o&&!a)return;r=o-a;let l=r-s;if(l<=0)return;let n,V=l/(i-1);e.startBatch("hjAverageAlign"),t.forEach((e=>{if(e.isEdge())return;let{x:t,y:a}=e.position(),{width:o}=e.size();n?(e.position(n+V,a,{deep:!0}),n=n+V+o):n=t+o})),e.stopBatch("hjAverageAlign")},Ee=function(e){let t=e.getSelectedCells();if(t.length<=1)return;t=t.sort(((e,t)=>{if(e.isEdge())return 1;if(t.isEdge())return-1;let a=e.position(),o=t.position();return a.y-o.y}));let a,o,s=0,i=0,r=0;if(t.forEach((e=>{if(e.isEdge())return;let{y:t}=e.position(),{height:r}=e.size();a=a??t,o=a??t,o=o<t+r?t+r:o,s+=r,i++})),!o&&!a)return;r=o-a;let l=r-s;if(l<=0)return;let n,V=l/(i-1);e.startBatch("pvAverageAlign"),t.forEach((e=>{if(e.isEdge())return;let{x:t,y:a}=e.position(),{height:o}=e.size();n?(e.position(t,n+V,{deep:!0}),n=n+V+o):n=a+o})),e.stopBatch("pvAverageAlign")},Oe=function(e){let t,a,o=e.getSelectedCells();if(o.length<=1)return;o.forEach((e=>{if(e.isEdge())return;let{x:o}=e.position(),{width:s}=e.size(),i=o+s;t=t??o,a=a??i,t>o&&(t=o),a<i&&(a=i)}));let s=a-(a-t)/2;e.startBatch("centerAlign"),o.forEach((e=>{if(e.isEdge())return;let{x:t,y:a}=e.position(),{width:o}=e.size();t-=t+o/2-s,e.position(t,a,{deep:!0})})),e.stopBatch("centerAlign")},Ie=function(e){let t,a,o=e.getSelectedCells();if(o.length<=1)return;o.forEach((e=>{if(e.isEdge())return;let{y:o}=e.position(),{height:s}=e.size(),i=o+s;t=t??o,a=a??i,t>o&&(t=o),a<i&&(a=i)}));let s=a-(a-t)/2;e.startBatch("verticalCenterAlign"),o.forEach((e=>{let{x:t,y:a}=e.position(),{height:o}=e.size();a-=a+o/2-s,e.position(t,a,{deep:!0})})),e.stopBatch("verticalCenterAlign")},Se=function(e){let t,a=e.getSelectedCells();a.length<=1||(a.forEach((e=>{if(e.isEdge())return;let{x:a}=e.position();t=t??a,a<t&&(t=a)})),e.startBatch("leftAlign"),a.forEach((e=>{if(e.isEdge())return;let{y:a}=e.position();e.position(t,a,{deep:!0})})),e.stopBatch("leftAlign"))},Pe=function(e){let t,a=e.getSelectedCells();a.length<=1||(a.forEach((e=>{if(e.isEdge())return;let{x:a}=e.position(),{width:o}=e.size(),s=a+o;t=t??s,s>t&&(t=s)})),e.startBatch("rightAlign"),a.forEach((e=>{if(e.isEdge())return;let{y:a}=e.position(),{width:o}=e.size();e.position(t-o,a,{deep:!0})})),e.stopBatch("rightAlign"))},je=function(e){let t,a=e.getSelectedCells();a.length<=1||(a.forEach((e=>{if(e.isEdge())return;let{y:a}=e.position();t=t??a,a<t&&(t=a)})),e.startBatch("topAlign"),a.forEach((e=>{if(e.isEdge())return;let{x:a}=e.position();e.position(a,t,{deep:!0})})),e.stopBatch("topAlign"))},ze=function(e){let t,a=e.getSelectedCells();a.length<=1||(a.forEach((e=>{if(e.isEdge())return;let{y:a}=e.position(),{height:o}=e.size(),s=a+o;t=t??s,s>t&&(t=s)})),e.startBatch("bottomAlign"),a.forEach((e=>{if(e.isEdge())return;let{x:a}=e.position(),{height:o}=e.size();e.position(a,t-o,{deep:!0})})),e.stopBatch("bottomAlign"))},Le=function(e){let t=e.getSelectedCells();t=t.sort(((e,t)=>e.zIndex-t.zIndex)),e.startBatch("toFront"),t.forEach((e=>{e.toFront()})),e.stopBatch("toFront")},Fe=function(e){let t=e.getSelectedCells();t=t.sort(((e,t)=>t.zIndex-e.zIndex)),e.startBatch("toBack"),t.forEach((e=>{e.toBack()})),e.stopBatch("toBack")},Re=function(e){let t=e.getSelectedCells();e.startBatch("moveUp"),t.forEach((e=>{let t=e.model.getMaxZIndex(),a=e.zIndex,o=e.model.getCells().filter((e=>e.zIndex>a&&e.zIndex<=t&&(t=e.zIndex,!0)));o=o.filter((e=>e.zIndex===t)),o?.length&&o.forEach((e=>{e.zIndex=a})),e.zIndex=t})),e.stopBatch("moveUp")},Be=function(e){let t=e.getSelectedCells();e.startBatch("moveDown"),t.forEach((e=>{let t=e.model.getMinZIndex(),a=e.zIndex,o=e.model.getCells().filter((e=>e.zIndex<a&&e.zIndex>=t&&(t=e.zIndex,!0)));o=o.filter((e=>e.zIndex===t)),o?.length&&o.forEach((e=>{e.zIndex=a})),e.zIndex=t})),e.stopBatch("moveDown")},Ue=function(e,t){t?(e.disableSnapline(),e.setGridSize(1)):(e.enableSnapline(),e.setGridSize(10))};class He{init(e,t,a){this.graph=e,e.bindKey(["meta+up","meta+down","meta+left","meta+right","ctrl+up","ctrl+down","ctrl+left","ctrl+right","up","down","left","right"],((t,a)=>{const o=e.getSelectedCells();if(o.length){let e=0,t=0;switch(a){case"up":e=0,t=-1;break;case"down":e=0,t=1;break;case"left":e=-1,t=0;break;case"right":e=1,t=0;break;case"ctrl+up":case"meta+up":e=0,t=-10;break;case"ctrl+down":case"meta+down":e=0,t=10;break;case"ctrl+left":case"meta+left":e=-10,t=0;break;case"ctrl+right":case"meta+right":e=10,t=0;break;default:break}return o.forEach((a=>{a.translate(e,t)})),!1}return!0})),e.bindKey(["meta+x","ctrl+x"],(()=>{const t=e.getSelectedCells();return t.length&&e.cut(t),!1})),e.bindKey(["meta+c","ctrl+c"],(()=>{const t=e.getSelectedCells();return t.length&&e.copy(t),!1})),e.bindKey(["meta+v","ctrl+v"],(()=>{if(!e.isClipboardEmpty()){const t=e.paste({offset:32});(0,D.Ov)(e,t)}return!1})),e.bindKey(["meta+z","ctrl+z"],(()=>(e.canUndo()&&e.undo(),!1))),e.bindKey(["meta+shift+z","ctrl+shift+z"],(()=>(e.canRedo()&&e.redo(),!1))),e.bindKey(["meta+a","ctrl+a"],(()=>{let t=e.getCells();t&&(t=t.filter((e=>!e.isEdge()||(!e.source.cell||!e.target.cell))),e.select(t))})),e.bindKey(["backspace","delete"],(()=>{const t=e.getSelectedCells();t.length&&e.removeCells(t)})),e.bindKey(["alt+1","option+1"],(()=>{const t=e.zoom();t<1.5&&e.zoom(.1)})),e.bindKey(["alt+2","option+2"],(()=>{const t=e.zoom();t>.5&&e.zoom(-.1)})),window.addEventListener("keydown",this.disableSnapline.bind(this),{useCapture:!1}),window.addEventListener("keyup",this.enableSnapline.bind(this),{useCapture:!1});let o=localStorage.getItem("strict");void 0!=o&&e.toggleStrictRubberband("true"===o);let s=localStorage.getItem("isFreeModel");void 0!=s&&Ue(e,"true"===s),e.on("blank:contextmenu",(({e:t,x:i,y:r})=>{o=e.isStrictRubberband(),s="true"===localStorage.getItem("isFreeModel"),a.$contextmenu({items:[{label:"粘贴",disabled:!e.getCellsInClipboard().length,divided:!0,icon:"el-icon-refresh",onClick:()=>{if(!e.isClipboardEmpty()){let t,a,o=e.getCellsInClipboard();o.forEach((e=>{if(e.isEdge()){let o=e.getVertices();o?.forEach((({x:e,y:o})=>{t=t??e,a=a??o,t>e&&(t=e),a>o&&(a=o)}));let s=e.target;if(s){let{x:e,y:o}=s;t=t??e,a=a??o,t>e&&(t=e),a>o&&(a=o)}let i=e.source;if(i){let{x:e,y:o}=i;t=t??e,a=a??o,t>e&&(t=e),a>o&&(a=o)}}else{let{x:o,y:s}=e.getPosition();t=t??o,a=a??s,t>o&&(t=o),a>s&&(a=s)}}));const s=e.paste({offset:{dx:i-t,dy:r-a}});(0,D.Ov)(e,s)}}},{label:"绘制管道",divided:!0,children:[{label:"管道",onClick:()=>{he.start(e,{name:"管道",shape:"pipeline-edge"})}},{label:"电线",onClick:()=>{he.start(e,{name:"电线",shape:"circuit-edge"})}},{label:"线条",onClick:()=>{he.start(e,{name:"线条",shape:"line-edge"})}}]},{label:(o?"关闭":"启用")+"严格框选",onClick:()=>{e.toggleStrictRubberband(!o),localStorage.setItem("strict",!o)}},{label:(s?"关闭":"启用")+"自由模式(Space)",onClick:()=>{Ue(e,!s),localStorage.setItem("isFreeModel",!s)}},{label:(e.isPannable()?"关闭":"启用")+"画布拖拽",onClick:()=>{e.togglePanning(),e.toggleRubberband()}},{label:"全选",onClick:()=>{e.triggerKey("ctrl+a")}}],customClass:"menu-class",event:t.originalEvent,zIndex:9999999})})),e.on("cell:contextmenu",(({e:o,cell:i})=>{let r=e.getSelectedCells(),l=e.getSelectedCells().find((e=>e.id===i.id));l||(r=[i],i.isEdge()?(e.cleanSelection(),e.select(r)):(0,D.Ov)(e,[i]));let n=r.length,V=r.filter((e=>!e.isEdge())).length,c=i.prop("lock"),u=e.isStrictRubberband();s="true"===localStorage.getItem("isFreeModel"),a.$contextmenu({items:[{label:"绘制管道",divided:!0,children:[{label:"管道",onClick:()=>{he.start(e,{name:"管道",shape:"pipeline-edge"})}},{label:"电线",onClick:()=>{he.start(e,{name:"电线",shape:"circuit-edge"})}},{label:"线条",onClick:()=>{he.start(e,{name:"线条",shape:"line-edge"})}}]},{label:"节点分布(不含管道等)",children:[{label:"居左",disabled:V<=0,onClick:()=>{xe(e,t)}},{label:"水平居中",disabled:V<=0,onClick:()=>{Ne(e,t)}},{label:"居右",disabled:V<=0,divided:!0,onClick:()=>{Te(e,t)}},{label:"居顶",disabled:V<=0,onClick:()=>{ye(e,t)}},{label:"垂直居中",disabled:V<=0,onClick:()=>{_e(e,t)}},{label:"居底",disabled:V<=0,divided:!0,onClick:()=>{we(e,t)}},{label:"水平并列",disabled:V<=1,onClick:()=>{ke(e,t)}},{label:"垂直并列",disabled:V<=1,divided:!0,onClick:()=>{De(e,t)}},{label:"水平平均分布",disabled:V<=1,onClick:()=>{Ce(e,t)}},{label:"垂直平均分布",divided:!0,disabled:V<=1,onClick:()=>{Ee(e,t)}},{label:"田字格布局",disabled:V<=1,onClick:()=>{Ae(e,t)}}]},{label:"节点对齐(不含管道等)",children:[{label:"左对齐",disabled:V<=1,onClick:()=>{Se(e,t)}},{label:"水平居中对齐",disabled:V<=1,onClick:()=>{Oe(e,t)}},{label:"右对齐",disabled:V<=1,divided:!0,onClick:()=>{Pe(e,t)}},{label:"顶端对齐",disabled:V<=1,onClick:()=>{je(e,t)}},{label:"垂直居中对齐",disabled:V<=1,onClick:()=>{Ie(e,t)}},{label:"底端对齐",disabled:V<=1,divided:!0,onClick:()=>{ze(e,t)}}]},{label:"复制(C)",onClick:()=>{e.triggerKey("ctrl+c")}},{label:"剪切(X)",onClick:()=>{e.triggerKey("ctrl+x")}},{label:"粘贴(V)",disabled:!e.getCellsInClipboard().length,onClick:()=>{e.triggerKey("ctrl+v")}},{label:"删除(delete)",divided:!0,onClick:()=>{e.triggerKey("backspace")}},{label:"置于顶层",disabled:n<=0,onClick:()=>{Le(e,t)}},{label:"置于底层",disabled:n<=0,onClick:()=>{Fe(e,t)}},{label:"上移一层",disabled:n<=0,onClick:()=>{Re(e,t)}},{label:"下移一层",disabled:n<=0,divided:!0,onClick:()=>{Be(e,t)}},{label:c?"解锁":"锁定",icon:c?"el-icon-unlock":"el-icon-lock",onClick:()=>{if(1===r.length&&!c)return r[0].prop("lock",!0),e.cleanSelection(),void e.clearTransformWidgets();r.forEach((e=>{e.prop("lock",!c)}))}},{label:"隐藏",icon:"el-icon-view",divided:!0,onClick:()=>{r.forEach((e=>{e.hide()}))}},{label:(u?"关闭":"启用")+"严格框选",onClick:()=>{e.toggleStrictRubberband(!u),localStorage.setItem("strict",!u)}},{label:(s?"关闭":"启用")+"自由模式(Space)",onClick:()=>{Ue(e,!s),localStorage.setItem("isFreeModel",!s)}},{label:(e.isPannable()?"关闭":"启用")+"画布拖拽",onClick:()=>{e.togglePanning(),e.toggleRubberband()}},{label:"全选(A)",onClick:()=>{e.triggerKey("ctrl+a")}}],customClass:"menu-class",event:o.originalEvent,zIndex:9999999})})),e.on("cell:mousedown",(({e:t,cell:a})=>{let o=a.prop("lock");o&&e.trigger("blank:mousedown",{e:t})}))}disableSnapline(e){if("Space"===e.code){if(!this.graph.enableConnection){let e=localStorage.getItem("isFreeModel");"false"!==e&&void 0!==e&&null!==e||(this.graph.enableConnection=!0,Ue(this.graph,!0))}return e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}if("AltLeft"===e.code||"AltRight"===e.code)return e.preventDefault(),this.graph.enablePanning(),this.graph.disableRubberband(),!1}enableSnapline(e){if("Space"===e.code){let t=localStorage.getItem("isFreeModel");return"false"!==t&&void 0!==t&&null!==t||(this.graph.enableConnection=!1,Ue(this.graph,!1)),e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}if("AltLeft"===e.code||"AltRight"===e.code)return this.graph.disablePanning(),this.graph.enableRubberband(),!1}clear(){window.removeEventListener("keydown",this.disableSnapline,!1),window.removeEventListener("keyup",this.enableSnapline,!1)}}var $e=He;class Ye extends j.oH{constructor(e={}){super(e)}setPoint(e,t){console.log("superNode test",e,t);let a=se.A.setPoint(e,t);return a}getPAName(e,t){return se.A.getPAName(e,t)}propFormat(e){if(!e)return this.prop("formulas/format");this.prop("formulas/format",e)}propCases(e){if(!e)return this.prop("formulas/cases");this.prop("formulas/cases",e)}getPoints(){let e=[];e.push(...this.getFormulasPoints()),e.push(...this.getEventPoints());let t=[];return e.forEach((e=>{let a=t.find((t=>e.mpId==t.mpId&&e.attrId==t.attrId));a||t.push(e)})),t}getFormulasPoints(){let e=[];e.push(...this.getCasesPoints());let t=this.getFormatPoints();return t&&e.push(t),e}getCasesPoints(){let e=this.getProp("formulas"),t=[];return e?.cases?.forEach((e=>{e.points&&t.push(...e.points)})),t}getFormatPoints(){let e=this.getProp("formulas");return e?.format?.point}getEventPoints(){let e=this.getProp("events"),t=[];return e?.forEach((e=>{e.actions?.forEach((e=>{null!=e.point.attrId&&void 0!=e.point.attrId&&""!=e.point.attrId&&t.push(e.point)}))})),t}}var We=Ye;class Ge{init(e){e.registerEdge("super-edge",We,!0),e.registerEdge("pipeline-edge",{inherit:"super-edge",markup:[{tagName:"g",selector:F.qc,children:[{tagName:"path",selector:"stroke",name:"外壁"},{tagName:"path",selector:"stroke2",name:"金属外壁"},{tagName:"path",selector:"stroke3",name:"金属内壁"},{tagName:"path",selector:"stroke4",name:"流体"}]}],attrs:{stroke:{connection:!0,fill:"none",stroke:"#272727",strokeWidth:"30",strokeLinecap:"round",strokeLinejoin:"round"},stroke2:{connection:!0,fill:"none",stroke:"#d8c0c0",strokeWidth:"18",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"blur(13px)"}},stroke3:{connection:!0,fill:"none",stroke:"#ffffff",strokeWidth:"13",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"blur(2px)"}},stroke4:{connection:!0,fill:"none",stroke:"#4297E4",strokeWidth:"12",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:20,strokeDashoffset:20,style:{animation:"none"}}},status:[{label:"管道样式",selected:"默认",status:[{label:"默认",statu:{style:{stroke:{stroke:"#272727"},stroke2:{stroke:"#d8c0c0"},stroke3:{stroke:"#ffffff"},stroke4:{stroke:"#4297E4",strokeWidth:"12"}}}},{label:"绿色",statu:{style:{stroke:{stroke:"rgba(0, 0, 0, 0)"},stroke2:{stroke:"rgba(0, 0, 0, 0)"},stroke3:{stroke:"rgba(19, 106, 75, 1)"},stroke4:{stroke:"rgba(68, 217, 134, 1)",strokeWidth:"7"}}}}]},{label:"流动状态",selected:"停止",status:[{label:"正向流动",statu:{style:{stroke4:{strokeDasharray:"20,20",style:{animation:"20s linear 0s infinite normal none running ant-line"}}}}},{label:"反向流动",statu:{style:{stroke4:{strokeDasharray:"20,20",style:{animation:"20s linear 0s infinite reverse none running ant-line"}}}}},{label:"停止",isDefault:!0,statu:{style:{stroke4:{style:{animation:"none"}}}}}]}]},!0),e.registerEdge("circuit-edge",{inherit:"super-edge",markup:[{tagName:"g",selector:F.qc,children:[{tagName:"path",selector:"body",name:"流体"}]}],attrs:{body:{connection:!0,strokeWidth:3,strokeDasharray:"0",strokeLinecap:"round",fill:"none",stroke:"red",style:{animation:"none"}}},status:[{label:"流动状态",selected:"停止",status:[{label:"正向流动",statu:{style:{body:{strokeDasharray:"10,5",style:{animation:"20s linear 0s infinite normal none running ant-line",animationDirection:"none"}}}}},{label:"反向流动",statu:{style:{body:{strokeDasharray:"10,5",style:{animation:"20s linear 0s infinite reverse none running ant-line"}}}}},{label:"停止",statu:{style:{body:{strokeDasharray:"10,5",style:{animation:"none"}}}}}]},{label:"电压",selected:"500kv",status:[{label:"1000/800kv",statu:{style:{body:{stroke:"blue"}}}},{label:"750/660kv",statu:{style:{body:{stroke:"orange"}}}},{label:"500kv",statu:{style:{body:{stroke:"red"}}}},{label:"330kv",statu:{style:{body:{stroke:"rgb(30 144 255)"}}}},{label:"220kv",statu:{style:{body:{stroke:"purple"}}}},{label:"110kv",statu:{style:{body:{stroke:"rgb(240 65 85)"}}}},{label:"66kv",statu:{style:{body:{stroke:"gold"}}}},{label:"35kv",statu:{style:{body:{stroke:"yellow"}}}},{label:"20kv",statu:{style:{body:{stroke:"brown"}}}},{label:"15kv",statu:{style:{body:{stroke:"darkgreen"}}}},{label:"13kv",statu:{style:{body:{stroke:"lightgreen"}}}},{label:"10kv",statu:{style:{body:{stroke:"crimson"}}}},{label:"6kv",statu:{style:{body:{stroke:"rgb(0 0 139)"}}}},{label:"0kv",statu:{style:{body:{stroke:"grey"}}}},{label:"0W",statu:{style:{body:{stroke:"grey"}}}},{label:"0B",statu:{style:{body:{stroke:"white"}}}}]}]},!0),e.registerEdge("line-edge",{inherit:"super-edge",markup:[{tagName:"g",selector:F.qc,children:[{tagName:"path",selector:"fill",name:"线条"}]}],attrs:{fill:{connection:!0,strokeWidth:3,strokeDasharray:"0",strokeLinecap:"round",fill:"none",stroke:"#FFFF99"}},status:[{label:"流动状态",selected:"停止",status:[{label:"正向流动",statu:{style:{fill:{strokeDasharray:"10,5",style:{animation:"20s linear 0s infinite normal none running ant-line",animationDirection:"none"}}}}},{label:"反向流动",statu:{style:{fill:{strokeDasharray:"10,5",style:{animation:"20s linear 0s infinite reverse none running ant-line"}}}}},{label:"停止",statu:{style:{fill:{style:{animation:"none"}}}}}]}]},!0)}}var Qe=Ge;class Ke extends j.bP{constructor(e={}){super(e)}setPoint(e,t){console.log("superNode test",e,t);let a=se.A.setPoint(e,t);return a}getPAName(e,t){return se.A.getPAName(e,t)}propFormat(e){if(!e)return this.prop("formulas/format");this.prop("formulas/format",e,{silent:!0})}propCases(e){if(!e)return this.prop("formulas/cases");this.prop("formulas/cases",e,{silent:!0})}propAlarm(e){if(!e)return this.prop("formulas/alarms");this.prop("formulas/alarms",e,{silent:!0})}propTime(e){if(!e)return this.prop("formulas/time");this.prop("formulas/time",e,{silent:!0})}getPoints(){console.log("执行了");let e=[];e.push(...this.getFormulasPoints()),e.push(...this.getEventPoints());let t=[];return e.forEach((e=>{let a=t.find((t=>e.mpId==t.mpId&&e.attrId==t.attrId));a||t.push(e)})),t}getFormulasPoints(){let e=[];e.push(...this.getCasesPoints());let t=this.getFormatPoints();t&&e.push(t);let a=this.getAlarmPoints();return a&&e.push(...a),e}getAlarmPoints(){let e=this.prop("formulas/alarms"),t=[];return e?.alarms?.forEach((e=>{e.points&&t.push(...e.points)})),t}getCasesPoints(){let e=this.getProp("formulas"),t=[];return e?.cases?.forEach((e=>{e.points&&t.push(...e.points)})),t}getFormatPoints(){let e=this.getProp("formulas");return e?.format?.point}getEventPoints(){let e=this.getProp("events"),t=[];return e?.forEach((e=>{e.actions?.forEach((e=>{null!=e.point.attrId&&void 0!=e.point.attrId&&""!=e.point.attrId&&t.push(e.point)}))})),t}}var Je=Ke;class qe{init(e){e.registerNode("super-node",Je,!0)}}var Ze=qe;function Xe(){}var et=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"left-div"}},[t("div",{ref:"stencil",attrs:{id:"stencil"}}),t("div",{attrs:{id:"add_group"}},[t("el-button",{staticStyle:{height:"25px","line-height":"1px","font-size":"12px",width:"80%"},attrs:{type:"primary"},on:{click:e.selectImageFun}},[e._v(" 更多图形 ")])],1),t("select-image",{ref:"selectImage",attrs:{notShowCheck:!1,selectImageGroup:e.selectImageGroup}})],1)},tt=[],at=function(){var e=this,t=e._self._c;return e.visible?t("el-dialog",{attrs:{title:"图形管理",visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t}}},[t("el-row",{staticStyle:{height:"400px"}},[t("el-col",{attrs:{span:6}},[t("div",{attrs:{id:"select_group_div"}},e._l(e.imageGroupList,(function(a){return t("div",{key:a,staticClass:"group_item",class:{check_item:e.clickGroup===a},on:{click:function(t){e.clickGroup=a}}},[t("el-checkbox",{class:{"not-show-check":e.notShowCheck},attrs:{label:a},model:{value:e.selectImageGroup,callback:function(t){e.selectImageGroup=t},expression:"selectImageGroup"}}),t("div",{staticClass:"group_label"},[e._v(" "+e._s(a)+" ")])],1)})),0)]),t("el-col",{attrs:{span:18}},[t("div",{staticClass:"img_p_div",class:{"message-div":!e.nodeImgs?.length}},[e.nodeImgs?.length?e._e():t("div",[e._v("当前组内容非图片文件")]),e._l(e.nodeImgs,(function(a){return t("div",{key:a.name,staticClass:"img",class:{"select-iamge":e.selectIamge===a.url},on:{click:function(t){e.notShowCheck&&(e.selectIamge=a.url)}}},["use"===a.tagName?t("svg",{staticClass:"img_div"},[t("use",{attrs:{href:a.url,stroke:"red"}})]):t("el-image",{staticClass:"img_div",class:{"select-iamge":e.selectIamge===a.url},attrs:{src:a.url}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])]),t("label",{staticClass:"img-name"},[e._v(e._s(a.name))])],1)}))],2)])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveGroup}},[e._v("确 定")])],1)],1):e._e()},ot=[],st={name:"SelectImage",props:{notShowCheck:{default:!0}},data(){return{imageGroupList:U,imageList:B,visible:!1,clickGroup:"",nodeImgs:[],selectImageGroup:[],selectIamge:"",selectIamgeCallback:null,selectImageGroupCallback:null}},watch:{clickGroup(e){if(e){let t=this.imageList[e];this.notShowCheck&&(t=this.imageList[e].filter((e=>"use"!==e.tagName))),this.nodeImgs=t}else this.nodeImgs=[]}},methods:{saveGroup(){this.selectIamgeCallback?.(this.selectIamge),this.selectImageGroupCallback?.(this.selectImageGroup),this.visible=!1},open({imageCallback:e=(()=>{}),groupCallback:t=(()=>{}),selectImageGroup:a=[],selectImage:o}){if(o)for(let[s,i]of Object.entries(B))i.find((e=>e.url===o))&&(this.clickGroup=s,this.selectIamge=o);this.clickGroup||(this.clickGroup=U[0]),this.selectIamgeCallback=e,this.selectImageGroupCallback=t,this.selectImageGroup=a,this.visible=!0}}},it=st,rt=(0,_.A)(it,at,ot,!1,null,"32444697",null),lt=rt.exports,nt={name:"LeftPane",components:{SelectImage:lt},mixins:[Z.c],data(){return{nodeImgs:[],clickGroup:"",visible:!1,imageList:B,imageGroupList:U,selectImageGroup:[],shapeList:z}},inject:["svg"],watch:{clickGroup(e){this.nodeImgs=e?this.imageList[e]:[]}},mounted(){this.nodeEventHook.onGraphInitHook((()=>{this.init()}))},methods:{selectImageFun(){this.$refs.selectImage.open({groupCallback:e=>{this.selectImageGroup=e,q.changeAllStencilGroup(this.graph,e)},selectImageGroup:this.selectImageGroup})},saveGroup(){q.changeAllStencilGroup(this.graph,this.selectImageGroup),this.visible=!1},async init(){this.selectImageGroup=q.getSelectGroups();let e=await q.getStencils(this.graph,(e=>(this.showPopper=!1,e)),(e=>(e.prop(F.f1,e.prop("label")+"_"+(this.svg.graph.getCellCount()+1)),e)));this.$refs.stencil.appendChild(e.container)}}},Vt=nt,ct=(0,_.A)(Vt,et,tt,!1,null,"a8558514",null),ut=ct.exports,pt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-div"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},e._l(e.tabs,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"menu_body ele-scrollbar-mini"},e._l(e.nodeImgs,(function(a){return t("div",{key:a,staticClass:"img",on:{mousedown:function(t){return e.startDrag(t,a)}}},[t("el-image",{staticClass:"img_div",attrs:{src:a,fit:"contain"}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])],1)})),0)],1)},dt=[],ht=a(34639),gt={mixins:[Z.c],data(){return{selectTab:"header",tabs:[{value:"header",label:"顶部装饰"},{value:"black",label:"方块装饰"},{value:"black2",label:"方块装饰2"},{value:"fontb",label:"文本装饰"}]}},computed:{nodeImgs(){let e=[],t="webtopo/decorate/";if("header"===this.selectTab)for(let a=1;a<=10;a++)e.push(`${t}header/${a}.png`);else if("black"===this.selectTab)for(let a=1;a<=96;a++)e.push(`${t}black/${a}.png`);else if("fontb"===this.selectTab)for(let a=1;a<=23;a++)e.push(`${t}textb/${a}.png`);else if("black2"===this.selectTab)for(let a=1;a<=90;a++)e.push(`${t}black2/${a}.png`);return e}},mounted(){},methods:{startDrag(e,t){this.dnd=new ht.f({target:this.graph});const a=new Image;a.src=t,a.onload=()=>{let o=a.width,s=a.height,i=s/o;o=300,s=o*i;let r=this.graph.createNode({shape:"super-node",width:o,height:s,preserveAspectRatio:!0,[F.f1]:"图片_"+this.graph.getCellCount(),markup:[{tagName:"g",selector:F.eo,children:[{tagName:"g",selector:F.qc,children:[{name:"图片",tagName:"image",selector:"body",attrs:{preserveAspectRatio:"none",width:o,height:s}}]}]}],attrs:{body:{refWidth:1,refHeight:1,href:t}}});this.dnd.start(r,e)}}}},mt=gt,ft=(0,_.A)(mt,pt,dt,!1,null,"840a4c7e",null),bt=ft.exports,vt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"attr"}},[t("el-tabs",{ref:"tabs",staticClass:"user-info-tabs",attrs:{type:"card"},on:{"tab-click":e.initTree},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[null!=e.nodeAttr?t("el-tab-pane",{attrs:{label:"图元属性",name:"info",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图元属性",placement:"bottom"}},[t("i",{staticClass:"svg-edit-kuangxuan"})])],1),t("el-form",{ref:"form",staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{model:e.nodeAttr,"label-width":"90px",size:"mini","label-suffix":":"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{on:{change:e.changeNodeName},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1),e.isEdge?t("el-form-item",{attrs:{label:"路由"}},[t("el-select",{attrs:{placeholder:"选择路由",size:"mini"},on:{change:e.setRouter},model:{value:e.router,callback:function(t){e.router=t},expression:"router"}},[t("el-option",{attrs:{value:"normal",label:"默认路由"}},[t("div",[e._v("默认路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 原样返回路径点 ")])]),t("el-option",{attrs:{value:"orth",label:"正交路由"}},[t("div",[e._v("正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段组成 ")])]),t("el-option",{attrs:{value:"oneSide",label:"受限正交路由"}},[t("div",[e._v("受限正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由受限的三段水平或垂直的正交线段组成 ")])]),t("el-option",{attrs:{value:"manhattan",label:"智能正交路由"}},[t("div",[e._v("智能正交路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段组成，并自动避开路径上的其他节点（障碍） ")])]),t("el-option",{attrs:{value:"metro",label:"智能地铁线路由"}},[t("div",[e._v("智能地铁线路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由水平或垂直的正交线段和斜角线段组成，类似地铁轨道图，并自动避开路径上的其他节点（障碍） ")])]),t("el-option",{attrs:{value:"er",label:"实体关系路由"}},[t("div",[e._v("实体关系路由")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 由 Z 字形的斜角线段组成 ")])])],1)],1):e._e(),e.isEdge?t("el-form-item",{attrs:{label:"连接器"}},[t("el-select",{attrs:{placeholder:"选择连接器",size:"mini"},on:{change:e.setConnector},model:{value:e.connector,callback:function(t){e.connector=t},expression:"connector"}},[t("el-option",{attrs:{value:"normal",label:"简单"}},[t("div",[e._v("简单")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点。 ")])]),t("el-option",{attrs:{value:"smooth",label:"平滑"}},[t("div",[e._v("平滑")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用三次贝塞尔曲线线连接起点、路由点和终点。 ")])]),t("el-option",{attrs:{value:"rounded",label:"圆角"}},[t("div",[e._v("圆角")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点，并在线段连接处用圆弧链接（倒圆角）。 ")])]),t("el-option",{attrs:{value:"jumpover",label:"跳线"}},[t("div",[e._v("跳线")]),t("div",{staticStyle:{color:"#8492a685","font-size":"12px","line-height":"12px"}},[e._v(" 用直线连接起点、路由点和终点，并在边与边的交叉处用跳线符号链接。 ")])])],1)],1):e._e(),void 0!==e.nodeAttr?.position?.x?t("el-form-item",{attrs:{label:"x"}},[t("el-input-number",{attrs:{size:"mini",step:5},on:{change:function(t){return e.changeAttr("position")}},model:{value:e.nodeAttr.position.x,callback:function(t){e.$set(e.nodeAttr.position,"x",t)},expression:"nodeAttr.position.x"}})],1):e._e(),void 0!==e.nodeAttr?.position?.y?t("el-form-item",{attrs:{label:"y"}},[t("el-input-number",{attrs:{size:"mini",step:5},on:{change:function(t){return e.changeAttr("position")}},model:{value:e.nodeAttr.position.y,callback:function(t){e.$set(e.nodeAttr.position,"y",t)},expression:"nodeAttr.position.y"}})],1):e._e(),void 0==e.nodeAttr?.preserveAspectRatio||e.isEdge?e._e():t("el-form-item",{attrs:{label:"宽高比"}},[t("el-checkbox",{on:{change:function(t){return e.changeAttr("preserveAspectRatio")}},model:{value:e.nodeAttr.preserveAspectRatio,callback:function(t){e.$set(e.nodeAttr,"preserveAspectRatio",t)},expression:"nodeAttr.preserveAspectRatio"}})],1),void 0!==e.nodeAttr?.size?.width?t("el-form-item",{attrs:{label:"宽度"}},[t("el-input-number",{attrs:{size:"mini",step:5},on:{change:function(t){return e.changeAttr("size")}},model:{value:e.nodeAttr.size.width,callback:function(t){e.$set(e.nodeAttr.size,"width",t)},expression:"nodeAttr.size.width"}})],1):e._e(),void 0!==e.nodeAttr?.size?.height?t("el-form-item",{attrs:{label:"高度"}},[t("el-input-number",{attrs:{size:"mini",step:5},on:{change:function(t){return e.changeAttr("size")}},model:{value:e.nodeAttr.size.height,callback:function(t){e.$set(e.nodeAttr.size,"height",t)},expression:"nodeAttr.size.height"}})],1):e._e(),void 0!=e.nodeAttr?.angle?t("el-form-item",{attrs:{label:"旋转"}},[t("el-input-number",{attrs:{size:"mini",step:5,max:360,min:-360},on:{change:function(t){return e.changeAttr("angle")}},model:{value:e.nodeAttr.angle,callback:function(t){e.$set(e.nodeAttr,"angle",t)},expression:"nodeAttr.angle"}})],1):e._e(),void 0==e.nodeAttr?.rotate3d||e.NODE_TYPES.echarts===e.nodeType||e.isEdge?e._e():t("el-form-item",{attrs:{label:"3D旋转"}},[t("el-popover",{ref:"popover",attrs:{placement:"right",title:"3D旋转",width:"200",trigger:"click"},model:{value:e.rotateShow,callback:function(t){e.rotateShow=t},expression:"rotateShow"}},[e.rotateShow?t("el-form",{attrs:{"label-suffix":":",size:"mini","label-position":"top"}},[t("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"x轴"}},[t("el-slider",{attrs:{min:0,max:1,step:.01},on:{input:function(t){return e.changeAttr("rotate3d")}},model:{value:e.rotate3d.x,callback:function(t){e.$set(e.rotate3d,"x",t)},expression:"rotate3d.x"}})],1),t("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"y轴"}},[t("el-slider",{attrs:{min:0,max:1,step:.01},on:{input:function(t){return e.changeAttr("rotate3d")}},model:{value:e.rotate3d.y,callback:function(t){e.$set(e.rotate3d,"y",t)},expression:"rotate3d.y"}})],1),t("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"z轴"}},[t("el-slider",{attrs:{min:0,max:1,step:.01},on:{input:function(t){return e.changeAttr("rotate3d")}},model:{value:e.rotate3d.z,callback:function(t){e.$set(e.rotate3d,"z",t)},expression:"rotate3d.z"}})],1),t("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"旋转角度"}},[t("el-slider",{attrs:{min:0,max:360},on:{input:function(t){return e.changeAttr("rotate3d")}},model:{value:e.rotate3d.a,callback:function(t){e.$set(e.rotate3d,"a",t)},expression:"rotate3d.a"}})],1)],1):e._e()],1),t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.changeAttr("rotate3d")}},model:{value:e.nodeAttr.rotate3d,callback:function(t){e.$set(e.nodeAttr,"rotate3d",t)},expression:"nodeAttr.rotate3d"}},[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{slot:"append",size:"mini",icon:"el-icon-setting"},slot:"append"})],1)],1),e.textNode?.length?t("el-form-item",{staticStyle:{margin:"30px 0px"},attrs:{"label-width":"0px"}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("初始文本")])],1):e._e(),e._l(e.textNode,(function(a){return t("el-form-item",{key:a.selector,attrs:{label:a.name??a.selector}},[t("div",[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",size:"mini"},on:{change:function(t){return e.changeText(t,a)}},model:{value:e.attrs[a.selector].text,callback:function(t){e.$set(e.attrs[a.selector],"text",t)},expression:"attrs[item.selector].text"}}),t("el-checkbox",{attrs:{checked:e.textWrapCheck(a)},on:{change:function(t){return e.attrChange(t,a)}}},[e._v(" 自动换行 ")])],1)])})),e.nodeAttr?.status?.length?t("el-form-item",{staticStyle:{margin:"30px 0px"},attrs:{"label-width":"0px"}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("组件初始状态")])],1):e._e(),e._l(e.nodeAttr?.status,(function(a,o){return t("el-form-item",{key:o,attrs:{label:a.label}},[t("el-select",{attrs:{"value-key":"label",placeholder:"请选择",value:a.selected},on:{change:function(t){return e.statusChange(t,a)}}},e._l(a.status,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})})),1)],1)}))],2)],1):e._e(),null!=e.markup&&e.NODE_TYPES.echarts!==e.nodeType?t("el-tab-pane",{attrs:{label:"图元样式",name:"attr",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图元样式",placement:"bottom"}},[t("i",{staticClass:"svg-edit-shuxingshezhi"})])],1),t("el-collapse",{staticStyle:{"padding-left":"5px"},attrs:{accordion:""},model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},e._l(e.markup,(function(a,o){return t("el-collapse-item",{key:a.selector,attrs:{title:(a.name??a.selector)+" ["+a.tagName+"]",name:o}},[t("attr",{attrs:{attr:e.attrs[a.selector],markup:a,graph:e.graph,selectNode:e.selectNode()},on:{changeAttr:()=>{}}})],1)})),1)],1):e._e(),e.NODE_TYPES.echarts===e.nodeType?t("el-tab-pane",{attrs:{label:"图元样式",name:"chartAttr",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图元样式",placement:"bottom"}},[t("i",{staticClass:"svg-edit-shuxingshezhi"})])],1),t("charts-attr",{attrs:{selectNode:e.selectNode(),chartsAttr:e.chartsAttr},on:{changeTheme:e.changeTheme}})],1):e._e(),null!=e.markup?t("el-tab-pane",{attrs:{label:"数据",name:"data",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数据",placement:"bottom"}},[t("i",{staticClass:"svg-edit-shujuweihu"})])],1),e.NODE_TYPES.echarts!==e.nodeType?t("data-binding",{attrs:{markup:e.markup}}):t("chart-data-binding",{attrs:{chartsPoints:e.chartsPoints}})],1):e._e(),null!=e.markup&&e.NODE_TYPES.echarts!==e.nodeType?t("el-tab-pane",{attrs:{label:"事件",name:"event",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"事件",placement:"bottom"}},[t("i",{staticClass:"svg-edit-shijianpeizhi"})])],1),t("event-config")],1):e._e(),t("el-tab-pane",{attrs:{label:"画布属性",name:"account",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"画布属性",placement:"bottom"}},[t("i",{staticClass:"svg-edit-huanyuanhuabu"})])],1),t("el-form",{staticStyle:{"max-width":"450px",padding:"10px 5px 0 5px",height:"40%"},attrs:{"label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"背景色:",prop:"backgroundColor"}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:e.bgColorChange},model:{value:e.lGraphConfig.backgroundColor,callback:function(t){e.$set(e.lGraphConfig,"backgroundColor",t)},expression:"lGraphConfig.backgroundColor"}})],1),t("el-form-item",{attrs:{label:"背景图:",prop:"backgroundImg"}},[t("div",{staticClass:"img-div"},[t("el-image",{staticStyle:{width:"100px",height:"60px"},attrs:{src:e.lGraphConfig.backgroundImg,fit:"scale-down"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"59px",width:"100px",height:"60px",display:"flex","justify-content":"center"}})])]),t("div",{staticClass:"img-app-btn"},[t("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.selectBGImge()}}}),t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeBGImge()}}})])],1)]),t("el-form-item",{attrs:{label:"画布尺寸:",prop:"nickname"}},[t("el-select",{attrs:{placeholder:"请选择","value-key":"key"},model:{value:e.lGraphConfig.pageSize,callback:function(t){e.$set(e.lGraphConfig,"pageSize",t)},expression:"lGraphConfig.pageSize"}},[t("el-option",{attrs:{value:{key:"",width:0,height:0},label:"自定义"}}),e._l(e.pageSizeList,(function(a){return t("el-option",{key:a.key,attrs:{label:a.key,value:e.cloneDeep(a)}})}))],2)],1),t("el-form-item",{attrs:{label:"自定义尺寸:",prop:"nickname"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-input-number",{attrs:{"controls-position":"right",size:"mini",step:10},model:{value:e.lGraphConfig.pageSize.width,callback:function(t){e.$set(e.lGraphConfig.pageSize,"width",t)},expression:"lGraphConfig.pageSize.width"}})],1),t("el-col",{attrs:{span:24}},[t("el-input-number",{attrs:{"controls-position":"right",size:"mini",step:10},model:{value:e.lGraphConfig.pageSize.height,callback:function(t){e.$set(e.lGraphConfig.pageSize,"height",t)},expression:"lGraphConfig.pageSize.height"}})],1)],1)],1)],1),t("div",{staticStyle:{height:"45%",margin:"0 20px"}},[t("div",[e._v("快捷键")]),t("div",{staticClass:"ele-border-info ele-scrollbar-hide",staticStyle:{height:"90%",width:"100%"}},[t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 移动1像素")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" ←↑→↓")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 移动5像素")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v("Ctrl/meta + ←↑→↓")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 画布放大")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Alt/Option + 1")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 画布缩小")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Alt/Option + 2")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 画布拖拽")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Alt/Option")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 自由拖拽")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Space")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 剪切")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + x")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 复制")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + c")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 粘贴")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + v")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 撤销")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + z")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 重做")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + shift + z")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 全选")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Ctrl/Meta + a")])],1),t("el-row",{staticClass:"help-row"},[t("el-col",{attrs:{span:12}},[e._v(" 删除")]),t("el-col",{staticClass:"ele-text-right",attrs:{span:12}},[e._v(" Backspace/Delete")])],1)],1)])],1),t("el-tab-pane",{attrs:{label:"节点树",name:"tree",lazy:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"节点树",placement:"bottom"}},[t("i",{staticClass:"el-icon-aim"})])],1),e._l(e.nodeList,(function(a){return t("div",{key:a.id,staticClass:"tree-item",on:{mouseover:function(t){return t.preventDefault(),e.highlight(e.graph,a)},mouseleave:function(t){return t.preventDefault(),e.unhighlight(e.graph,a)}}},[t("div",[e._v(" "+e._s(a.name??"-")+" ")]),t("div",[t("el-button",{attrs:{type:a.visible?"primary":"",icon:"el-icon-view",size:"mini",circle:""},on:{click:function(t){return e.setShow(a)}}}),t("el-button",{attrs:{type:a.lock?"primary":"",icon:"el-icon-lock",size:"mini",circle:""},on:{click:function(t){return e.setLock(a)}}})],1)])}))],2)],1),t("select-b-g-image",{ref:"selectBGImageRef"})],1)},At=[],yt=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticStyle:{"max-width":"450px"},attrs:{"label-width":"90px","label-suffix":":"},nativeOn:{submit:function(e){e.preventDefault()}}},e._l(e.attrList,(function(a,o){return t("el-form-item",{key:o,attrs:{label:e.cnLabel(o).name}},[t("el-row",{attrs:{gutter:5}},[t("el-col",{attrs:{span:17}},[e.cnLabel(o).inputType==e.inputType.color?t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}})],1)],1):e.cnLabel(o).inputType==e.inputType.number?t("el-input-number",{attrs:{min:e.cnLabel(o).min,max:e.cnLabel(o).max,size:"mini",step:e.cnLabel(o).step??1},on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}}):e.cnLabel(o).inputType==e.inputType.string?t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}}):e.cnLabel(o).inputType==e.inputType.select?t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}},e._l(e.cnLabel(o).options,(function(e){return t("el-option",{key:e.value,style:e.style,attrs:{label:e.label,value:e.value}})})),1):e.cnLabel(o).inputType==e.inputType.checkbox?t("el-checkbox",{on:{change:function(t){return e.attrChange(o)}},model:{value:e.attrData[o],callback:function(t){e.$set(e.attrData,o,t)},expression:"attrData[key]"}}):e.cnLabel(o).inputType==e.inputType.image?t("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.attrData[o]},on:{click:function(t){return e.selectImge(e.attrData,o)}}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[t("el-button",{staticStyle:{padding:"3px"},attrs:{icon:"el-icon-minus",type:"danger",circle:""},on:{click:function(t){return e.removeAttr(o)}}})],1)],1)],1)})),1),t("div",{staticStyle:{"text-align":"center"}},[t("el-select",{attrs:{placeholder:"追加样式",value:"",filterable:""},on:{change:e.addAttrHandle,"visible-change":e.selectVChange}},e._l(e.showAttrList,(function(a){return t("el-option-group",{key:a.label,attrs:{label:a.label}},e._l(a.options,(function(a){return t("el-option",{key:a.attr,attrs:{label:a.name,value:a.attr,disabled:a.disabled}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.attr))])])})),1)})),1)],1),t("select-image",{ref:"selectImage",attrs:{notShowCheck:!0}})],1)},wt=[];const _t={color:"color",number:"number",string:"string",select:"select",checkbox:"checkbox",image:"image"},Nt=(_t.number,_t.number,_t.number,_t.number,_t.number,_t.number,_t.color,_t.color,_t.string,_t.string,_t.number,_t.select,_t.string,_t.select,_t.string,_t.number,_t.select,_t.select,_t.number,_t.number,_t.checkbox,[{label:"通用样式",options:[{attr:"visibility",name:"显示/隐藏",inputType:_t.select,defaultValue:"visible",options:[{label:"显示",value:"visible"},{label:"占位隐藏",value:"hidden"},{label:"隐藏",value:"collapse"},{label:"继承",value:"inherit"}]},{attr:"refWidth",name:"宽度占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"refHeight",name:"高度占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"width",name:"宽度",inputType:_t.number,defaultValue:10,min:0,step:5},{attr:"height",name:"高度",inputType:_t.number,defaultValue:10,min:0,step:5},{attr:"refX",name:"x轴占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"refY",name:"y轴占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"fill",name:"填充色",inputType:_t.color},{attr:"stroke",name:"边框色",inputType:_t.color},{attr:"strokeWidth",name:"边框宽度",inputType:_t.number,defaultValue:0,min:0,step:5},{attr:"xAlign",name:"横向对齐位置",inputType:_t.select,defaultValue:"left",options:[{label:"左边对齐",value:"left"},{label:"中间对齐",value:"middle"},{label:"右边对齐",value:"right"}]},{attr:"yAlign",name:"垂直对齐位置",inputType:_t.select,defaultValue:"left",options:[{label:"上边对齐",value:"top"},{label:"中间对齐",value:"middle"},{label:"底边对齐",value:"bottom"}]}]},{label:"多边形/折线样式",shape:["polygon","polyline"],options:[{attr:"refPoints",name:"路径",inputType:_t.string}]},{label:"图片样式",shape:["image"],options:[{attr:"href",name:"图片切换",inputType:_t.image},{attr:"strokeDasharray",name:"虚线间隔",defaultValue:"10,20",inputType:_t.string}]},{label:"管道/线路样式",shape:["path"],options:[{attr:"strokeLinecap",name:"顶端样式",inputType:_t.select,defaultValue:"round",options:[{label:"直角",value:"butt"},{label:"圆角",value:"round"},{label:"平行",value:"square"},{label:"默认",value:"initial"}]}]},{label:"文本样式",shape:["text"],options:[{attr:"text",name:"文本",inputType:_t.string},{attr:"fontSize",name:"字体大小",inputType:_t.number,defaultValue:14,min:0,max:100,step:1},{attr:"fontFamily",name:"字体",inputType:_t.select,options:[{label:"数字-1234567890-1",value:"数字-1234567890-1",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-2",value:"数字-1234567890-2",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-3",value:"数字-1234567890-3",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-4",value:"数字-1234567890-4",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-5",value:"数字-1234567890-5",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-6",value:"数字-1234567890-6",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-7",value:"数字-1234567890-7",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-8",value:"数字-1234567890-8",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-9",value:"数字-1234567890-9",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-10",value:"数字-1234567890-10",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-11",value:"数字-1234567890-11",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-12",value:"数字-1234567890-12",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-13",value:"数字-1234567890-13",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-14",value:"数字-1234567890-14",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-15",value:"数字-1234567890-15",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-16",value:"数字-1234567890-16",style:{"font-family":"数字-1234567890-1"}},{label:"数字-1234567890-17",value:"数字-1234567890-17",style:{"font-family":"数字-1234567890-1"}}]},{attr:"fontWeight",name:"文字加粗",inputType:_t.select,defaultValue:"normal",options:[{label:"正常",value:"normal"},{label:"加粗",value:"bold"}]},{attr:"fontStyle",name:"文字斜体",inputType:_t.select,defaultValue:"normal",options:[{label:"正常",value:"normal"},{label:"斜体",value:"italic"}]},{attr:"textPath",name:"沿路径文本",inputType:_t.inputType},{attr:"textAnchor",name:"文本原点",inputType:_t.select,defaultValue:"left",options:[{label:"左边",value:"left"},{label:"中间",value:"middle"},{label:"右边",value:"right"}]},{attr:"textWrap/refWidth",name:"内容宽度占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"textWrap/refHeight",name:"内容高度占比",inputType:_t.number,defaultValue:1,min:0,max:1,step:.1},{attr:"textWrap/ellipsis",name:"追加省略号",inputType:_t.checkbox}]}]);function xt(){let e={};for(let t of Nt)for(let a of t.options)e[a.attr]=a;return e}const Mt=function(e,t){let a={};for(let[o,s]of Object.entries(t)){let t=o;""!==e&&(t=`${e}/${t}`),(0,k.isObject)(s)?a=Object.assign(a,Mt(t,s)):""===e?a[`${o}`]=s:a[`${e}/${o}`]=s}return a},Tt=xt();var kt={name:"Attr",components:{SelectImage:lt},props:["attr","markup","graph","selectNode"],data(){return{attrData:Mt("",(0,k.cloneDeep)(this.attr)),markupData:(0,k.cloneDeep)(this.markup),inputType:_t,addAttr:"",selectIsShow:!1}},watch:{attr:{handler(e){let t=(0,k.cloneDeep)(e);this.attrData=Mt("",t)},deep:!0},markup:{handler(e){this.markupData=(0,k.cloneDeep)(e)},deep:!0}},computed:{attrList(){let e={};for(let[t,a]of Object.entries(this.attrData))Tt[t]&&(e[t]=a);return e},CnLabelGroup(){let e=(0,k.cloneDeep)(Nt),t=[];return e.forEach((e=>{e.shape&&0!=e.shape.length?e.shape.includes(this.markup.tagName)&&t.push(e):t.push(e)})),t},showAttrList(){if(!this.selectIsShow)return[];let e=(0,k.cloneDeep)(this.CnLabelGroup);for(let t of e)for(let e of t.options)void 0!=this.attrData[e.attr]?e.disabled=!0:e.disabled=!1;return e},addAttrOptions(){let e=[];for(let[t,a]of Object.entries(Tt))this.attrData[t]||e.push({label:a.name,value:t});return e}},methods:{selectImge(e,t){this.$refs.selectImage.open({imageCallback:a=>{a&&(e[t]=a,this.attrChange(t))},selectImage:e[t]})},cnLabel(e){return Tt[e]??{name:e}},attrChange(e){let t=this.attrData[e];this.selectNode.cell.attr(`${this.markupData.selector}/${e}`,t),this.$emit("changeAttr",`${this.markupData.selector}/${e}`,t)},addAttrHandle(e){let t=e,a=void 0==Tt[t]?.defaultValue?"":Tt[t].defaultValue;this.selectNode.cell.attr(`${this.markupData.selector}/${t}`,a),this.attrData=Mt("",(0,k.cloneDeep)(this.selectNode.cell.getAttrByPath(this.markupData.selector))),this.$emit("addAttr",`${this.markupData.selector}/${t}`,this.attrData[t])},removeAttr(e){this.$confirm("确认移除此样式?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.selectNode.cell.removeAttrByPath(`${this.markupData.selector}/${e}`),this.attrData=Mt("",(0,k.cloneDeep)(this.selectNode.cell.getAttrByPath(this.markupData.selector))),this.$emit("removeAttr",`${this.markupData.selector}/${e}`)})).catch((()=>{}))},selectVChange(e){this.selectIsShow=e}}},Dt=kt,Ct=(0,_.A)(Dt,yt,wt,!1,null,null,null),Et=Ct.exports,Ot=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"80px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"配置option"}},[t("el-button",{attrs:{icon:"el-icon-setting"},on:{click:function(t){e.visible=!0}}})],1),e.attrData?t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"背景",name:"background"}},[t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"90px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"背景色"}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("backgroundColor",e.attrData["backgroundColor"])}},model:{value:e.attrData["backgroundColor"],callback:function(t){e.$set(e.attrData,"backgroundColor",t)},expression:"attrData['backgroundColor']"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange("backgroundColor",e.attrData["backgroundColor"])}},model:{value:e.attrData["backgroundColor"],callback:function(t){e.$set(e.attrData,"backgroundColor",t)},expression:"attrData['backgroundColor']"}})],1)],1)],1),t("el-form-item",{attrs:{label:"皮肤"}},[t("el-select",{attrs:{"value-key":"value",placeholder:"请选择"},on:{change:function(t){return e.attrChange("theme",e.attrData.theme)}},model:{value:e.attrData.theme,callback:function(t){e.$set(e.attrData,"theme",t)},expression:"attrData.theme"}},e._l(e.themes,(function(e,a){return t("el-option",{key:a,staticStyle:{display:"flex","align-items":"center"},attrs:{label:e,value:a}})})),1)],1)],1)],1),t("el-collapse-item",{attrs:{title:"配色方案",name:"color"}},[t("charts-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData,attrName:"color"}})],1),t("el-collapse-item",{attrs:{title:"标题",name:"title"}},[t("charts-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData,attrName:"title"}})],1),t("el-collapse-item",{attrs:{title:"图例",name:"legend"}},[t("charts-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData,attrName:"legend"}})],1),t("el-collapse-item",{attrs:{title:"提示",name:"tooltip"}},[t("charts-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData,attrName:"tooltip"}})],1),"pie"!=e.attrData?.series?.type?t("el-collapse-item",{attrs:{title:"外间距",name:"grid"}},[t("charts-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData,attrName:"grid"}})],1):e._e(),t("line-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData}}),t("pie-attr-item",{attrs:{selectNode:e.selectNode,attrDataProp:e.attrData}})],1):e._e()],1),t("el-dialog",{attrs:{title:"图表配置",visible:e.visible,width:"100%",fullscreen:"",top:"0px",center:""},on:{"update:visible":function(t){e.visible=t}}},[e.visible?t("charts-option",{ref:"chartsOptionRef",attrs:{selectNode:e.selectNode}}):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},It=[],St=function(){var e=this,t=e._self._c;return t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"80px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},["background"===e.attrName?t("el-form-item",{attrs:{label:"背景色"}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/backgroundColor",e.attrData["backgroundColor"])}},model:{value:e.attrData["backgroundColor"],callback:function(t){e.$set(e.attrData,"backgroundColor",t)},expression:"attrData['backgroundColor']"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange("/backgroundColor",e.attrData["backgroundColor"])}},model:{value:e.attrData["backgroundColor"],callback:function(t){e.$set(e.attrData,"backgroundColor",t)},expression:"attrData['backgroundColor']"}})],1)],1)],1):e._e(),"background"===e.attrName&&void 0!=e.attrData.theme?t("el-form-item",{attrs:{label:"皮肤"}},[t("el-select",{attrs:{"value-key":"value",placeholder:"请选择"},on:{change:function(t){return e.attrChange("/theme",e.attrData.theme)}},model:{value:e.attrData.theme,callback:function(t){e.$set(e.attrData,"theme",t)},expression:"attrData.theme"}},e._l(e.themes,(function(e,a){return t("el-option",{key:a,staticStyle:{display:"flex","align-items":"center"},attrs:{label:e,value:a}})})),1)],1):e._e(),void 0!=e.attrData[e.attrName]&&"color"===e.attrName?t("el-form-item",{attrs:{label:"颜色方案"}},[t("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[t("div",[t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"60px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"方案"}},[t("el-select",{attrs:{"value-key":"value",placeholder:"请选择"},on:{change:function(t){return e.attrChange("/color/colorObj",e.attrData[e.attrName].colorObj)}},model:{value:e.attrData[e.attrName].colorObj,callback:function(t){e.$set(e.attrData[e.attrName],"colorObj",t)},expression:"attrData[attrName].colorObj"}},e._l(e.echartsColorPlan,(function(a){return t("el-option",{key:a.value,staticStyle:{display:"flex","align-items":"center"},attrs:{label:a.name,value:a}},[t("div",{staticStyle:{float:"left"}},e._l(a.colors,(function(e,a){return t("span",{key:a,style:{width:"10px",height:"10px",float:"left",backgroundColor:e}})})),0),t("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(a.name))])])})),1)],1),t("el-form-item",{attrs:{label:"自定义"}},[t("div",{staticStyle:{display:"flex"}},[e._l(e.attrData[e.attrName].colorObj.colors,(function(a,o){return t("el-color-picker",{key:o,attrs:{value:a},on:{change:function(t){return e.customColorChange(t,o)}}})})),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.resetColor}},[e._v(" 重置 ")])],2)])],1)],1),t("div",{attrs:{slot:"reference"},slot:"reference"},e._l(e.attrData[e.attrName].colorObj.colors,(function(e,a){return t("span",{key:a,staticClass:"color-block",style:{"background-color":e}})})),0)])],1):e._e(),void 0!=e.attrData[e.attrName]?.colorOpacity&&"color"===e.attrName?t("el-form-item",{attrs:{label:"不透明度"}},[t("el-slider",{attrs:{max:100,min:0,"input-size":"mini","show-input":""},on:{input:function(t){return e.attrChange("/color/colorOpacity",e.attrData[e.attrName].colorOpacity)}},model:{value:e.attrData[e.attrName].colorOpacity,callback:function(t){e.$set(e.attrData[e.attrName],"colorOpacity",t)},expression:"attrData[attrName].colorOpacity"}})],1):e._e(),void 0!=e.attrData[e.attrName]?.show?t("el-form-item",{attrs:{label:"显示"}},[t("el-checkbox",{on:{change:function(t){return e.attrChange("/show",e.attrData[e.attrName].show)}},model:{value:e.attrData[e.attrName].show,callback:function(t){e.$set(e.attrData[e.attrName],"show",t)},expression:"attrData[attrName].show"}},[e._v(" 显示 ")])],1):e._e(),e.attrData[e.attrName]?.show?t("div",[void 0!=e.attrData[e.attrName].text?t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{on:{change:function(t){return e.attrChange("/text",e.attrData[e.attrName].text)}},model:{value:e.attrData[e.attrName].text,callback:function(t){e.$set(e.attrData[e.attrName],"text",t)},expression:"attrData[attrName].text"}})],1):e._e(),void 0!=e.attrData[e.attrName]?.trigger?t("el-form-item",{attrs:{label:"触发方式"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange("/trigger",e.attrData[e.attrName].trigger)}},model:{value:e.attrData[e.attrName].trigger,callback:function(t){e.$set(e.attrData[e.attrName],"trigger",t)},expression:"attrData[attrName].trigger"}},[t("el-radio-button",{attrs:{label:"item"}},[e._v("数据项")]),t("el-radio-button",{attrs:{label:"axis"}},[e._v("坐标轴")])],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.textStyle?.fontSize?t("el-form-item",{attrs:{label:"字体大小"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.attrChange("/textStyle/fontSize",e.attrData[e.attrName].textStyle.fontSize)}},model:{value:e.attrData[e.attrName].textStyle.fontSize,callback:function(t){e.$set(e.attrData[e.attrName].textStyle,"fontSize",t)},expression:"attrData[attrName].textStyle.fontSize"}},e._l(e.fontSize,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),void 0!=e.attrData[e.attrName]?.textStyle?.color?t("el-form-item",{attrs:{label:"字体颜色"}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/textStyle/color",e.attrData[e.attrName].textStyle.color)}},model:{value:e.attrData[e.attrName].textStyle.color,callback:function(t){e.$set(e.attrData[e.attrName].textStyle,"color",t)},expression:"attrData[attrName].textStyle.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange("/textStyle/color",e.attrData[e.attrName].textStyle.color)}},model:{value:e.attrData[e.attrName].textStyle.color,callback:function(t){e.$set(e.attrData[e.attrName].textStyle,"color",t)},expression:"attrData[attrName].textStyle.color"}})],1)],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.textStyle?.fontStyle||void 0!=e.attrData[e.attrName]?.textStyle?.fontWeight?t("el-form-item",{attrs:{label:"字体风格"}},[void 0!=e.attrData[e.attrName]?.textStyle?.fontStyle?t("el-checkbox",{attrs:{"true-label":"italic","false-label":""},on:{change:function(t){return e.attrChange("/textStyle/fontStyle",e.attrData[e.attrName].textStyle.fontStyle)}},model:{value:e.attrData[e.attrName].textStyle.fontStyle,callback:function(t){e.$set(e.attrData[e.attrName].textStyle,"fontStyle",t)},expression:"attrData[attrName].textStyle.fontStyle"}},[e._v(" 倾斜 ")]):e._e(),void 0!=e.attrData[e.attrName]?.textStyle?.fontWeight?t("el-checkbox",{attrs:{label:"字体大小","true-label":"bold","false-label":""},on:{change:function(t){return e.attrChange("/textStyle/fontWeight",e.attrData[e.attrName].textStyle.fontWeight)}},model:{value:e.attrData[e.attrName].textStyle.fontWeight,callback:function(t){e.$set(e.attrData[e.attrName].textStyle,"fontWeight",t)},expression:"attrData[attrName].textStyle.fontWeight"}},[e._v(" 加粗 ")]):e._e()],1):e._e(),void 0!=e.attrData[e.attrName]?.type?t("el-form-item",{attrs:{label:"图例类型"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange("/type",e.attrData[e.attrName].type)}},model:{value:e.attrData[e.attrName].type,callback:function(t){e.$set(e.attrData[e.attrName],"type",t)},expression:"attrData[attrName].type"}},[t("el-radio-button",{attrs:{label:"plain"}},[e._v("普通图例")]),t("el-radio-button",{attrs:{label:"scroll"}},[e._v("滚动图例")])],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.icon?t("el-form-item",{attrs:{label:"图例形状"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.attrChange("/icon",e.attrData[e.attrName].icon)}},model:{value:e.attrData[e.attrName].icon,callback:function(t){e.$set(e.attrData[e.attrName],"icon",t)},expression:"attrData[attrName].icon"}},[t("el-option",{attrs:{label:"默认",value:""}}),t("el-option",{attrs:{label:"无",value:"none"}}),t("el-option",{attrs:{label:"圆形",value:"circle"}}),t("el-option",{attrs:{label:"矩形",value:"rect"}}),t("el-option",{attrs:{label:"圆角矩形",value:"roundRect"}}),t("el-option",{attrs:{label:"三角形",value:"triangle"}}),t("el-option",{attrs:{label:"菱形",value:"diamond"}}),t("el-option",{attrs:{label:"箭头",value:"arrow"}})],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.orient?t("el-form-item",{attrs:{label:"布局方向"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange("/orient",e.attrData[e.attrName].orient)}},model:{value:e.attrData[e.attrName].orient,callback:function(t){e.$set(e.attrData[e.attrName],"orient",t)},expression:"attrData[attrName].orient"}},[t("el-radio-button",{attrs:{label:"horizontal"}},[e._v("横向")]),t("el-radio-button",{attrs:{label:"vertical"}},[e._v("竖向")])],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.x?t("el-form-item",{attrs:{label:"水平位置"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange("/x",e.attrData[e.attrName].x)}},model:{value:e.attrData[e.attrName].x,callback:function(t){e.$set(e.attrData[e.attrName],"x",t)},expression:"attrData[attrName].x"}},[t("el-radio-button",{attrs:{label:"left"}},[e._v("左")]),t("el-radio-button",{attrs:{label:"center"}},[e._v("中")]),t("el-radio-button",{attrs:{label:"right"}},[e._v("右")])],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.y?t("el-form-item",{attrs:{label:"垂直位置"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange("/y",e.attrData[e.attrName].y)}},model:{value:e.attrData[e.attrName].y,callback:function(t){e.$set(e.attrData[e.attrName],"y",t)},expression:"attrData[attrName].y"}},[t("el-radio-button",{attrs:{label:"top"}},[e._v("上")]),t("el-radio-button",{attrs:{label:"center"}},[e._v("中")]),t("el-radio-button",{attrs:{label:"bottom"}},[e._v("下")])],1)],1):e._e(),void 0!=e.attrData[e.attrName]?.padding?t("el-form-item",{attrs:{label:"内边距"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},on:{change:function(t){return e.attrChange("/padding",e.attrData[e.attrName].padding)}},model:{value:e.attrData[e.attrName].padding,callback:function(t){e.$set(e.attrData[e.attrName],"padding",t)},expression:"attrData[attrName].padding"}})],1)],1)],1):e._e()],1):e._e(),void 0!=e.attrData[e.attrName]?.top?t("el-form-item",{attrs:{label:"上"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("/top/value",e.attrData[e.attrName].top.value)}},model:{value:e.attrData[e.attrName].top.value,callback:function(t){e.$set(e.attrData[e.attrName].top,"value",t)},expression:"attrData[attrName].top.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/top/unit",e.attrData[e.attrName].top.unit)}},model:{value:e.attrData[e.attrName].top.unit,callback:function(t){e.$set(e.attrData[e.attrName].top,"unit",t)},expression:"attrData[attrName].top.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e(),void 0!=e.attrData[e.attrName]?.bottom?t("el-form-item",{attrs:{label:"下"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("/bottom/value",e.attrData[e.attrName].bottom.value)}},model:{value:e.attrData[e.attrName].bottom.value,callback:function(t){e.$set(e.attrData[e.attrName].bottom,"value",t)},expression:"attrData[attrName].bottom.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/bottom/unit",e.attrData[e.attrName].bottom.unit)}},model:{value:e.attrData[e.attrName].bottom.unit,callback:function(t){e.$set(e.attrData[e.attrName].bottom,"unit",t)},expression:"attrData[attrName].bottom.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e(),void 0!=e.attrData[e.attrName]?.left?t("el-form-item",{attrs:{label:"左"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("/left/value",e.attrData[e.attrName].left.value)}},model:{value:e.attrData[e.attrName].left.value,callback:function(t){e.$set(e.attrData[e.attrName].left,"value",t)},expression:"attrData[attrName].left.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/left/unit",e.attrData[e.attrName].left.unit)}},model:{value:e.attrData[e.attrName].left.unit,callback:function(t){e.$set(e.attrData[e.attrName].left,"unit",t)},expression:"attrData[attrName].left.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e(),void 0!=e.attrData[e.attrName]?.right?t("el-form-item",{attrs:{label:"右"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("/right/value",e.attrData[e.attrName].right.value)}},model:{value:e.attrData[e.attrName].right.value,callback:function(t){e.$set(e.attrData[e.attrName].right,"value",t)},expression:"attrData[attrName].right.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("/right/unit",e.attrData[e.attrName].right.unit)}},model:{value:e.attrData[e.attrName].right.unit,callback:function(t){e.$set(e.attrData[e.attrName].right,"unit",t)},expression:"attrData[attrName].right.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e()],1)},Pt=[],jt=a(40441),zt={name:"ChartsAttrItem",props:["selectNode","attrDataProp","attrName"],data(){return{echartsColorPlan:(0,k.cloneDeep)(jt.l),attrData:(0,k.cloneDeep)(this.attrDataProp)}},watch:{attrDataProp:{handler(e){this.attrData=(0,k.cloneDeep)(e)},deep:!0}},computed:{fontSize(){let e=[];for(let t=10;t<=60;t+=2)e.push(t);return e}},methods:{attrChange(e,t){"color"===this.attrName||"background"===this.attrName?this.selectNode.cell.prop("charts"+e,t):this.selectNode.cell.prop("charts/"+this.attrName+e,t)},customColorChange(e,t){this.$set(this.attrData[this.attrName].colorObj.colors,t,e),this.attrChange("/color/colorObj/colors",this.attrData[this.attrName].colorObj.colors)},resetColor(){let e=this.attrData[this.attrName].colorObj,t=jt.l.find((t=>t.value===e.value));t&&(e.colors=(0,k.cloneDeep)(t.colors),this.attrChange("/color/colorObj/colors",e.colors))}}},Lt=zt,Ft=(0,_.A)(Lt,St,Pt,!1,null,"5ec923ba",null),Rt=Ft.exports,Bt=function(){var e=this,t=e._self._c;return"line"===e.attrData?.series?.type||"bar"===e.attrData?.series?.type?t("div",e._l(e.attrNames,(function(a){return t("el-collapse-item",{key:a.attr,attrs:{title:a.name,name:a.attr}},[t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"90px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[void 0!=e.attrData[a.attr]?.show?t("el-form-item",{attrs:{label:"显示"}},[t("el-checkbox",{on:{change:function(t){return e.attrChange(a.attr+"/show",e.attrData[a.attr].show)}},model:{value:e.attrData[a.attr].show,callback:function(t){e.$set(e.attrData[a.attr],"show",t)},expression:"attrData[attr.attr].show"}},[e._v(" 显示 ")])],1):e._e(),e.attrData[a.attr]?.show&&void 0!=e.attrData[a.attr]?.position?t("el-form-item",{attrs:{label:"位置"}},[t("el-radio-group",{on:{change:function(t){return e.attrChange(a.attr+"/position",e.attrData[a.attr].position)}},model:{value:e.attrData[a.attr].position,callback:function(t){e.$set(e.attrData[a.attr],"position",t)},expression:"attrData[attr.attr].position"}},[t("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:"xAxis"===a.attr,expression:"attr.attr === 'xAxis'"}],attrs:{label:"top"}},[e._v("上")]),t("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:"xAxis"===a.attr,expression:"attr.attr === 'xAxis'"}],attrs:{label:"bottom"}},[e._v("下")]),t("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:"yAxis"===a.attr,expression:"attr.attr === 'yAxis'"}],attrs:{label:"left"}},[e._v("左")]),t("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:"yAxis"===a.attr,expression:"attr.attr === 'yAxis'"}],attrs:{label:"right"}},[e._v("右")])],1)],1):e._e(),void 0!=e.attrData[a.attr]?.axisTick?.show?t("el-form-item",{attrs:{label:"显示刻度"}},[t("el-checkbox",{on:{change:function(t){return e.attrChange(a.attr+"/axisTick/show",e.attrData[a.attr].axisTick.show)}},model:{value:e.attrData[a.attr].axisTick.show,callback:function(t){e.$set(e.attrData[a.attr].axisTick,"show",t)},expression:"attrData[attr.attr].axisTick.show"}},[e._v(" 显示 ")])],1):e._e(),t("el-divider"),void 0!=e.attrData[a.attr]?.splitLine?.show?t("el-form-item",{attrs:{label:"显示网格"}},[t("el-checkbox",{on:{change:function(t){return e.attrChange(a.attr+"/splitLine/show",e.attrData[a.attr].splitLine.show)}},model:{value:e.attrData[a.attr].splitLine.show,callback:function(t){e.$set(e.attrData[a.attr].splitLine,"show",t)},expression:"attrData[attr.attr].splitLine.show"}},[e._v(" 显示 ")])],1):e._e(),e.attrData[a.attr]?.splitLine?.show&&void 0!=e.attrData[a.attr]?.splitLine?.lineStyle?.type?t("el-form-item",{attrs:{label:"网格类型"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.attrChange(a.attr+"/splitLine/lineStyle/type",e.attrData[a.attr].splitLine.lineStyle.type)}},model:{value:e.attrData[a.attr].splitLine.lineStyle.type,callback:function(t){e.$set(e.attrData[a.attr].splitLine.lineStyle,"type",t)},expression:"attrData[attr.attr].splitLine.lineStyle.type"}},[t("el-option",{attrs:{label:"直线",value:"solid"}}),t("el-option",{attrs:{label:"虚线",value:"dashed"}}),t("el-option",{attrs:{label:"点线",value:"dotted"}})],1)],1):e._e(),e.attrData[a.attr]?.splitLine?.show&&void 0!=e.attrData[a.attr]?.splitLine?.lineStyle?.width?t("el-form-item",{attrs:{label:"网格宽度"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},on:{change:function(t){return e.attrChange(a.attr+"/splitLine/lineStyle/width",e.attrData[a.attr].splitLine.lineStyle.width)}},model:{value:e.attrData[a.attr].splitLine.lineStyle.width,callback:function(t){e.$set(e.attrData[a.attr].splitLine.lineStyle,"width",t)},expression:"attrData[attr.attr].splitLine.lineStyle.width"}})],1):e._e(),e.attrData[a.attr]?.splitLine?.show&&void 0!=e.attrData[a.attr]?.splitLine?.lineStyle?.color?t("el-form-item",{attrs:{label:"网格颜色"}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange(a.attr+"/splitLine/lineStyle/color",e.attrData[a.attr].splitLine.lineStyle.color)}},model:{value:e.attrData[a.attr].splitLine.lineStyle.color,callback:function(t){e.$set(e.attrData[a.attr].splitLine.lineStyle,"color",t)},expression:"attrData[attr.attr].splitLine.lineStyle.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange(a.attr+"/splitLine/lineStyle/color",e.attrData[a.attr].splitLine.lineStyle.color)}},model:{value:e.attrData[a.attr].splitLine.lineStyle.color,callback:function(t){e.$set(e.attrData[a.attr].splitLine.lineStyle,"color",t)},expression:"attrData[attr.attr].splitLine.lineStyle.color"}})],1)],1)],1):e._e(),t("el-divider"),void 0!=e.attrData[a.attr]?.axisLabel?.show?t("el-form-item",{attrs:{label:"显示标签"}},[t("el-checkbox",{on:{change:function(t){return e.attrChange(a.attr+"/axisLabel/show",e.attrData[a.attr].axisLabel.show)}},model:{value:e.attrData[a.attr].axisLabel.show,callback:function(t){e.$set(e.attrData[a.attr].axisLabel,"show",t)},expression:"attrData[attr.attr].axisLabel.show"}},[e._v(" 显示 ")])],1):e._e(),e.attrData[a.attr]?.axisLabel?.show&&void 0!=e.attrData[a.attr]?.axisLabel?.rotate?t("el-form-item",{attrs:{label:"标签角度"}},[t("el-slider",{attrs:{max:90,min:-90,"input-size":"mini","show-input":""},on:{input:function(t){return e.attrChange(a.attr+"/axisLabel/rotate",e.attrData[a.attr].axisLabel.rotate)}},model:{value:e.attrData[a.attr].axisLabel.rotate,callback:function(t){e.$set(e.attrData[a.attr].axisLabel,"rotate",t)},expression:"attrData[attr.attr].axisLabel.rotate"}})],1):e._e(),e.attrData[a.attr]?.axisLabel?.show&&void 0!=e.attrData[a.attr]?.axisLabel?.fontSize?t("el-form-item",{attrs:{label:"字体大小"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.attrChange(a.attr+"/axisLabel/fontSize",e.attrData[a.attr].axisLabel.fontSize)}},model:{value:e.attrData[a.attr].axisLabel.fontSize,callback:function(t){e.$set(e.attrData[a.attr].axisLabel,"fontSize",t)},expression:"attrData[attr.attr].axisLabel.fontSize"}},e._l(e.fontSize,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),e.attrData[a.attr]?.axisLabel?.show&&void 0!=e.attrData[a.attr]?.axisLabel?.color?t("el-form-item",{attrs:{label:"标签颜色"}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange(a.attr+"/axisLabel/color",e.attrData[a.attr].axisLabel.color)}},model:{value:e.attrData[a.attr].axisLabel.color,callback:function(t){e.$set(e.attrData[a.attr].axisLabel,"color",t)},expression:"attrData[attr.attr].axisLabel.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{attrs:{"show-alpha":""},on:{change:function(t){return e.attrChange(a.attr+"/axisLabel/color",e.attrData[a.attr].axisLabel.color)}},model:{value:e.attrData[a.attr].axisLabel.color,callback:function(t){e.$set(e.attrData[a.attr].axisLabel,"color",t)},expression:"attrData[attr.attr].axisLabel.color"}})],1)],1)],1):e._e()],1)],1)})),1):e._e()},Ut=[],Ht={name:"LineAttrItem",props:["selectNode","attrDataProp"],data(){return{attrNames:[{name:"横轴",attr:"xAxis"},{name:"纵轴",attr:"yAxis"}],attrData:(0,k.cloneDeep)(this.attrDataProp)}},computed:{fontSize(){let e=[];for(let t=10;t<=60;t+=2)e.push(t);return e}},watch:{attrDataProp:{handler(e){this.attrData=(0,k.cloneDeep)(e)},deep:!0}},methods:{attrChange(e,t){this.selectNode.cell.prop("charts/"+e,t)}}},$t=Ht,Yt=(0,_.A)($t,Bt,Ut,!1,null,"6bc6b7a4",null),Wt=Yt.exports,Gt=function(){var e=this,t=e._self._c;return"pie"===e.attrData?.series?.type?t("div",[t("el-collapse-item",{attrs:{title:"大小",name:"size"}},[t("el-form",{staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"90px","label-suffix":":",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[void 0!=e.attrData?.series?.radius?.inner?t("el-form-item",{attrs:{label:"内径"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("series/radius/inner/value",e.attrData.series.radius.inner.value)}},model:{value:e.attrData.series.radius.inner.value,callback:function(t){e.$set(e.attrData.series.radius.inner,"value",t)},expression:"attrData.series.radius.inner.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("series/radius/inner/unit",e.attrData.series.radius.inner.unit)}},model:{value:e.attrData.series.radius.inner.unit,callback:function(t){e.$set(e.attrData.series.radius.inner,"unit",t)},expression:"attrData.series.radius.inner.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e(),void 0!=e.attrData?.series?.radius?.outside?t("el-form-item",{attrs:{label:"外径"}},[t("el-input",{staticClass:"number-input",attrs:{type:"number"},on:{change:function(t){return e.attrChange("series/radius/outside/value",e.attrData.series.radius.outside.value)}},model:{value:e.attrData.series.radius.outside.value,callback:function(t){e.$set(e.attrData.series.radius.outside,"value",t)},expression:"attrData.series.radius.outside.value"}},[t("template",{slot:"prepend"},[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.attrChange("series/radius/outside/unit",e.attrData.series.radius.outside.unit)}},model:{value:e.attrData.series.radius.outside.unit,callback:function(t){e.$set(e.attrData.series.radius.outside,"unit",t)},expression:"attrData.series.radius.outside.unit"}},[t("el-option",{attrs:{label:"绝对",value:""}}),t("el-option",{attrs:{label:"相对",value:"%"}})],1)],1)],2)],1):e._e()],1)],1)],1):e._e()},Qt=[],Kt={name:"PieAttrItem",props:["selectNode","attrDataProp"],data(){return{attrData:(0,k.cloneDeep)(this.attrDataProp)}},watch:{attrDataProp:{handler(e){this.attrData=(0,k.cloneDeep)(e)},deep:!0}},methods:{attrChange(e,t){this.selectNode.cell.prop("charts/"+e,t)}}},Jt=Kt,qt=(0,_.A)(Jt,Gt,Qt,!1,null,"65c0af89",null),Zt=qt.exports,Xt=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:12}},[t("label",[e._v("初始化脚本")]),t("div",{ref:"editorInitJs",staticClass:"tab-editor"})]),t("el-col",{attrs:{span:12}},[t("label",[e._v("数据加载脚本")]),t("div",{ref:"editorLoadDataJs",staticClass:"tab-editor"})])],1)},ea=[];const ta={};function aa(e,t){const a=document.getElementById(e),o=t||(()=>{});if(!a){ta[e]=[];const t=document.createElement("script");t.src=e,t.id=e,t.async=1,document.body.appendChild(t);const a="onload"in t?s.bind(t):i.bind(t);a(t)}function s(t){t.onload=()=>{this.onerror=this.onload=null,ta[e].forEach((e=>{e(null,t)})),delete ta[e]},t.onerror=()=>{this.onerror=this.onload=null,o(new Error(`Failed to load ${e}`),t)}}function i(t){t.onreadystatechange=()=>{"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=null,ta[e].forEach((e=>{e(null,t)})),delete ta[e])}}ta[e].push(o)}var oa=aa;const sa="https://lib.baomitu.com/",ia="";function ra(e,t,a){return`${sa}${e}/${t}/${a}`}var la={beautifierUrl:ra("js-beautify","1.13.5","beautifier.min.js"),monacoEditorUrl:`${ia}libs/monaco-editor/vs`,tinymceUrl:ra("tinymce","5.7.0","tinymce.min.js")};let na;function Va(e){if(na)return void e(na);const{monacoEditorUrl:t}=la;!window.require&&(window.require={}),!window.require.paths&&(window.require.paths={}),window.require.paths.vs=t,oa(`${t}/loader.js`,(()=>{window.require(["vs/editor/editor.main"],(()=>{na=window.monaco,e(na)}))}))}var ca=a(34696),ua=a.n(ca),pa=a(66157),da=a.n(pa);const ha={html:"html",js:"javascript",css:"css"};let ga;var ma={name:"ChartsOption",props:["selectNode"],data(){return{option:null,editorObj:{}}},mounted(){const e=this.$loading({fullscreen:!0,lock:!0,text:"编辑器资源初始化中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)"});try{this.option=this.selectNode.cell.prop("charts"),Va((e=>{ga=e;let t=this.option??"";t="let option = "+JSON.stringify(t),t=ua().format(t,{parser:"babel",plugins:[da()],printWidth:80,tabWidth:2}),this.setEditorValue("editorInitJs","js",t),this.setEditorValue("editorLoadDataJs","js","")}))}catch(t){console.error(t)}finally{e.close()}},methods:{setEditorValue(e,t,a){this.editorObj[e]?this.editorObj[e].setValue(a):(this.editorObj[e]=ga.editor.create(this.$refs[e],{value:a,theme:"vs-dark",language:ha[t],formatOnPaste:!0,automaticLayout:!0,fontSize:16}),this.editorObj[e].getAction(["editor.action.formatDocument"])._run())},getEditorInitJs(){return this.editorObj["editorInitJs"].getValue()},getEditorLoadDataJs(){return this.editorObj["editorLoadDataJs"].getValue()}}},fa=ma,ba=(0,_.A)(fa,Xt,ea,!1,null,"3f0b0517",null),va=ba.exports;let Aa=new Y.S;var ya={name:"ChartsAttr",components:{ChartsAttrItem:Rt,LineAttrItem:Wt,PieAttrItem:Zt,ChartsOption:va},props:["selectNode","chartsAttr"],data(){return{visible:!1,activeNames:"background",attrData:(0,k.cloneDeep)(this.chartsAttr)}},computed:{fontSize(){let e=[];for(let t=10;t<=60;t+=2)e.push(t);return e},themes(){return Aa.getThemeSelect()}},watch:{chartsAttr:{handler(e){this.attrData=(0,k.cloneDeep)(e)},deep:!0}},mounted(){},methods:{save(){try{this.visible=!1}catch(e){console.error(e),this.$message.error("脚本代码不正确")}},attrChange(e,t){this.selectNode.cell.prop("charts/"+e,t),"theme"===e&&this.$emit("changeTheme")}}},wa=ya,_a=(0,_.A)(wa,Ot,It,!1,null,"3553ac13",null),Na=_a.exports,xa=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticStyle:{"max-width":"450px"},attrs:{"label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.forMulasTypes.length?t("el-form-item",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{"label-width":"0px"}},e._l(e.forMulasTypes,(function(a,o){return t("el-radio",{key:o,attrs:{label:a.value},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v(e._s(a.name))])})),1):e._e(),e.type==e.FORMULAS.data.value?t("div",[t("el-form-item",{attrs:{label:"写入位置:"}},[t("el-select",{attrs:{size:"mini"},on:{change:e.changeFormat},model:{value:e.format.selector,callback:function(t){e.$set(e.format,"selector",t)},expression:"format.selector"}},e._l(e.textNode,(function(e){return t("el-option",{key:e.selector,attrs:{label:e.name??e.selector,value:e.selector}})})),1)],1),t("el-form-item",{attrs:{label:"数据点:"}},[t("el-input",{attrs:{size:"mini",value:e.getName(e.format.point),clearable:"",title:e.getName(e.format.point)},on:{clear:e.clearPoint}},[t("template",{slot:"append"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.selectPoint.open()}}},[e._v("选择点位")])],1)],2)],1),t("el-form-item",{attrs:{label:"小数位:"}},[t("el-input-number",{attrs:{disabled:!e.format.point.mpKey,size:"mini",min:0,max:6,step:1},on:{change:e.changeFormat},model:{value:e.format.decimalNum,callback:function(t){e.$set(e.format,"decimalNum",t)},expression:"format.decimalNum"}})],1),t("el-form-item",{attrs:{label:"倍数:"}},[t("el-input-number",{attrs:{disabled:!e.format.point.mpKey,size:"mini",step:1},on:{change:e.changeFormat},model:{value:e.format.multiplier,callback:function(t){e.$set(e.format,"multiplier",t)},expression:"format.multiplier"}})],1),t("el-form-item",{attrs:{label:"单位:"}},[t("el-input",{attrs:{size:"mini",disabled:!e.format.point.mpKey},on:{change:e.changeFormat},model:{value:e.format.unit,callback:function(t){e.$set(e.format,"unit",t)},expression:"format.unit"}})],1)],1):e._e(),e.type==e.FORMULAS.time.value?t("div",[t("el-form-item",{attrs:{label:"写入位置:"}},[t("el-select",{attrs:{size:"mini"},on:{change:e.changeFormat},model:{value:e.timeFormat.selector,callback:function(t){e.$set(e.timeFormat,"selector",t)},expression:"timeFormat.selector"}},e._l(e.textNode,(function(e){return t("el-option",{key:e.selector,attrs:{label:e.name??e.selector,value:e.selector}})})),1)],1),t("el-form-item",{attrs:{label:"时间格式:"}},[t("el-select",{attrs:{size:"mini",clearable:""},on:{change:e.changeTimeFormat},model:{value:e.timeFormat.format,callback:function(t){e.$set(e.timeFormat,"format",t)},expression:"timeFormat.format"}},e._l(e.times,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),e.type==e.FORMULAS.complex.value?t("el-form-item",{attrs:{"label-width":"0px"}},[e._l(e.cases,(function(a,o){return t("complex-config",{key:a.ifstr,attrs:{case:a},on:{save:e.saveCase,remove:function(t){return e.removeComplexConfig(o)}}})})),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:e.addCase}})],1)],2):e._e()],1),t("el-dialog",{attrs:{title:"配置公式",visible:e.centerDialogVisible,width:"100%",fullscreen:"",top:"0px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?t("complex-config-item",{ref:"complexConfigItemRef",attrs:{case:e.caseData}}):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),t("select-point",{ref:"selectPoint",attrs:{variables:[e.VARIABLES.readble.code,e.VARIABLES.readbleAndWriteable.code]},on:{select:e.savePoint}})],1)},Ma=[],Ta=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"12px 2.5px 0px"}},[t("el-card",{staticClass:"event-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"header-div"},[t("div",{staticClass:"header-div-left"},[e._v(" 动态 ")]),t("div",{staticClass:"header-div-right"},[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:e.config}}),t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:e.remove}})],1)]),t("div",{staticClass:"body-div"},[e._v(" 如果： "),t("div",[t("el-input",{attrs:{size:"mini",value:e.ifstr,placeholder:"无"}})],1)]),t("div",{staticClass:"body-div"},[e._v(" 则： "),e._l(e.caseData.touchOff.type,(function(a){return t("el-input",{key:a,staticStyle:{"margin-bottom":"3px"},attrs:{size:"mini",value:e.TOUCH_OFFS[a]?.name}})}))],2)]),t("el-dialog",{attrs:{title:"配置公式",visible:e.centerDialogVisible,width:"100%",fullscreen:"",top:"0px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?t("complex-config-item",{ref:"complexConfigItemRef",attrs:{case:e.caseData}}):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},ka=[],Da=function(){var e=this,t=e._self._c;return t("div",[t("el-row",{staticStyle:{height:"calc(100vh - 110px - 60px)"},attrs:{type:"flex",gutter:20}},[t("el-col",{staticStyle:{height:"100%"},attrs:{span:8}},[t("el-card",{staticClass:"box-card"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("complex-editor",{ref:"complexEditorRef",staticStyle:{"user-select":"text"},attrs:{points:e.ifObj.points,ifstr:e.ifObj.ifstr}})],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("el-row",{staticStyle:{"margin-bottom":"26px"}},[t("el-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:24}},[t("el-radio-group",{model:{value:e.touchOffType,callback:function(t){e.touchOffType=t},expression:"touchOffType"}},e._l(e.touchOffs,(function(a,o){return t("el-radio-button",{key:o,attrs:{label:a.value}},[e._v(e._s(a.name))])})),1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.touchOffType==e.TOUCH_OFFS.style.value,expression:"touchOffType == TOUCH_OFFS.style.value"}]},[t("el-row",[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:24}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.style.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.style.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.style.value,t)}}},[e._v(" 启用 ")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：公式需返回布尔类型，可添加、移除、修改样式 ")])],1),t("el-col",{attrs:{span:24}},[t("el-collapse",{model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},e._l(e.markup,(function(a,o){return t("el-collapse-item",{key:a.selector,attrs:{title:(a.name??a.selector)+" ["+a.tagName+"]",name:o}},[t("attr",{attrs:{attr:e.attrs[a.selector],markup:a,graph:e.previewGraph,selectNode:{cell:e.styleNode}},on:{addAttr:function(t){return e.addAttr(arguments)},removeAttr:e.removeAttr,changeAttr:function(t){return e.changeAttr(arguments)}}})],1)})),1)],1)],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.touchOffType==e.TOUCH_OFFS.status.value,expression:"touchOffType == TOUCH_OFFS.status.value"}]},[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:24}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.status.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.status.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.status.value,t)}}},[e._v("启用")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：公式需返回布尔类型 ")])],1),t("el-col",{attrs:{span:24}},e._l(e.status,(function(a,o){return t("el-row",{key:o,staticStyle:{"margin-bottom":"10px"}},[t("el-col",{attrs:{span:7}},[e._v(e._s(a.label)+"：")]),t("el-col",{attrs:{span:17}},[t("el-select",{attrs:{"value-key":"label",clearable:"",placeholder:"请选择"},model:{value:e.ifObj.touchOff.status[a.label],callback:function(t){e.$set(e.ifObj.touchOff.status,a.label,t)},expression:"ifObj.touchOff.status[statu.label]"}},e._l(a.status,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e}})})),1)],1)],1)})),1)],1),e.touchOffType==e.TOUCH_OFFS.progress.value?t("el-row",[t("el-col",[t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.progress.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.progress.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.progress.value,t)}}},[e._v("启用")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：公式需返回数值，数值范围0-1 ")])],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("进度组件：")]),t("el-col",{attrs:{span:17}},[t("el-select",{attrs:{size:"mini",multiple:""},model:{value:e.ifObj.touchOff.progress.selector,callback:function(t){e.$set(e.ifObj.touchOff.progress,"selector",t)},expression:"ifObj.touchOff.progress.selector"}},[t("el-option",{attrs:{label:"整体",value:e.SUPER_G_NAME}}),e._l(e.markup,(function(e){return t("el-option",{key:e.selector,attrs:{label:e.name??e.selector,value:e.selector}})}))],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:7}},[e._v("方向：")]),t("el-col",{attrs:{span:12}},[t("el-row",{staticStyle:{"text-align":"center"}},[t("el-col",{attrs:{span:24}},[t("el-checkbox-button",{staticClass:"direction-checkbox",model:{value:e.ifObj.touchOff.progress.config.top,callback:function(t){e.$set(e.ifObj.touchOff.progress.config,"top",t)},expression:"ifObj.touchOff.progress.config.top"}},[e._v("上")])],1),t("el-col",{attrs:{span:12}},[t("el-checkbox-button",{staticClass:"direction-checkbox",model:{value:e.ifObj.touchOff.progress.config.left,callback:function(t){e.$set(e.ifObj.touchOff.progress.config,"left",t)},expression:"ifObj.touchOff.progress.config.left"}},[e._v("左")])],1),t("el-col",{attrs:{span:12}},[t("el-checkbox-button",{staticClass:"direction-checkbox",model:{value:e.ifObj.touchOff.progress.config.right,callback:function(t){e.$set(e.ifObj.touchOff.progress.config,"right",t)},expression:"ifObj.touchOff.progress.config.right"}},[e._v(" 右 ")])],1),t("el-col",{attrs:{span:24}},[t("el-checkbox-button",{staticClass:"direction-checkbox",model:{value:e.ifObj.touchOff.progress.config.bottom,callback:function(t){e.$set(e.ifObj.touchOff.progress.config,"bottom",t)},expression:"ifObj.touchOff.progress.config.bottom"}},[e._v(" 下 ")])],1)],1)],1)],1)],1)],1):e._e(),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.touchOffType==e.TOUCH_OFFS.text.value,expression:"touchOffType == TOUCH_OFFS.text.value"}]},[e.ifObj.touchOff.text?t("el-col",[t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.text.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.text.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.text.value,t)}}},[e._v("启用")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：公式返回值映射为中文，如遥信“0”为“关”等，注意写入位置 ")])],1)],1),t("el-row",[t("el-col",{attrs:{span:7}},[e._v("写入位置：")]),t("el-col",{attrs:{span:17}},[t("el-select",{attrs:{size:"mini"},model:{value:e.ifObj.touchOff.text.selector,callback:function(t){e.$set(e.ifObj.touchOff.text,"selector",t)},expression:"ifObj.touchOff.text.selector"}},e._l(e.textNode,(function(e){return t("el-option",{key:e.selector,attrs:{label:e.name??e.selector,value:e.selector}})})),1)],1)],1),t("div",{staticStyle:{"margin-top":"5px","border-width":"2px","border-color":"#c2bcb3","border-style":"dashed","text-align":"center"}},[e._l(e.ifObj.touchOff.text.texts,(function(a,o){return t("el-row",{key:o,attrs:{gutter:20}},[t("el-col",{attrs:{span:3}},[e._v(" 值为 ")]),t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{size:"mini"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1),t("el-col",{attrs:{span:4}},[e._v(" 时输出 ")]),t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{size:"mini"},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"item.text"}})],1),t("el-col",{attrs:{span:3}},[0!=o?t("el-button",{staticStyle:{padding:"3px"},attrs:{icon:"el-icon-minus",type:"danger",size:"mini",circle:""},on:{click:function(t){return e.removeText(o)}}}):e._e()],1)],1)})),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{padding:"3px"},attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:e.addText}})],1)],2)],1):e._e()],1),e.touchOffType==e.TOUCH_OFFS.animation.value?t("el-row",[t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.animation.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.animation.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.animation.value,t)}}},[e._v("启用")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：公式需返回布尔类型，选择多个动画可能存在冲突 ")])],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("动画组件：")]),t("el-col",{attrs:{span:17}},[t("el-select",{attrs:{size:"mini",multiple:""},model:{value:e.ifObj.touchOff.animation.selector,callback:function(t){e.$set(e.ifObj.touchOff.animation,"selector",t)},expression:"ifObj.touchOff.animation.selector"}},[t("el-option",{attrs:{label:"整体",value:e.D3_G_NAME}}),e._l(e.markup,(function(e){return t("el-option",{key:e.selector,attrs:{label:e.name??e.selector,value:e.selector}})}))],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:7}},[e._v("动画效果：")]),t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:17}},[t("el-select",{attrs:{size:"mini",multiple:"","value-key":"key",value:e.selectAnimationEffect},on:{change:e.animationChange}},e._l(e.animationEffect,(function(e){return t("el-option",{key:e.key,attrs:{label:e.name,value:e}})})),1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-collapse",{staticClass:"attr-config",attrs:{accordion:""}},[e.rotate?t("el-collapse-item",{attrs:{title:"旋转"}},[t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("旋转度数")]),t("el-col",{attrs:{span:17}},[t("el-input-number",{attrs:{step:10,max:360,min:0},model:{value:e.rotate.style["--angle-rotation"],callback:function(t){e.$set(e.rotate.style,"--angle-rotation",t)},expression:"rotate.style['--angle-rotation']"}}),e._v(" "+e._s(e.rotate.style["--angle-rotation"])+" deg ")],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("一圈用时")]),t("el-col",{attrs:{span:17}},[t("el-input-number",{attrs:{step:1},model:{value:e.rotate.style["--animation-duration"],callback:function(t){e.$set(e.rotate.style,"--animation-duration",t)},expression:"rotate.style['--animation-duration']"}}),e._v(" 秒 ")],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("动画函数")]),t("el-col",{attrs:{span:17}},[t("el-select",{model:{value:e.rotate.style["--animation-timing-function"],callback:function(t){e.$set(e.rotate.style,"--animation-timing-function",t)},expression:"\n                              rotate.style['--animation-timing-function']\n                            "}},e._l(e.animationFUnctions,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("动画方向")]),t("el-col",{attrs:{span:17}},[t("el-select",{model:{value:e.rotate.style["--animation-direction"],callback:function(t){e.$set(e.rotate.style,"--animation-direction",t)},expression:"rotate.style['--animation-direction']"}},[t("el-option",{attrs:{value:"normal",label:"正转"}}),t("el-option",{attrs:{value:"reverse",label:"反转"}}),t("el-option",{attrs:{value:"alternate",label:"交替"}}),t("el-option",{attrs:{value:"alternate-reverse",label:"往复"}})],1)],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("播放次数")]),t("el-col",{attrs:{span:17}},[t("el-input-number",{attrs:{disabled:"infinite"===e.rotate.style["--animation-iteration-count"],step:1},model:{value:e.rotate.style["--animation-iteration-count"],callback:function(t){e.$set(e.rotate.style,"--animation-iteration-count",t)},expression:"\n                              rotate.style['--animation-iteration-count']\n                            "}}),t("el-checkbox",{attrs:{"true-label":"infinite"},model:{value:e.rotate.style["--animation-iteration-count"],callback:function(t){e.$set(e.rotate.style,"--animation-iteration-count",t)},expression:"\n                              rotate.style['--animation-iteration-count']\n                            "}},[e._v("永远")])],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("终止状态")]),t("el-col",{attrs:{span:17}},[t("el-select",{attrs:{disabled:"infinite"===e.rotate.style["--animation-iteration-count"]},model:{value:e.rotate.style["--animation-fill-mode"],callback:function(t){e.$set(e.rotate.style,"--animation-fill-mode",t)},expression:"rotate.style['--animation-fill-mode']"}},[t("el-option",{attrs:{value:"forwards",label:"保持"}}),t("el-option",{attrs:{value:"backwards",label:"复原"}})],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e(),e.touchOffType==e.TOUCH_OFFS.transition.value?t("el-row",[t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{staticStyle:{display:"flex","flex-direction":"column"}},[t("el-checkbox",{attrs:{"true-label":e.TOUCH_OFFS.transition.value,"false-label":"",checked:e.typeChecked(e.TOUCH_OFFS.transition.value)},on:{change:function(t){return e.selectTypeChange(e.TOUCH_OFFS.transition.value,t)}}},[e._v("启用")]),t("label",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明：现实移动比 = 采集移动值 / 最大移动值 图元移动距离 = 实际移动比 * （最终位置 - 初始位置） ")])],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("现实最大距离：")]),t("el-col",{attrs:{span:17}},[t("el-input-number",{attrs:{step:10,min:0},model:{value:e.ifObj.touchOff.transition.move.max,callback:function(t){e.$set(e.ifObj.touchOff.transition.move,"max",t)},expression:"ifObj.touchOff.transition.move.max"}})],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("延时执行：")]),t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:17}},[t("el-input-number",{attrs:{step:10,min:0},model:{value:e.ifObj.touchOff.transition.move.delay,callback:function(t){e.$set(e.ifObj.touchOff.transition.move,"delay",t)},expression:"ifObj.touchOff.transition.move.delay"}})],1)],1),t("el-row",{staticStyle:{"margin-bottom":"22px"}},[t("el-col",{attrs:{span:7}},[e._v("用时：")]),t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:17}},[t("el-input-number",{attrs:{step:10,min:0},model:{value:e.ifObj.touchOff.transition.move.duration,callback:function(t){e.$set(e.ifObj.touchOff.transition.move,"duration",t)},expression:"ifObj.touchOff.transition.move.duration"}})],1)],1),t("el-row",[t("el-col",{attrs:{span:7}},[e._v("动画曲线：")]),t("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:17}},[t("el-select",{attrs:{"value-key":"label",clearable:"",placeholder:"请选择"},model:{value:e.ifObj.touchOff.transition.move.timing,callback:function(t){e.$set(e.ifObj.touchOff.transition.move,"timing",t)},expression:"ifObj.touchOff.transition.move.timing"}},e._l(e.timings,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1):e._e()],1)],1)],1)],1),t("el-col",{staticStyle:{height:"100%",position:"relative"},attrs:{span:16}},[t("el-button",{staticStyle:{position:"absolute",top:"10px",right:"20px","z-index":"999999999"},attrs:{icon:"el-icon-location-information",type:"success",circle:""},on:{click:e.focusTargat}}),t("div",{staticStyle:{height:"100%"},attrs:{id:"preview-container"}})],1)],1)],1)},Ca=[],Ea=a(18924),Oa=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.$refs.selectPoint.open()}}},[e._v(" 插入变量 ")])],1),t("el-col",{attrs:{span:24}},[t("div",{ref:"editorContainer"})]),t("el-col",{attrs:{span:24}},[t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" 说明： ")]),t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" （1）可插入变量形成公式，公式结果需要根据启用的效果返回数值类型或布尔类型; ")]),t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" （2）系统会根据后台数据变化刷新关联的变量公式来展示公式的启用效果，可同时启用多个效果； ")]),t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" （3）公式可使用“+（加）-（减）*（乘）/（除）”等数学运算符和“&&（并且）、||（或）”关系运算符号； ")]),t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" （4）进度效果如果不是百分比数值可除100后转换为百分比的小数； ")]),t("p",{staticStyle:{"font-size":"10px",opacity:"0.7"}},[e._v(" （5）只有文本类型节点有文本类型转换效果，可将数值转换为“开、关等文本”； ")])])],1),t("select-point",{ref:"selectPoint",attrs:{variables:[e.VARIABLES.readble.code,e.VARIABLES.readbleAndWriteable.code]},on:{select:e.savePoint}})],1)},Ia=[],Sa=a(59808),Pa=Sa.A,ja=(0,_.A)(Pa,Oa,Ia,!1,null,null,null),za=ja.exports;let La;var Fa={name:"complexConfigItem",components:{Attr:Et,ComplexEditor:za},mixins:[Z.c],props:["case"],data(){return{timings:["linear","quad","cubic","inout","exponential","bounce","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","easeInElastic","easeOutElastic","easeInOutElastic","easeInBounce","easeOutBounce","easeInOutBounce"],moveTargetNode:null,animationEffect:[{key:"glimmer",name:"闪烁",class:"glimmer"},{key:"rotate",name:"旋转",class:"corotation-r",style:{"--animation-duration":1,"--animation-timing-function":"linear","--animation-delay":0,"--animation-iteration-count":"infinite","--animation-direction":"normal","--animation-fill-mode":"both","--animation-play-state":"running","--animation-timeline":"auto","--animation-range-start":"normal","--angle-rotation":360}}],animationFUnctions:["linear","ease","ease-in","ease-out","ease-in-out"],selectAnimationEffect:[],SUPER_G_NAME:F.qc,D3_G_NAME:F.eo,markup:[],attrs:{},status:[],cell:{},cloneCell:{},TOUCH_OFFS:F.ZT,touchOffType:"",ifObj:(0,k.cloneDeep)(this.case),collapseActiveNames:[0],previewGraph:{},offect:null,editor:null}},computed:{textNode(){return this.markup.filter((e=>"text"==e.tagName))},touchOffs:function(){let e=(0,k.cloneDeep)(F.ZT);return this.status&&0!=this.status.length||delete e.status,0==this.textNode.length&&delete e.text,e},styleNode(){return this.ifObj.touchOff.type.includes(this.TOUCH_OFFS.style.value)?this.cell:this.cloneCell},rotate(){return this.selectAnimationEffect.find((e=>"rotate"===e.key))}},watch:{"ifObj.touchOff":{handler(){let e=(0,k.cloneDeep)(this.ifObj),t=e.touchOff;e.touchOff=La,this.offect.editViewChangeData(this.cell,!1,{type:F.g8.complex.value,cases:[e]}),e.touchOff=t,this.offect.editViewChangeData(this.cell,!0,{type:F.g8.complex.value,cases:[this.ifObj]}),La=t},deep:!0}},mounted(){let e=this.graph.toJSON();this.previewGraph=new j.ke({container:document.getElementById("preview-container"),background:{color:"#000000"},scroller:{enabled:!0},panning:{enabled:!0},interacting:function({cell:e}){let t=e.prop("isMoveTarget");return!!t&&{nodeMovable:!0,magnetConnectable:!1,edgeMovable:!1,edgeLabelMovable:!1,arrowheadMovable:!1,vertexMovable:!1,vertexAddable:!1,vertexDeletable:!1}},cursor:"crosshair",mousewheel:{enabled:!0,zoomAtMousePosition:!0,minScale:.5,maxScale:3},connecting:{},virtual:!1,async:!0}),this.previewGraph.fromJSON(e),this.previewGraph.centerCell(this.selectNode().cell),this.cell=this.previewGraph.getCellById(this.selectNode().cell.id),this.cloneCell=this.cell.clone(),this.offect=new Ea.s,this.offect.editViewChangeData(this.cell,!0,{type:F.g8.complex.value,cases:[this.ifObj]}),this.attrs=this.cell.getAttrs(),this.markup=(0,D.f8)(this.cell.getMarkup(),this.attrs),this.status=this.cell.store.data.status;let t=(0,k.cloneDeep)(this.case);if(this.status){let e={};t.touchOff.status=t.touchOff.status??e,this.status.forEach((a=>{let o=t.touchOff.status[a.label];e[a.label]=void 0==o?"":o}))}t.touchOff.text||(t.touchOff.text={selector:this.textNode?.[0]?.selector??"",texts:[{value:"",text:""}]}),t.touchOff.progress||(t.touchOff.progress={selector:[F.qc],config:{top:!1,bottom:!1,left:!1,right:!1}}),t.touchOff.animation?this.selectAnimationEffect=t.touchOff.animation.effect:t.touchOff.animation={selector:[F.eo],effect:[]},t.touchOff.type||(t.touchOff.type=[]),t.touchOff.transition?t.touchOff.type.includes(F.ZT.transition.value)&&this.addMoveTarget(t.touchOff.transition.move.target):t.touchOff.transition={move:{max:100,duration:1e3,delay:10,timing:"quad",target:{x:0,y:0}}},La=(0,k.cloneDeep)(t.touchOff),this.touchOffType=F.ZT.style.value,this.ifObj=t,this.cell.isNode()&&setTimeout((()=>{let e=this.previewGraph.findView(this.cell);e.highlight(e.container,{highlighter:{name:"stroke",args:{padding:30,attrs:{"stroke-width":2,stroke:"#fff5eeeb","stroke-dasharray":"5,5"}}}})}),500)},methods:{animationChange(e){this.ifObj.touchOff.animation.effect=e,this.selectAnimationEffect=e,console.log(e)},selectTypeChange(e,t){if(t)this.ifObj.touchOff.type.includes(t)||this.ifObj.touchOff.type.push(t),t===F.ZT.transition.value&&this.addMoveTarget();else{let t=this.ifObj.touchOff.type,a=t.indexOf(e);t.splice(a,1),e===F.ZT.transition.value&&this.removeMoveTarget()}},typeChecked(e){return this.ifObj.touchOff.type.includes(e)},addMoveTarget(e){let t=this.cell.clone();if(t.prop("isMoveTarget",!0),t.removeTools(),e){let{x:a,y:o}=e;t.setPosition(a,o)}else{let{x:e,y:a}=t.getPosition();t.setPosition(e+32,a+32),this.ifObj.touchOff.transition.move.target=t.getPosition()}this.previewGraph.addCell(t),t.toFront(),this.previewGraph.addEdge({source:{cell:this.cell,connectionPoint:"bbox"},target:{cell:t,connectionPoint:"bbox"},attrs:{line:{stroke:"#1890ff",strokeDasharray:5,targetMarker:"classic",style:{animation:"ant-line 30s infinite linear"}}}}),t.on("change:position",(0,k.debounce)(this.moveTargetNodeChange,500,{leading:!1,trailing:!0})),this.moveTargetNode=t},moveTargetNodeChange({current:e}){this.moveTargetNode&&(this.ifObj.touchOff.transition.move.target=e)},removeMoveTarget(){this.moveTargetNode.on("change:position"),this.previewGraph.removeCells([this.moveTargetNode])},addAttr(e){this.ifObj.touchOff.style||(this.ifObj.touchOff.style=[]),this.ifObj.touchOff.style.push({type:"add",attrName:e[0],attrValue:e[1]})},removeAttr(e){this.ifObj.touchOff.style||(this.ifObj.touchOff.style=[]);let t=this.selectNode().cell,a=t.attr(e);this.ifObj.touchOff.style.push({type:"remove",attrName:e,orgAttrValue:a})},changeAttr(e){this.ifObj.touchOff.style||(this.ifObj.touchOff.style=[]);let t=this.selectNode().cell,a=t.attr(e[0]),o=this.ifObj.touchOff.style.find((t=>t.attrName===e[0]));o?(o.attrName=e[0],o.attrValue=e[1]):this.ifObj.touchOff.style.push({type:"change",attrName:e[0],attrValue:e[1],orgAttrValue:a})},packageAttr(){let e=this.selectNode().cell.getAttrs(),t={};this.cell=this.previewGraph.getCellById(this.selectNode().cell.id);let a=this.cell.getAttrs();for(let[o,s]of Object.entries(a))(0,k.isEqual)(s,e[o])||(t[o]=s);this.ifObj.touchOff.style=t},removeText(e){this.ifObj.touchOff.text.texts.splice(e,1)},addText(){this.ifObj.touchOff.text.texts.push({value:"",text:""})},save(){let e=this.$refs.complexEditorRef.getFormula();if(e)return this.ifObj.ifstr=e.formula,this.ifObj.points=e.points,this.moveTargetNode&&(this.ifObj.touchOff.transition.move.target=this.moveTargetNode.getPosition()),this.ifObj},focusTargat(){this.previewGraph.centerCell(this.selectNode().cell)}},destroyed(){this.previewGraph&&this.previewGraph.dispose()}},Ra=Fa,Ba=(0,_.A)(Ra,Da,Ca,!1,null,"24b5cc69",null),Ua=Ba.exports,Ha={name:"ComplexConfig",mixins:[Z.c],components:{ComplexConfigItem:Ua},props:["case"],data(){return{TOUCH_OFFS:F.ZT,centerDialogVisible:!1,caseData:(0,k.cloneDeep)(this.case)}},computed:{ifstr(){if(this.caseData.points&&0!==this.caseData.length){let e=this.caseData.ifstr;return""===e?"":(this.caseData.points.forEach((t=>{e=e.replaceAll(`{${t.mpKey}.${t.attrKey}}`,`${se.A.getPAName(t.mpKey,t.attrKey)}`)})),e)}return this.caseData.ifstr}},methods:{save(){let e=this.$refs.complexConfigItemRef.save();e&&(e?.touchOff?.type?.length?(this.caseData=e,this.$emit("save",this.case.ifstr,this.caseData,(()=>{this.centerDialogVisible=!1}),(e=>{this.$message(e.msg)}))):this.$message.error("未启用任何效果"))},config(){this.centerDialogVisible=!0},remove(){this.$confirm("确认移除此条件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$emit("remove",this.case)})).catch((()=>{}))}}},$a=Ha,Ya=(0,_.A)($a,Ta,ka,!1,null,"3ad177aa",null),Wa=Ya.exports,Ga=a(52547),Qa={name:"DataBinding",props:["markup"],components:{ComplexConfig:Wa,SelectPoint:Ga.A,ComplexConfigItem:Ua},mixins:[Z.c],data(){return{VARIABLES:F.ut,centerDialogVisible:!1,caseData:{},FORMULAS:F.g8,TOUCH_OFFS:F.ZT,nodeAttr:null,isCollapse:"",type:"",format:null,cases:null,timeFormat:{selector:"",format:""},times:["yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm","yyyy年MM月dd日 HH:mm:ss","yyyy年MM月dd日 HH","yyyy年MM月dd日 HH:mm","yyyy年MM月dd日"]}},computed:{textNode(){return this.markup.filter((e=>"text"==e.tagName))},forMulasTypes(){return this.textNode?.length>0?Object.values(F.g8):[]}},mounted(){let{cell:e}=this.selectNode(),t=(0,k.cloneDeep)(e.propFormat()),a=e.propCases()??[];if(this.type=this.textNode?.length>0?F.g8.data.value:F.g8.complex.value,t||(t={point:{mpKey:"",attrKey:""},selector:this.textNode?.[0]?.selector??"",decimalNum:2,multiplier:1,unit:""}),this.cases=a,this.textNode?.length>0){this.format=t;let a=(0,k.cloneDeep)(e.propTime());this.timeFormat=a||{selector:this.textNode?.[0],format:""}}},methods:{changeFormat(){this.selectNode().cell.propFormat(this.format)},changeTimeFormat(){this.selectNode().cell.propTime(this.timeFormat),this.timeFormat.format?(console.log(`${this.timeFormat.selector.selector}/text`),this.selectNode().cell.attr(`${this.timeFormat.selector.selector}/text`,this.timeFormat.format)):this.selectNode().cell.attr(`${this.timeFormat.selector.selector}/text`,"##")},getName(e){let{cell:t}=this.selectNode(),a=t.getPAName(e.mpKey,e.attrKey);return a},savePoint(e){let{cell:t}=this.selectNode(),{mpKey:a,attrKey:o,mpId:s,attrId:i}=e;this.format.point={mpKey:a,attrKey:o,mpId:s,attrId:i},t.propFormat(this.format);let r=t.propFormat();this.format=r,this.$refs.selectPoint.close()},clearPoint(){this.format.point={mpKey:"",attrKey:""}},addCase(){this.caseData={ifstr:"",points:[],touchOff:{type:[],result:""}},this.centerDialogVisible=!0},save(){let e=this.$refs.complexConfigItemRef.save();if(!e)return;if(!e?.touchOff?.type?.length)return void this.$message.error("未启用任何效果");let t=this.caseData.ifstr;if(this.cases){let a=this.cases.find((a=>a.ifstr!=t&&a.ifstr==e.ifstr));if(a)return void this.$message("已经存在此条件")}this.cases.push(e),this.caseData={};let{cell:a}=this.selectNode();a.propCases(this.cases),this.centerDialogVisible=!1},saveCase(e,t,a=(()=>{}),o=(()=>{})){let s=this.cases.findIndex((t=>t.ifstr==e)),i=this.cases.find((a=>a.ifstr!=e&&a.ifstr==t.ifstr));i?o({return:!1,msg:"已经存在此条件"}):(this.cases.splice(s,1,t),this.selectNode().cell.propCases(this.cases),a())},removeComplexConfig(e){this.cases.splice(e,1)}}},Ka=Qa,Ja=(0,_.A)(Ka,xa,Ma,!1,null,null,null),qa=Ja.exports,Za=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"12px 2.5px 0px"}},[e._l(e.localPoints,(function(a,o){return t("el-card",{key:`${a.mpId}.${a.attrId}`,staticClass:"event-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"header-div"},[t("div",{staticClass:"header-div-left"},[e._v(" 数据点 ")]),t("div",{staticClass:"header-div-right"},[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.addPoint(o)}}}),t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removePoint(o)}}})],1)]),t("div",{staticClass:"body-div"},[e._v(" 点位： "),t("div",[t("el-input",{attrs:{size:"mini",value:e.getPointName(a),placeholder:"无"}})],1)]),t("div",{staticClass:"body-div"},[e._v(" 属性： "),t("el-input",{staticStyle:{"margin-bottom":"3px"},attrs:{size:"mini",value:e.getAttrName(a)}})],1)])})),t("div",{staticStyle:{"text-align":"center","padding-top":"10px"}},[t("el-button",{attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:function(t){return e.addPoint()}}})],1),t("select-point",{ref:"selectPoint",attrs:{variables:[e.VARIABLES.readble.code,e.VARIABLES.writeable.code,e.VARIABLES.readbleAndWriteable.code]}})],2)},Xa=[],eo={name:"ChartDataBingding",components:{SelectPoint:Ga.A},mixins:[Z.c],props:["chartsPoints"],data(){return{VARIABLES:F.ut,localPoints:(0,k.cloneDeep)(this.chartsPoints??[])}},watch:{chartsPoints(){this.localPoints=(0,k.cloneDeep)(this.chartsPoints??[])}},methods:{getName(e){let t=se.A.getPAName(e.mpKey,e.attrKey);return t},getPointName(e){return se.A.getPointName(e.mpKey)},getAttrName(e){return se.A.getAttrName(e.mpKey,e.attrKey)},addPoint(e){this.$refs.selectPoint.open({},(t=>{void 0===e?this.localPoints.push(t):this.$set(this.localPoints,e,{...t}),this.porpPoints()}))},removePoint(e){this.$confirm("此操作将永久删除该点位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.localPoints.splice(e,1),this.porpPoints()})).catch((()=>{}))},porpPoints(){let{cell:e}=this.selectNode(),t=[];this.localPoints.forEach((({mpKey:e,mpId:a,attrKey:o,attrId:s})=>{t.push({mpKey:e,mpId:a,attrKey:o,attrId:s})})),e.setProp("formulas",{points:t})}}},to=eo,ao=(0,_.A)(to,Za,Xa,!1,null,"4ca10a96",null),oo=ao.exports,so=function(){var e=this,t=e._self._c;return t("div",[e.editEventObj?t("div",{staticStyle:{"text-align":"center"}},[t("el-form",{ref:"eventForm",staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px"},attrs:{"label-width":"90px","label-suffix":":",size:"mini",model:e.editEventObj,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"事件类型"}},[t("el-row",{staticStyle:{"font-size":"13px"},attrs:{gutter:5}},[t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"点击",placement:"top"}},[t("el-button",{staticClass:"svg-edit-mouseL",attrs:{disabled:!!e.existEventType.find((t=>t.eventType===e.EVENT_TYPE.click.value&&t.id!==e.editEventObj.id)),type:e.editEventObj.eventType===e.EVENT_TYPE.click.value?"primary":""},on:{click:function(t){e.editEventObj.eventType=e.EVENT_TYPE.click.value,e.editEventObj.actionType=e.EVENT_TYPE.click?.actionType?.[0]??""}}})],1)],1),t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"右击",placement:"top"}},[t("el-button",{staticClass:"svg-edit-shubiao-zuojian",attrs:{type:e.editEventObj.eventType===e.EVENT_TYPE.rightClick.value?"primary":""},on:{click:function(t){e.editEventObj.eventType=e.EVENT_TYPE.rightClick.value,e.editEventObj.actionType=e.EVENT_TYPE.rightClick?.actionType?.[0]??""}}})],1)],1),t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"悬停",placement:"top"}},[t("el-button",{staticClass:"svg-edit-xuanfuanniu",attrs:{disabled:!!e.existEventType.find((t=>t.eventType===e.EVENT_TYPE.mouseenter.value&&t.id!==e.editEventObj.id)),type:e.editEventObj.eventType===e.EVENT_TYPE.mouseenter.value?"primary":""},on:{click:function(t){e.editEventObj.eventType=e.EVENT_TYPE.mouseenter.value,e.editEventObj.actionType=e.EVENT_TYPE.mouseenter?.actionType?.[0]??""}}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"行为类型"}},[t("el-row",{staticStyle:{"font-size":"13px"},attrs:{gutter:5}},[t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.actionTypeList.includes(e.EVENT_ACTION_TYPE.data.value),expression:"actionTypeList.includes(EVENT_ACTION_TYPE.data.value)"}],attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"显示/设置数据",placement:"top"}},[t("el-button",{staticClass:"svg-edit-02",attrs:{type:e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value?"primary":""},on:{click:function(t){e.editEventObj.actionType=e.EVENT_ACTION_TYPE.data.value}}})],1)],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.actionTypeList.includes(e.EVENT_ACTION_TYPE.intranet.value),expression:"actionTypeList.includes(EVENT_ACTION_TYPE.intranet.value)"}],attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"内链",placement:"top"}},[t("el-button",{staticClass:"svg-edit-ziyuan",attrs:{type:e.editEventObj.actionType===e.EVENT_ACTION_TYPE.intranet.value?"primary":""},on:{click:function(t){e.editEventObj.actionType=e.EVENT_ACTION_TYPE.intranet.value,e.editEventObj.formType=e.EVENT_ACTION_FORM.dialog.value}}})],1)],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.actionTypeList.includes(e.EVENT_ACTION_TYPE.internet.value),expression:"actionTypeList.includes(EVENT_ACTION_TYPE.internet.value)"}],attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"外链",placement:"top"}},[t("el-button",{staticClass:"svg-edit-ziyuan1",attrs:{type:e.editEventObj.actionType===e.EVENT_ACTION_TYPE.internet.value?"primary":""},on:{click:function(t){e.editEventObj.actionType=e.EVENT_ACTION_TYPE.internet.value,e.editEventObj.formType=e.EVENT_ACTION_FORM.dialog.value}}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"展现形式"}},[t("el-row",{staticStyle:{"font-size":"13px"},attrs:{gutter:5}},[e.actionFormList.includes(e.EVENT_ACTION_FORM.tooltip.value)?t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"悬浮框",placement:"top"}},[t("el-button",{staticClass:"svg-edit-m-xuanfu",attrs:{type:e.editEventObj.formType===e.EVENT_ACTION_FORM.tooltip.value?"primary":""},on:{click:function(t){e.editEventObj.formType=e.EVENT_ACTION_FORM.tooltip.value}}})],1)],1):e._e(),e.actionFormList.includes(e.EVENT_ACTION_FORM.dialog.value)?t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"弹框",placement:"top"}},[t("el-button",{staticClass:"svg-edit-dankuang",attrs:{type:e.editEventObj.formType===e.EVENT_ACTION_FORM.dialog.value?"primary":""},on:{click:function(t){e.editEventObj.formType=e.EVENT_ACTION_FORM.dialog.value}}})],1)],1):e._e(),e.actionFormList.includes(e.EVENT_ACTION_FORM.present.value)?t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"当前页",placement:"top"}},[t("el-button",{staticClass:"svg-edit-jurassic_refresh",attrs:{type:e.editEventObj.formType===e.EVENT_ACTION_FORM.present.value?"primary":""},on:{click:function(t){e.editEventObj.formType=e.EVENT_ACTION_FORM.present.value}}})],1)],1):e._e(),e.actionFormList.includes(e.EVENT_ACTION_FORM.newtab.value)?t("el-col",{attrs:{span:7}},[t("el-tooltip",{staticClass:"item",attrs:{transition:"",enterable:!1,effect:"dark",content:"新标签页",placement:"top"}},[t("el-button",{staticClass:"svg-edit-xinchuangkoudakai",attrs:{type:e.editEventObj.formType===e.EVENT_ACTION_FORM.newtab.value?"primary":""},on:{click:function(t){e.editEventObj.formType=e.EVENT_ACTION_FORM.newtab.value}}})],1)],1):e._e()],1)],1),e.editEventObj.eventType==e.EVENT_TYPE.rightClick.value?t("el-form-item",{attrs:{label:"菜单名",prop:"menuTitle"}},[t("el-input",{model:{value:e.editEventObj.menuTitle,callback:function(t){e.$set(e.editEventObj,"menuTitle",t)},expression:"editEventObj.menuTitle"}})],1):e._e(),e.editEventObj.actionType!==e.EVENT_ACTION_TYPE.data.value&&e.editEventObj.actionType!==e.EVENT_ACTION_TYPE.intranet.value?t("el-form-item",{attrs:{label:"链接",prop:"url"}},[t("el-input",{staticClass:"input-with-select",model:{value:e.editEventObj.url,callback:function(t){e.$set(e.editEventObj,"url",t)},expression:"editEventObj.url"}})],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.intranet.value?t("el-form-item",{attrs:{label:"跳转图纸",prop:"blueprint"}},[t("el-select",{attrs:{placeholder:"请选择",loading:e.blueprintListLoading,"loading-text":"正在加载图纸...","value-key":"id"},model:{value:e.editEventObj.blueprint,callback:function(t){e.$set(e.editEventObj,"blueprint",t)},expression:"editEventObj.blueprint"}},e._l(e.blueprintList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1):e._e()],1),e.editEventObj.actionType!==e.EVENT_ACTION_TYPE.intranet.value&&e.editEventObj.actionType!==e.EVENT_ACTION_TYPE.internet.value?t("div",[e._l(e.editEventObj.actions,(function(a,o){return t("div",{key:a.id,staticClass:"action-div",staticStyle:{position:"relative"}},[0!=o?t("el-button",{staticClass:"remove-action-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeAction(a)}}},[e._v("✖")]):e._e(),t("el-form",{ref:"actionForm",refInFor:!0,staticStyle:{"max-width":"450px",padding:"20px 5px 0 5px",border:"1px solid #f564642b","border-radius":"5px",margin:"18px 14px 0px","padding-top":"10px"},attrs:{"label-width":"70px","label-suffix":":",size:"mini",model:a,rules:e.actionRules},nativeOn:{submit:function(e){e.preventDefault()}}},[e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value?t("el-form-item",{attrs:{label:"类型"}},[t("el-row",{staticStyle:{"font-size":"13px"},attrs:{gutter:5}},[t("el-col",{attrs:{span:8}},[t("el-button",{staticStyle:{width:"48px",padding:"7px 0px"},attrs:{type:a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?"primary":""},on:{click:function(t){a.dataActionType=e.EVENT_DATA_ACTION_TYPE.showdata.value,a.type=e.EVENT_SHOWDATA_TYPE["text"].value}}},[e._v("显示")])],1),t("el-col",{attrs:{span:8}},[t("el-button",{staticStyle:{width:"48px",padding:"7px 0px"},attrs:{type:a.dataActionType===e.EVENT_DATA_ACTION_TYPE.setdata.value?"primary":""},on:{click:function(t){a.dataActionType=e.EVENT_DATA_ACTION_TYPE.setdata.value,a.type=e.EVENT_SETDATA_TYPE["input"].value}}},[e._v("设置")])],1)],1)],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("el-form-item",{attrs:{label:"显示类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.type,callback:function(t){e.$set(a,"type",t)},expression:"action.type"}},e._l(e.EVENT_SHOWDATA_TYPE,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"项名称",prop:"title"}},[t("el-input",{model:{value:a.title,callback:function(t){e.$set(a,"title",t)},expression:"action.title"}})],1),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.setdata.value?t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.type,callback:function(t){e.$set(a,"type",t)},expression:"action.type"}},e._l(e.EVENT_SETDATA_TYPE,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.type!==e.EVENT_SHOWDATA_TYPE.text.value?t("el-form-item",{attrs:{label:"点位",prop:"point.mpKey"}},[t("el-input",{attrs:{size:"mini",value:e.getName(a.point),clearable:"",title:e.getName(a.point)},on:{clear:function(t){return e.clearPoint(a)}}},[t("template",{slot:"append"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openSelectPoint(a)}}},[e._v("选择点位")])],1)],2)],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.type!==e.EVENT_SHOWDATA_TYPE.text.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("el-form-item",{attrs:{label:"小数位"}},[t("el-input",{attrs:{disabled:!a.point.mpKey},model:{value:a.point.decimal,callback:function(t){e.$set(a.point,"decimal",t)},expression:"action.point.decimal"}})],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.type!==e.EVENT_SHOWDATA_TYPE.text.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("el-form-item",{attrs:{label:"倍数"}},[t("el-input",{attrs:{disabled:!a.point.mpKey},model:{value:a.point.multiple,callback:function(t){e.$set(a.point,"multiple",t)},expression:"action.point.multiple"}})],1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.type!==e.EVENT_SHOWDATA_TYPE.text.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("el-form-item",{attrs:{label:"单位"}},[t("el-input",{attrs:{disabled:!a.point.mpKey},model:{value:a.point.unit,callback:function(t){e.$set(a.point,"unit",t)},expression:"action.point.unit"}})],1):e._e(),e.editEventObj.actionType!==e.EVENT_ACTION_TYPE.data.value||a.type!==e.EVENT_SETDATA_TYPE.button.value&&a.type!==e.EVENT_SHOWDATA_TYPE.text.value?e._e():t("el-form-item",{attrs:{label:"设置值",prop:"value"}},[t("el-input",{model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"action.value"}})],1),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value&&a.type===e.EVENT_SHOWDATA_TYPE.state.value?t("el-form-item",{attrs:{label:"状态量",prop:"texts"}},e._l(a.texts,(function(o,s){return t("el-row",{key:s},[t("el-col",{attrs:{span:9}},[t("el-input",{attrs:{placeholder:"实际值"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"item.value"}})],1),t("el-col",{attrs:{span:9}},[t("el-input",{attrs:{placeholder:"显示值"},model:{value:o.text,callback:function(t){e.$set(o,"text",t)},expression:"item.text"}})],1),0!=s?t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeText(s,a)}}})],1):e._e()],1)})),1):e._e(),e.editEventObj.actionType===e.EVENT_ACTION_TYPE.data.value&&a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value&&a.type===e.EVENT_SHOWDATA_TYPE.state.value?t("el-form-item",{staticStyle:{"text-align":"center"},attrs:{"label-width":"0"}},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addText(a)}}})],1):e._e()],1)],1)})),t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addAction}})],2):e._e(),t("div",{staticStyle:{"margin-top":"22px"}},[t("el-button",{on:{click:function(t){e.editEventObj=null}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEvent}},[e._v("保存")])],1)],1):t("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:5}},[e._l(e.eventList,(function(a){return t("el-col",{key:a.id,staticClass:"event-item",attrs:{span:24}},[t("el-card",{staticClass:"event-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"header-div"},[t("div",{staticClass:"header-div-left"},[t("i",{class:e.getEventIcon(a).icon,staticStyle:{"font-size":"14px"}}),e._v(e._s(e.getEventIcon(a).name)+" ")]),t("div",{staticClass:"header-div-right"},[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.editEvent(a)}}}),t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeEvent(a)}}})],1)]),t("div",{staticClass:"body-div"},[e._v(" "+e._s(e.getEventDetails(a))+" ")]),a.actionType===e.EVENT_ACTION_TYPE.internet.value?t("div",{staticClass:"body-div"},[t("div",[e._v(" 链接: ")]),t("div",[e._v(" "+e._s(a.url)+" ")])]):e._e(),a.actionType===e.EVENT_ACTION_TYPE.intranet.value?t("div",{staticClass:"body-div"},[t("div",[e._v(" 跳转图纸: ")]),t("div",[e._v(" "+e._s(a.blueprint.name)+" ")])]):e._e(),a.actionType===e.EVENT_ACTION_TYPE.data.value?t("div",{staticClass:"body-div"},e._l(a.actions,(function(a){return t("div",{key:a.id},[t("el-row",[t("el-col",{attrs:{span:10}},[e._v(e._s(a.title))]),t("el-col",{attrs:{span:4}},[a.dataActionType===e.EVENT_DATA_ACTION_TYPE.setdata.value?t("span",[e._v("→")]):e._e(),a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("span",[e._v("←")]):e._e()]),t("el-col",{attrs:{span:10}},[a.type===e.EVENT_SHOWDATA_TYPE.text.value?t("div",[e._v(" "+e._s(a.value)+" ")]):t("div",[a.dataActionType===e.EVENT_DATA_ACTION_TYPE.setdata.value&&a.type===e.EVENT_SETDATA_TYPE.button.value?t("span",[e._v(" "+e._s("["+a.value+"]")+" ")]):e._e(),e._v(" "+e._s(e.getName(a.point))+" ")])])],1)],1)})),0):e._e()])],1)})),t("el-col",{attrs:{span:24}},[t("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"15px"}},[t("el-button",{on:{click:e.addEvent}},[e._v("添加事件")])],1)])],2),t("select-point",{ref:"selectPoint",attrs:{variables:e.variables},on:{select:e.savePoint}})],1)},io=[],ro={name:"EventConfig",components:{SelectPoint:Ga.A},mixins:[Z.c],inject:["getBlueprintInfo"],data(){return{blueprintListLoading:!1,blueprintList:[],variables:[],selectAction:null,eventList:[],editEventObj:null,EVENT_TYPE:F.cP,EVENT_ACTION_TYPE:F.x9,EVENT_ACTION_FORM:F.fF,EVENT_DATA_ACTION_TYPE:F.g7,EVENT_SHOWDATA_TYPE:F.Ue,EVENT_SETDATA_TYPE:F.lk,rules:{menuTitle:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入有效的链接地址",trigger:"blur"}],blueprint:[{required:!0,message:"请选择跳转图纸",trigger:"blur"}]},actionRules:{title:[{required:!0,message:"请输入项名称",trigger:"blur"},{min:1,max:5,message:"长度在 1 到 5 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],value:[{required:!0,message:"请输入设置值",trigger:"blur"}],texts:[{required:!0,message:"请完整完善映射",validator:(e,t,a)=>{let o=t.find((e=>""===e.value||""===e.value));o&&a(new Error("请完整完善映射!")),a()},trigger:"blur"}],"point.mpKey":[{required:!0,message:"请选择点位",trigger:"blur"}]}}},computed:{actionTypeList(){if(!this.editEventObj)return[];let e=Object.values(F.cP).find((e=>e.value===this.editEventObj.eventType));return e?.actionType??[]},actionFormList(){if(!this.editEventObj)return[];let e=Object.values(F.x9).find((e=>e.value===this.editEventObj.actionType));return e?.form??[]},existEventType(){return this.eventList.map((e=>({id:e.id,eventType:e.eventType})))},notExistEventType(){return Object.values(F.cP).find((e=>!this.existEventType.find((t=>t.eventType===e.value))))}},created(){let e=this.selectNode();this.eventList=(0,k.cloneDeep)(e.cell.getProp("events"))??[],this.getBlueprintList(!0)},methods:{async getBlueprintList(e){if(e&&0===this.blueprintList?.length){let e=this.getBlueprintInfo();this.blueprintListLoading=!0;let{data:t}=await this.webtopoAPI.listNotPage({consId:e.consId,notSearchId:e.id}).catch((e=>{this.$message.error(e)}));t=t.map((({id:e,name:t})=>({id:e,name:t}))),this.blueprintListLoading=!1,this.blueprintList=t}},openSelectPoint(e){this.selectAction=e;let t=[F.ut.readbleAndWriteable.code];e.dataActionType===F.g7?.setdata?.value&&t.push(F.ut.writeable.code),e.dataActionType===F.g7?.showdata?.value&&t.push(F.ut.readble.code),this.variables=t,this.$refs.selectPoint.open()},getName(e){let{cell:t}=this.selectNode(),a=t.getPAName(e.mpKey,e.attrKey);return a},savePoint({mpKey:e,attrKey:t,mpId:a,attrId:o}){let s=this.selectAction.point;this.selectAction.point={...s,mpKey:e,attrKey:t,mpId:a,attrId:o},this.$refs.selectPoint.close()},clearPoint(e){this.selectAction=e??this.selectAction;let t=this.selectAction.point;this.selectAction.point={...t,mpKey:"",attrKey:"",mpId:"",attrId:""}},addEvent(){let e=(0,H.Ak)(),t={id:e,eventType:this.notExistEventType?this.notExistEventType.value:F.cP.rightClick.value,actionType:F.x9.data.value,formType:F.fF.tooltip.value,menuTitle:"",actions:[{id:(0,H.Ak)(),dataActionType:F.g7.showdata.value,type:F.Ue.text.value,title:"",value:"",url:"",blueprint:null,point:{id:"",mpId:"",mpName:"",attrId:"",attrName:"",multiple:1,decimal:2},texts:[{value:"",text:""}]}]};this.editEventObj=t},removeEvent(e){this.$confirm("此操作将永久删除该事件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let t=this.eventList.findIndex((t=>t.id===e.id));this.eventList.splice(t,1),this.selectNode().cell.prop("events",(0,k.cloneDeep)(this.eventList))})).catch((()=>{}))},editEvent(e){this.editEventObj=(0,k.cloneDeep)(e)},saveEvent(){let e=[];e.push(this.formValidate(this.$refs.eventForm)),this.$refs.actionForm?.forEach((t=>{e.push(this.formValidate(t))})),Promise.all(e).then((()=>{let e=this.eventList.findIndex((e=>e.id===this.editEventObj.id));-1!=e?this.eventList[e]=this.editEventObj:this.eventList.push(this.editEventObj),this.editEventObj=null,this.selectNode().cell.prop("events",(0,k.cloneDeep)(this.eventList))}))},formValidate(e){return new Promise(((t,a)=>{e.validate((e=>{e&&t()}))}))},addAction(){let e=this.editEventObj.actions;e||(this.editEventObj.actions=e=[]);let t=(0,k.cloneDeep)(e[e.length-1]);t.id=(0,H.Ak)(),e.push(t)},removeAction(e){let t=this.editEventObj.actions,a=t.findIndex((t=>t.id===e.id));t.splice(a,1)},addText(e){e.texts.push({value:"",text:""})},removeText(e,t){let a=t.texts;a.splice(e,1)},getEventIcon(e){let t=Object.values(F.cP).find((t=>t.value===e.eventType));return t||{}},getEventDetails(e){let t=Object.values(F.x9).find((t=>t.value===e.actionType)),a="";return t&&(a=t.name),a}}},lo=ro,no=(0,_.A)(lo,so,io,!1,null,"80a8f9ac",null),Vo=no.exports,co=function(){var e=this,t=e._self._c;return e.visible?t("el-dialog",{ref:"selectBGRef",attrs:{title:"选择背景图片",visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[t("p",{staticStyle:{"line-height":"33px"}},[e._v("图片拖入弹窗可上传到我的图库")]),t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"背景图片",name:"background"}},[t("div",{staticClass:"img_p_div"},e._l(e.nodeImgs,(function(a){return t("div",{key:a,staticClass:"img_item",class:{"selected-image":e.selectIamge===a}},[t("div",{staticClass:"image-container",style:"background: url("+a+") center center / contain no-repeat;"}),t("div",{staticClass:"img-app-btn"},[t("div",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectImg(a,"bg")}}},[e._v(" 设为背景 ")])],1),t("div",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectImg(a,"img")}}},[e._v(" 插入图片 ")])],1)])])})),0)]),t("el-tab-pane",{attrs:{label:"我的图库",name:"myimg"}},[t("div",{staticClass:"img_p_div"},e._l(e.myImages,(function(a){return t("div",{key:a.url,staticClass:"img_item",attrs:{title:a.name},on:{click:function(t){return e.selectImg(a.url,"img")}}},[t("div",{staticClass:"image-container",style:"background: url('"+a.url+"') center center / contain no-repeat;"}),t("div",{staticClass:"img-app-btn"},[t("div",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectImg(a.url,"bg")}}},[e._v(" 设为背景 ")])],1),t("div",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectImg(a.url,"img")}}},[e._v(" 插入图片 ")])],1)])])})),0)])],1)],1):e._e()},uo=[];let po,ho;var go={name:"SelectBGImage",mixins:[Z.c],data(){return{visible:!1,activeName:"background",selectIamge:"",myImages:[]}},computed:{nodeImgs(){let e=[];for(let t=1;t<=57;t++)e.push(`webtopo/background/backgroundH${t}.jpg`);return e.push("webtopo/background/电厂监控.svg"),e.push("webtopo/background/电厂监控2.svg"),e}},methods:{handleFileUpload(e){if(e.length>0){this.$message.warning("正在上传");const t=e[0];this.webtopoAPI.uploadFile(t).then((()=>{this.$message.success("上传成功"),this.webtopoAPI.getImages().then((({data:e})=>{this.myImages=e})).catch((e=>{this.$message.error(e.message)}))})).catch((e=>{this.$message.error(e.message)}))}},open({selectBGCallback:e=(()=>{}),insertImgCallback:t=(()=>{})}){this.webtopoAPI.getImages().then((({data:e})=>{this.myImages=e})).catch((e=>{this.$message.error(e.message)})),po=e,ho=t,this.visible=!0,this.$nextTick((()=>{this.$refs["selectBGRef"].$el.addEventListener("dragover",this.dragoverFun),this.$refs["selectBGRef"].$el.addEventListener("drop",this.dropFun)}))},selectImg(e,t){"bg"===t&&po(e),"img"===t&&ho(e),this.close()},close(){this.visible=!1,this.$refs["selectBGRef"].$el.removeEventListener("dragover",this.dragoverFun),this.$refs["selectBGRef"].$el.removeEventListener("drop",this.dropFun)},dragoverFun(e){e.preventDefault()},dropFun(e){e.preventDefault();const t=e.dataTransfer.files;this.handleFileUpload(t,e)}},beforedestroy(){this.$refs["selectBGRef"]?.$el?.removeEventListener("dragover",this.dragoverFun),this.$refs["selectBGRef"]?.$el?.removeEventListener("drop",this.dropFun)}},mo=go,fo=(0,_.A)(mo,co,uo,!1,null,"02e56c8e",null),bo=fo.exports,vo={name:"RightPane",props:["graphConfig"],components:{Attr:Et,ChartsAttr:Na,DataBinding:qa,EventConfig:Vo,ChartDataBinding:oo,SelectBGImage:bo},mixins:[Z.c],data(){return{rotateShow:!1,nodeName:"",isGrid:!0,cell:null,CONTENT_SHOW_TYPE:F.HE,NODE_TYPES:F.jM,active:"account",collapseActiveNames:[0],nodeAttr:null,attrs:{},markup:null,chartsAttr:null,chartsPoints:null,isEdge:null,router:"",connector:"",rotate3d:{x:1,y:1,z:1,a:0},nodeType:"",lGraphConfig:this.graphConfig,pageSizes:[{width:1680,height:1050},{width:1440,height:900},{width:1920,height:1200},{width:2560,height:1600},{width:2880,height:1800},{width:2560,height:1440},{width:1920,height:1080},{width:1280,height:800},{width:2560,height:1600},{width:2560,height:1440},{width:1600,height:900}],nodeList:[]}},computed:{textNode(){return this.markup?this.markup.filter((e=>"text"==e.tagName)):[]},pageSizeList(){let e=[];return this.pageSizes.forEach((t=>{let a=this.calculateAspectRatio(t.width,t.height);e.find((e=>e.key===a))||e.push({key:a,...t})})),e},pageSize(){return JSON.parse(JSON.stringify(this.graphConfig.pageSize))}},watch:{pageSize:{handler(e,t){e.width==t.width&&e.height==t.height||this.changePageSize()},deep:!0}},mounted(){this.nodeEventHook.onAdded((()=>{this.initTree("tree")})),this.nodeEventHook.onRemoved((()=>{this.initTree("tree")})),this.nodeEventHook.onSelected((({cell:e},t)=>{let a=t.getSelectedCells();if(a.length>1)return;this.cell=e,this.nodeName=e.getProp(F.f1),this.nodeType=e.getProp(F.sD),this.isEdge=e.isEdge(),this.isEdge&&(this.router=this.cell.getRouter(),this.connector=this.cell.getConnector().name);const o=e.store.data;o.data=o.data??{},o.preserveAspectRatio=o.preserveAspectRatio??!1,o.rotate3d=o.rotate3d??"rotate3d(1, 1, 1, 0deg)";let s=(0,k.cloneDeep)(o);s?.status?.forEach((e=>{void 0===e.selected&&(e.selected="")})),this.nodeAttr=s,this.chartsAttr=e.prop("charts"),this.chartsPoints=(0,k.cloneDeep)(e.prop("formulas/points")),this.attrs=(0,k.cloneDeep)(e.getAttrs()),this.active="info",this.$nextTick((()=>{let t=e.getMarkup();this.markup=(0,D.f8)(t,this.attrs)}))})),this.nodeEventHook.onUnselected((()=>{this.cell=null,this.nodeAttr=null,this.markup=null,this.attrs=null,this.chartsAttr=null,this.chartsPoints=null,this.active="account",this.nodeType=null}));let e=({key:e,current:t},a)=>{a.getSelectedCells().length>1||this.$nextTick((()=>{"size"===e&&void 0!=this.nodeAttr?.size&&(this.nodeAttr.size.width=t.width,this.nodeAttr.size.height=t.height),"position"===e&&void 0!=this.nodeAttr?.position&&(this.nodeAttr.position.x=t.x.toFixed(),this.nodeAttr.position.y=t.y.toFixed()),"angle"===e&&void 0!=this.nodeAttr?.angle&&(this.nodeAttr.angle=t)}))};this.nodeEventHook.onNodeChange((0,k.debounce)(e,500,{leading:!1,trailing:!0})),this.nodeEventHook.onGraphInitHook((()=>{let e=this.pageSizes[0],t=this.calculateAspectRatio(e.width,e.height);this.lGraphConfig.pageSize={key:t,...e},this.lGraphConfig.contentAdaptation=this.lGraphConfig.contentAdaptation??Object.keys(F.HE)[0]}))},methods:{textWrapCheck(e){let t=this.selectNode()?.cell?.attr(`${e.selector}/textWrap`);return!!t},attrChange(e,t){if(e){let e=this.selectNode()?.cell?.attr(`${t.selector}/textWrap_back`);e?this.selectNode()?.cell?.attr(`${t.selector}/textWrap`,e):this.selectNode()?.cell?.attr(`${t.selector}/textWrap`,{refWidth:1,refHeight:1,ellipsis:!1})}else{let e=this.selectNode()?.cell?.attr(`${t.selector}/textWrap`);this.selectNode()?.cell?.attr(`${t.selector}/textWrap_back`,e),this.selectNode()?.cell?.attr(`${t.selector}/textWrap`,!1)}},changeText(e,t){this.selectNode()?.cell?.attr(`${t.selector}/text`,e)},setShow(e){let t=this.graph.getCellById(e.id);e.visible?(e.visible=!1,t.hide()):(e.visible=!0,t.show())},setLock(e){let t=this.graph.getCellById(e.id);e.lock?(e.lock=!1,t.prop("lock",!1)):(e.lock=!0,t.prop("lock",!0))},initTree(e){"tree"===e.name&&"tree"===this.active&&(this.nodeList=this.graph.getCells().filter((e=>-1===e.id.indexOf("point_")&&e.id!==F.Rs)).map((e=>({id:e.id,name:e.prop(F.f1),visible:e.visible,lock:e.prop("lock")}))))},changeNodeName(){this.cell.prop(F.f1,this.nodeName)},selectBGImge(){this.$refs.selectBGImageRef.open({selectBGCallback:e=>{this.lGraphConfig.backgroundImg=e,this.graph.background.draw({image:e,repeat:"repeat-y",size:"cover"})},insertImgCallback:e=>{let t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=t/2,s=a/2,{x:i,y:r}=this.graph.clientToLocal(o,s);(0,D._l)(this.graph,e,i,r),this.$message.success("图片插入成功")}})},removeBGImge(){this.lGraphConfig.backgroundImg="",this.graph.background.draw({image:""})},setRouter(){this.cell.setRouter(this.router)},setConnector(){this.cell.setConnector(this.connector)},changeGrid(){this.isGrid?this.graph.drawGrid({type:"fixedDot",args:{size:10}}):this.graph.drawGrid({type:"fixedDot",args:{size:1}})},statusChange(e,t){let a=t.status.find((e=>e.label===t.selected)),o=t.status.find((t=>t.label===e)),s=new Ea.s;s.editViewChangeData(this.cell,!1,{type:F.g8.complex.value,cases:[{points:[],touchOff:{type:[F.ZT.status.value],status:{[t.label]:a}}}]}),s.editViewChangeData(this.cell,!0,{type:F.g8.complex.value,cases:[{points:[],touchOff:{type:[F.ZT.status.value],status:{[t.label]:o}}}]}),t.selected=e,this.cell.store.data.status=this.nodeAttr.status},cloneDeep(e){return(0,k.cloneDeep)(e)},changePageSize(){let e=this.calculateAspectRatio(this.lGraphConfig.pageSize.width,this.lGraphConfig.pageSize.height);this.pageSizeList.find((t=>t.key===e))?this.lGraphConfig.pageSize={key:e,width:this.lGraphConfig.pageSize.width,height:this.lGraphConfig.pageSize.height}:this.lGraphConfig.pageSize={key:"",width:this.lGraphConfig.pageSize.width,height:this.lGraphConfig.pageSize.height};let t=this.lGraphConfig.pageSize;ve(this.graph,t)},changeTheme(){this.chartsAttr=this.selectNode().cell.prop("charts")},changeAttr(e){let t=this.graph,a=t.getSelectedCells();if(a.length>1)return;let o=a[0];switch(e){case"position":o.position(this.nodeAttr.position.x,this.nodeAttr.position.y,{deep:!0});break;case"size":o.size(this.nodeAttr.size.width,this.nodeAttr.size.height,{deep:!0});break;case"angle":this.nodeAttr.angle>360&&(this.nodeAttr.angle-=360),this.nodeAttr.angle<-360&&(this.nodeAttr.angle+=360),o.rotate(this.nodeAttr.angle,{absolute:!0});break;case"data":o.replaceData({value:this.nodeAttr.data.value});break;case"preserveAspectRatio":o.setProp("preserveAspectRatio",this.nodeAttr.preserveAspectRatio),t.clearTransformWidgets(),t.createTransformWidget(o);break;case"rotate3d":{let e=`rotate3d(${this.rotate3d.x},${this.rotate3d.y},${this.rotate3d.z},${this.rotate3d.a}deg)`;o.setProp("rotate3d",e),o.attr(F.eo+"/style",{transform:e})}break}},bgColorChange(e){this.graph.startBatch("修改背景色"),this.graph.drawBackground({color:e}),this.graph.startBatch("修改背景色")},calculateAspectRatio(e,t){function a(e,t){return 0===t?e:a(t,e%t)}const o=a(e,t),s=e/o,i=t/o;return`${e}*${t}(${s}:${i})`},unhighlight(e,t){let a=this.graph.getCellById(t.id),o=e.findView(a);o.unhighlight(o.container,{highlighter:{name:"stroke",args:{padding:3,attrs:{"stroke-width":2,stroke:"#75d411","stroke-dasharray":"5,5"}}}})},highlight(e,t){let a=this.graph.getCellById(t.id),o=e.findView(a);o.highlight(o.container,{highlighter:{name:"stroke",args:{padding:3,attrs:{"stroke-width":2,stroke:"#75d411","stroke-dasharray":"5,5"}}}})}}},Ao=vo,yo=(0,_.A)(Ao,vt,At,!1,null,"1144ebea",null),wo=yo.exports,_o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"top-container"}},[t("div",{attrs:{id:"group-div"}},[t("div",[t("tool-btn",{attrs:{icon:"svg-edit-zuoduiqi",label:"居左",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pageLeftAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-juzhongduiqi",label:"水平居中",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pageHJCenterAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-youduiqi",label:"居右",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pageRightAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-quanbuliangduanduiqi",label:"居顶",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pageTopAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-quanbuliangduanduiqi",label:"垂直居中",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pagePVCenterAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-quanbuliangduanduiqi",label:"居底",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("pageBottomAlign")}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-shuipingzuoduiqi",label:"左对齐",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("leftAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-shuipingjuzhongduiqi",label:"水平居中",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("centerAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-shuipingyouduiqi",label:"右对齐",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("rightAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-chuizhidingduiqi",label:"顶端对齐",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("topAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-chuizhijuzhongduiqi",label:"垂直居中",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("verticalCenterAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-chuizhididuiqi",label:"底端对齐",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("bottomAlign")}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-shuipingdengjufenbu",label:"水平等距",disabled:e.selectNodeCount<=2},on:{click:function(t){return e.handleCommand("hjAverageAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-chuizhidengjufenbu",label:"垂直等距",disabled:e.selectNodeCount<=2},on:{click:function(t){return e.handleCommand("pvAverageAlign")}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-biaoge",label:"水平并列布局",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("hjAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-biaoge",label:"垂直并列布局",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("pvAlign")}}}),t("tool-btn",{attrs:{icon:"svg-edit-biaoge",label:"田字格布局",disabled:e.selectNodeCount<=1},on:{click:function(t){return e.handleCommand("mattAlign")}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-shouqi",label:"上移一层",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("moveUp")}}}),t("tool-btn",{attrs:{icon:"svg-edit-zhankai",label:"下移一层",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("moveDown")}}}),t("tool-btn",{attrs:{icon:"svg-edit-zhiyudingceng",label:"置于顶层",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("toFront")}}}),t("tool-btn",{attrs:{icon:"svg-edit-zhiyudiceng",label:"置于底层",disabled:e.selectNodeCount<=0},on:{click:function(t){return e.handleCommand("toBack")}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-chexiao",label:"撤销"},on:{click:e.undo}}),t("tool-btn",{attrs:{icon:"svg-edit-zhongzuo",label:"重做"},on:{click:e.redo}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-shijianpeizhi",label:"告警"},on:{click:function(t){e.alarmVisible=!0}}})],1),t("el-divider",{attrs:{direction:"vertical"}}),t("div",[t("tool-btn",{attrs:{icon:"svg-edit-shijianpeizhi",label:"显示事件"},on:{click:function(t){return e.showEventFun(!e.showEvent)}}}),t("tool-btn",{attrs:{icon:"svg-edit-shujuyuan",label:"点位关系"},on:{click:e.pointPre}}),t("tool-btn",{attrs:{icon:"svg-edit-shanchu",label:"清空画布"},on:{click:e.clearGraph}}),t("tool-btn",{attrs:{icon:"svg-edit-tupian",label:"导出图片"},on:{click:e.exportPNG}}),t("tool-btn",{attrs:{icon:"svg-edit-daorushuju",label:"导出图纸"},on:{click:e.exportJSON}}),t("tool-btn",{attrs:{icon:"svg-edit-daorushuju",label:"导入图纸"},on:{click:e.openFilePicker}}),t("tool-btn",{attrs:{icon:"svg-edit-baocun",label:"保存"},on:{click:function(t){e.saveVisible=!0}}}),t("tool-btn",{attrs:{icon:"svg-edit-yulan",label:"预览"},on:{click:e.preview}})],1)],1),t("el-dialog",{attrs:{title:"预览",visible:e.centerDialogVisible,width:"100%",fullscreen:"",top:"0px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?t("preview-pane",{attrs:{svgJSON:e.svgJSON}}):e._e()],1),t("el-dialog",{attrs:{title:"点位关系",visible:e.relationshipVisible,width:"100%",fullscreen:"",top:"0px",center:""},on:{"update:visible":function(t){e.relationshipVisible=t}}},[e.relationshipVisible?t("relationship",{attrs:{svgJSON:e.svgJSON}}):e._e()],1),t("save",{attrs:{visible:e.saveVisible,graphConfig:e.graphConfig,saveForm:e.saveForm},on:{"update:visible":function(t){e.saveVisible=t},afterSaveing:e.afterSaveing}}),e.alarmVisible?t("alarm-config",{attrs:{visible:e.alarmVisible},on:{"update:visible":function(t){e.alarmVisible=t},afterSaveing:e.afterSaveing}}):e._e()],1)},No=[],xo=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",{ref:"containerDiv",staticStyle:{height:"calc(100vh - 120px)"},attrs:{span:20,id:"containerDiv"}},[t("preview-comm",{ref:"previewCommRef",attrs:{svgJSON:e.svgJSON,height:"100%",isPreview:!0},on:{getPointNameStor:e.getPointNameStor}})],1),t("el-col",{attrs:{span:4}},[e.pointNameStor?t("div",{staticStyle:{"overflow-x":"hidden",height:"calc(100vh - 120px)"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{attrs:{"label-width":"110px","label-suffix":":",sizi:"mini",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"随机数"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.valueRandomHander},model:{value:e.isRandom,callback:function(t){e.isRandom=t},expression:"isRandom"}})],1)],1)],1)],1),e._l(e.pointNameStor,(function(a){return t("el-row",{key:a.mpId},[t("el-col",{staticStyle:{"text-align":"center",margin:"10px"},attrs:{span:24}},[e._v(" "+e._s(a.mpName)+" ")]),e._l(a.attrs,(function(a){return t("el-col",{key:a.attrId,staticStyle:{margin:"10px"},attrs:{span:24}},[t("el-form",{attrs:{"label-width":"110px","label-suffix":":",sizi:"mini",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:String(a.attrName)}},[t("el-input-number",{attrs:{step:.1,size:"mini"},on:{change:function(t){return e.changeData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"attr.value"}})],1)],1)],1)}))],2)}))],2):e._e()])],1)],1)},Mo=[],To=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingBean.isLoading,expression:"loadingBean.isLoading"}],ref:"containerDiv",staticClass:"container_div",style:{height:e.pageHeight,"background-image":`${e.graphConfig.backgroundImg?"url("+e.graphConfig.backgroundImg+")":e.graphConfig.backgroundColor}`},attrs:{"element-loading-text":e.loadingBean.text,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("div",{staticClass:"connect-div",style:{color:e.graphConfig.backgroundColor}},[t("div",[e._v(" 连接状态"+e._s(e.targetScale)+"：")]),t("div",{staticClass:"breathe-div",class:{connect:e.isConnect||e.isPreview},style:{background:e.graphConfig.backgroundColor}})]),t("div",{staticClass:"back-btn"},[e.historyStack.length>1?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.backHistoryStack()}}},[e._v("返回上级")]):e._e()],1),t("el-button",{staticStyle:{position:"absolute",top:"30px",right:"20px","z-index":"999"},attrs:{icon:"el-icon-location-information",type:"success",circle:""},on:{click:e.resizeFun}}),t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"preview-container"}}),t("event-action",{ref:"eventAction",attrs:{svgId:e.currentSvgId,graph:e.graph,datas:this.previewData,isPreview:e.isPreview},on:{dataChange:e.eventDataChange,toSvgPage:e.toSvgPage}}),t("alarm",{ref:"alarmRef"})],1)},ko=[],Do=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tooltip",staticStyle:{background:"#04042a73",border:"1px solid #040e95","border-radius":"2px",padding:"5px"},attrs:{"element-loading-text":"拼命发送中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.showPopper?t("el-form",{ref:"form",attrs:{size:"mini","label-width":"auto"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.notButtonActions,(function(a,o){return t("el-form-item",{key:o,staticStyle:{"margin-bottom":"0px"}},[t("div",{staticStyle:{color:"#00c400"},attrs:{slot:"label"},slot:"label"},[e._v(e._s(a.title)+":")]),a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("div",{staticStyle:{color:"white"}},[e._v(" "+e._s(a.value)+" ")]):a.type===e.EVENT_SETDATA_TYPE.input.value?t("el-input",{on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):a.type===e.EVENT_SETDATA_TYPE.integer.value?t("el-input-number",{attrs:{precision:0},on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):a.type===e.EVENT_SETDATA_TYPE.decimal.value?t("el-input-number",{attrs:{precision:a.point.decimal,step:.1},on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e()],1)})),e.buttonActions&&e.buttonActions.length>0?t("el-form-item",[t("div",{staticStyle:{color:"#00c400"},attrs:{slot:"label"},slot:"label"},[e._v("按钮控制:")]),t("el-button-group",e._l(e.buttonActions,(function(a,o){return t("el-button",{key:o,attrs:{size:"mini",type:"primary",disabled:e.isDisabled(a)},on:{click:function(t){return e.setData(a)}}},[e._v(" "+e._s(a.title)+" ")])})),1)],1):e._e()],2):e._e()],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,center:"",fullscreen:e.fullscreen,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClosed}},[e.dialogVisible&&e.actionType===e.EVENT_ACTION_TYPE.data.value?t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{size:"mini","label-width":"auto","element-loading-text":"拼命发送中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e._l(e.notButtonActions,(function(a,o){return t("el-form-item",{key:o},[t("div",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(a.title)+":")]),a.dataActionType===e.EVENT_DATA_ACTION_TYPE.showdata.value?t("div",[e._v(" "+e._s(a.value)+" ")]):a.type===e.EVENT_SETDATA_TYPE.input.value?t("el-input",{on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):a.type===e.EVENT_SETDATA_TYPE.integer.value?t("el-input-number",{attrs:{precision:0},on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):a.type===e.EVENT_SETDATA_TYPE.decimal.value?t("el-input-number",{attrs:{precision:a.point.decimal,step:.1},on:{change:function(t){return e.setData(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e()],1)})),e.buttonActions&&e.buttonActions.length>0?t("el-form-item",[t("div",{attrs:{slot:"label"},slot:"label"},[e._v("按钮控制:")]),t("el-button-group",e._l(e.buttonActions,(function(a,o){return t("el-button",{key:o,attrs:{size:"mini",type:"primary",disabled:e.isDisabled(a)},on:{click:function(t){return e.setData(a)}}},[e._v(" "+e._s(a.title)+" ")])})),1)],1):e._e()],2):e._e(),e.dialogVisible&&(e.actionType===e.EVENT_ACTION_TYPE.internet.value||e.actionType===e.EVENT_ACTION_TYPE.intranet.value)&&e.iframeUrl?t("iframe",{staticStyle:{border:"0",width:"100%",height:"calc(100vh - 51.62px - 60px)"},attrs:{src:e.iframeUrl,frameborder:"0"}}):e._e()],1),t("history-data",{ref:"historyDataRef"})],1)},Co=[],Eo=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"历史数据",visible:e.visible,width:"60%","append-to-body":"","before-close":e.handleClose}},[e.visible?t("div",[t("el-form",{staticClass:"ele-form-search",staticStyle:{"margin-bottom":"5px"},attrs:{"label-width":"77px",size:"medium"}},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"测量点:"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"","value-key":"mpAttrId",placeholder:"请选择"},model:{value:e.where.mps,callback:function(t){e.$set(e.where,"mps",t)},expression:"where.mps"}},e._l(e.mps,(function(e){return t("el-option",{key:e.mpAttrId,attrs:{label:e.mpAttrName,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{label:"数据时段:"}},[t("el-date-picker",{attrs:{clearable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.where.dateTimes,callback:function(t){e.$set(e.where,"dateTimes",t)},expression:"where.dateTimes"}})],1)],1),t("el-col",{attrs:{span:5}},[t("div",{staticClass:"ele-form-actions"},[t("el-button",{staticClass:"ele-btn-icon",attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:e.reload}},[e._v(" 查询 ")]),t("el-button",{attrs:{loading:e.loading},on:{click:e.reset}},[e._v("重置")])],1)]),t("el-col",{attrs:{span:4}},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[t("el-radio-button",{attrs:{label:"chart"}},[e._v("图表")]),t("el-radio-button",{attrs:{label:"table"}},[e._v("列表")])],1)],1)],1)],1),t("ele-pro-table",{directives:[{name:"show",rawName:"v-show",value:"table"==e.showType,expression:"showType == 'table'"}],ref:"table",attrs:{needPage:!1,datasource:e.datasource,columns:e.columns,height:500,where:e.where,initLoad:!1,response:{dataName:"data"},"cache-key":"systemLoginRecordTable"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"chart"==e.showType,expression:"showType == 'chart'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("v-chart",{ref:"historyDataChart",staticStyle:{height:"323px"},attrs:{option:e.historyDataChartData}})],1)],1):e._e()])},Oo=[],Io=a(25600),So=a(50771),Po=a(16174),jo=a(63793),zo=a(74468),Lo=a(50124),Fo=a(85047);(0,Io.Y)([So.a,Po.a,jo.a,zo.a,Lo.a]);var Ro={name:"HistoryData",components:{VChart:Fo.Ay},inject:["webtopoAPI"],data(){let e=new Date,t=new Date(e.getTime()-864e5),a=e,o={mps:[],dateTimes:[t,a]};return{visible:!1,loading:!1,showType:"chart",mps:[],defaultWhere:o,where:{...o},dataList:[],columns:[{columnKey:"index",type:"index",width:45,align:"center",showOverflowTooltip:!0,fixed:"left"},{prop:"mpName",label:"测量点",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"attrName",label:"属性名",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"realData",label:"实际值",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"datadatetime",label:"时间",sortable:"custom",showOverflowTooltip:!0,minWidth:110,formatter:(e,t,a)=>this.$util.toDateString(a,"yyyy-MM-dd HH:mm")}],pickerOptions:{shortcuts:[{text:"最近一天",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}],disabledDate:e=>{const t=new Date;return t.setHours(0,0,0,0),e.getTime()>t.getTime()}}}},computed:{historyDataChartData(){let e={},t={};this.dataList.forEach((a=>{let o=a.datadatetime,s=e[o];s||(e[o]=s={});let i=`${a.mpId}.${a.attrId}`;s[i]=a.realData;let r=t[i];r||(t[i]=r=`${a.mpName}.${a.attrName}`)}));let a=[],o=Object.keys(e).sort();for(let[s,i]of Object.entries(t)){let t=[];for(const a of o){const o=e[a],i=o[s];void 0===i?t.push(null):t.push(i)}a.push({name:i,type:"line",smooth:!0,symbolSize:8,areaStyle:{opacity:.5},data:t})}return o=o.map((e=>this.$util.toDateString(Number(e),"yyyy-MM-dd HH:mm"))),{color:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86"],tooltip:{trigger:"axis"},legend:{data:Object.values(t),right:20},xAxis:[{type:"category",boundaryGap:!1,data:o}],yAxis:[{type:"value"}],series:a}}},methods:{showHistory(e){let t,a=e.getProp(F.sD);if(t=F.jM.echarts===a?e.prop("formulas/points"):e.getPoints?.(),t?.length){let e=[];t.forEach((t=>{let a=`${t.mpId}.${t.attrId}`,o=e.find((e=>e.mpAttrId===a));if(o)return;let s=se.A.getPointName(t.mpKey),i=se.A.getAttrName(t.mpKey,t.attrKey);e.push({...t,mpName:s,attrName:i,mpAttrName:`${s}.${i}`,mpAttrId:a})})),this.mps=e,this.where.mps=[e[0]],this.visible=!0,this.$nextTick((()=>{this.reload()}))}},handleClose(){this.visible=!1},reset(){this.where={...this.defaultWhere,mps:this.mps[0]},this.reload()},async datasource({where:e}){if(!e.mps)return{data:[]};let t=e.mps.map((({mpId:e,attrId:t})=>({mpId:e,attrId:t})));this.loading=!0;let a=await this.webtopoAPI.getCaptcha({mps:JSON.stringify(t),startTime:e.dateTimes[0]?Math.floor(e.dateTimes[0].getTime()/1e3):void 0,endTime:e.dateTimes[1]?Math.floor(e.dateTimes[1].getTime()/1e3):void 0}).catch((e=>{this.$message.error(e)}));this.loading=!1;for(let o in a.data)a.data[o].forEach((e=>{let t=e.mpId,a=e.msType,o=this.mps.find((e=>e.mpId==t&&e.attrId==a));e.mpName=o.mpName,e.attrName=o.attrName,e.attrId=e.msType}));return a.data=Object.values(a.data).flatMap((e=>e)),this.dataList=a.data,a},reload(){this.$refs.table.reload({page:1,where:this.where})}}},Bo=Ro,Uo=(0,_.A)(Bo,Eo,Oo,!1,null,"01b7b9d6",null),Ho=Uo.exports;let $o={};var Yo={name:"EventAction",inject:["webtopoAPI"],components:{HistoryData:Ho},props:["graph","datas","isPreview","svgId"],data(){return{showPopper:!1,actions:[],actionType:"",formType:null,reference:null,currentEvent:null,dialogTitle:"",dialogVisible:!1,fullscreen:!1,instance:null,iframeUrl:"",EVENT_ACTION_TYPE:F.x9,EVENT_DATA_ACTION_TYPE:F.g7,EVENT_SETDATA_TYPE:F.lk,loading:!1}},computed:{notButtonActions(){return this.actions.filter((e=>e.type!==F.lk.button.value))},buttonActions(){return this.actions.filter((e=>e.type===F.lk.button.value))},setDataActions(){return this.actions.filter((e=>e.dataActionType===F.g7.setdata.value))}},watch:{graph(e){e&&this.init()},datas:{handler(){(this.showPopper||this.dialogVisible)&&this.executeEvent(this.currentEvent,!0)},deep:!0}},methods:{initCellEvent(){$o={};let e=this.graph.getCells();e.forEach((e=>{let t=e.getProp("events");if(t?.length){e.attr("super-group-node/cursor","pointer");let a=(0,k.groupBy)(t,(({eventType:e})=>e));for(let[t,o]of Object.entries(a)){let a=$o[t];a||($o[t]=a={}),a[e.id]={cell:e,events:o}}}}))},init(){this.graph.on("cell:click",(({cell:e,view:t})=>{this.showPopper=!1;let a=$o[F.cP.click.value]?.[e.id];if(a&&a.events)return this.reference=t.container,a.events?.length?void a.events.forEach((e=>{this.executeEvent(e)})):void 0})),this.graph.on("cell:contextmenu",(({e:e,cell:t,view:a})=>{let o,s=t.getProp(F.sD);o=F.jM.echarts===s?t.prop("formulas/points"):t.getPoints?.();let i=[];o?.length&&i.push({label:"历史数据",onClick:()=>{this.$refs.historyDataRef.showHistory(t)}});let r=$o[F.cP.rightClick.value]?.[t.id];this.reference=a.container,r?.events?.length&&r.events.forEach((e=>{i.push({label:e.menuTitle??e.title,onClick:()=>{this.executeEvent(e)}})})),i.length&&this.$contextmenu({items:i,customClass:"menu-class",event:e.originalEvent,zIndex:99999})})),this.graph.on("cell:mouseenter",(({cell:e,view:t})=>{let a=$o[F.cP.mouseenter.value]?.[e.id];a&&a.events&&(this.reference=t.container,a.events.forEach((e=>{this.executeEvent(e)})))})),this.graph.on("cell:mouseleave",(()=>{this.setDataActions&&0!=this.setDataActions.length||(this.showPopper=!1)})),this.graph.on("blank:click",(()=>{this.showPopper=!1}))},executeEvent(e,t){if(e&&(!t||e.actionType===F.x9.data.value))switch(this.currentEvent=e,this.actionType=e.actionType,this.formType=e.formType,this.fullscreen=e.fullscreen??!1,e.actionType){case F.x9.intranet.value:this.intranet(e);break;case F.x9.internet.value:this.internet(e);break;case F.x9.data.value:this.dialogTitle="数据管理",this.ssdata(e);break;default:break}},ssdata(e){if(e.actions)if(this.actions=e.actions.map((e=>{if(e.type===F.Ue.text.value)return e;if(e.type===F.Ue.variable.value)return""===e.point?.mpId||void 0===e.point?.mpId?{title:e.title,value:"未绑定点位",dataActionType:e.dataActionType,type:e.type}:this.getDataValue(e);if(e.type===F.Ue.state.value){if(""===e.point?.mpId||void 0===e.point?.mpId)return{title:e.title,value:"未绑定点位",dataActionType:e.dataActionType,type:e.type};let t=this.datas[`${e.point.mpId}.${e.point.attrId}`],a=e.texts?.find((e=>e.value==t));return{title:e.title,value:a?.text??t,dataActionType:e.dataActionType,type:e.type}}return e.type===F.lk.button.value?e:e.type===F.lk.integer.value||e.type===F.lk.decimal.value||e.type===F.lk.input.value?""===e.point?.mpId||void 0===e.point?.mpId?{title:e.title,value:"未绑定点位",dataActionType:e.dataActionType,type:e.type}:this.getDataValue(e):void 0})),e.formType===F.fF.tooltip.value){this.showPopper=!0;let e=this.$refs.tooltip;this.instance&&this.instance.destroy(),this.showPopper=!0,this.instance=(0,S.n4)(this.reference,e,{placement:"top"})}else e.formType===F.fF.dialog.value&&(this.dialogVisible=!0)},intranet(e){let t=`/#/spreview?id=${e.blueprint.id}`;e.formType===F.fF.dialog.value&&(this.fullscreen=!0,this.iframeUrl=t,this.dialogVisible=!0,this.dialogTitle="图纸"),e.formType===F.fF.present.value&&this.$emit("toSvgPage",e.blueprint.id),e.formType===F.fF.newtab.value&&window.open(t,"_blank")},internet(e){e.formType===F.fF.dialog.value&&(this.fullscreen=!0,this.iframeUrl=e.url??"",this.dialogVisible=!0,this.dialogTitle="内容展示"),e.formType===F.fF.present.value&&(window.location.href=e.url),e.formType===F.fF.newtab.value&&window.open(e.url,"_blank")},isDisabled(e){let t=this.datas[`${e.point.mpId}.${e.point.attrId}`];return e.value==t.value},setData(e){this.loading=!0,this.initName(e);let t=this.$notify.info({title:"控制消息",position:"top-left",message:`修改【${e.point.mpName}-${e.point.attrName}】为:\n          【${e.type===F.lk.button.value?e.title:e.value}】`});this.isPreview?setTimeout((()=>{let a={};a[`${e.point.mpId}.${e.point.attrId}`]={...e.point,value:e.value},this.$emit("dataChange",a),this.loading=!1,t.close(),this.initName(e),this.$notify.info({title:"控制消息",position:"top-left",message:`修改【${e.point.mpName}-${e.point.attrName}】为:\n              【${e.type===F.lk.button.value?e.title:e.value}】成功`,type:"success"})}),1e3):this.webtopoAPI.setData({id:this.svgId,mpId:e.point.mpId,attrId:e.point.attrId,value:e.value}).then((()=>{t.close(),this.initName(e),this.$notify.info({title:"控制消息",position:"top-left",message:`修改【${e.point.mpName}-${e.point.attrName}】为:\n                【${e.type===F.lk.button.value?e.title:e.value}】发送成功`,type:"success"})})).catch((e=>{t.close(),this.$message.error(e)})).finally((()=>{this.loading=!1}))},getDataValue(e){let t=this.datas[`${e.point.mpId}.${e.point.attrId}`]?.value;return void 0!=e.point.multiplier&&(t=this.multiplier(e.point.multiplier,t)),void 0!=e.point.decimalNum&&(t=this.decimalNum(e.point.decimalNum,t)),void 0!=e.point.unit&&""!=e.point.unit&&(t+=" "+e.point.unit),{title:e.title,value:t??"",dataActionType:e.dataActionType,type:e.type,point:e.point}},initName(e){e.point.mpName||(e.point.mpName=se.A.getPointName(e.point.mpKey)),e.point.attrName||(e.point.attrName=se.A.getAttrName(e.point.mpKey,e.point.attrKey))},multiplier(e,t){return isNaN(t)?t:t*e},decimalNum(e,t){return isNaN(t)?t:t.toFixed(e)},dialogClosed(){this.actions=[]}},destroyed(){this.instance&&this.instance.destroy(),this.actions=[]}},Wo=Yo,Go=(0,_.A)(Wo,Do,Co,!1,null,null,null),Qo=Go.exports;class Ko{constructor(){this.pointStor={},this.pointNameStor={}}init(e){this.pointStor={},this.pointNameStor={};let t=e.getCells();t.forEach((e=>{let t=e?.store?.data?.formulas;t?.cases&&t?.cases.forEach((t=>{t.points&&this.addNode(t.points,e)})),void 0!==t?.format?.point?.mpKey&&""!==t?.format?.point?.mpKey&&this.addNode([t.format.point],e);let a=e?.store?.data?.events;a&&a.forEach((t=>{t.actions?.forEach((t=>{t.point?.attrKey&&this.addNode([t.point],e,!1)}))}));let o=e.prop("formulas/points");if(o?.length&&this.addNode(o,e),e.propAlarm){let t=e.getAlarmPoints();t?.length&&this.addNode(t,e)}}))}updateData(e){for(let[t,a]of Object.entries(e)){let e=this.pointStor[t];e&&e.forEach((e=>{let o={};o[t]=a,e.replaceData(o)}))}}addNode(e,t,a=!0){if(e&&e.length){this.pointNameStor;for(let[,o]of Object.entries(e)){if(a){let e=`${o.mpId}.${o.attrId}`,a=this.pointStor[e];a||(this.pointStor[e]=a=[]);let s=a.find((e=>e.id===t.id));s||a.push(t)}let e=this.pointNameStor[String(o.mpId)],s=se.A.getPoint(o.mpKey,o.attrKey);e||(this.pointNameStor[String(o.mpId)]=e={mpId:o.mpId,mpName:null===s?.mpName||""===s?.mpName||void 0===s?.mpName?o.mpId:s.mpName,attrs:{}}),e.attrs[String(o.attrId)]={...o,attrName:null===s?.attrName||""===s?.attrName||void 0===s?.attrName?o.attrId:s.attrName,value:0}}}}setData(e,t){let a=this.pointStor[e];a.foreach((e=>{e.replaceData({pointName:t})}))}getPointStor(){return this.pointStor}getPointNameStor(){return this.pointNameStor}clear(){this.pointStor={},this.pointNameStor={}}}var Jo=function(){var e=this,t=e._self._c;return t("div",[e.showMsgLength>0?t("div",{staticClass:"marquee-container"},[t("div",{staticClass:"marquee-content",style:`animation-duration:${15*e.showMsgLength-12*(e.showMsgLength-1)}s`},e._l(e.errorMsg,(function(a,o){return t("span",{directives:[{name:"show",rawName:"v-show",value:a.isRolling,expression:"item.isRolling"}],key:o},[t("span",{style:{color:a.level.color}},[e._v(" "+e._s(a.level.name)+" ")]),e._v(" "+e._s(a.msg)+" ")])})),0)]):e._e(),t("div",{attrs:{id:"model-btn"}},[t("el-button",{on:{click:function(t){e.drawer=!0}}},[e._v("告警")])],1),t("el-drawer",{attrs:{title:"告警",modal:!1,visible:e.drawer,direction:"btt",size:400},on:{"update:visible":function(t){e.drawer=t}}},[t("div",{staticClass:"msg"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:Object.values(e.errorMsg),size:"medium","max-height":"350"}},[t("el-table-column",{attrs:{label:"告警级别"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{style:{color:a.row.level.color}},[e._v(" "+e._s(a.row.level.name)+" ")])]}}])}),t("el-table-column",{attrs:{label:"发生时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(" "+e._s(e.toDateString(a.row.date))+" ")])]}}])}),t("el-table-column",{attrs:{prop:"point.mpName",label:"测点",width:"180"}}),t("el-table-column",{attrs:{prop:"max",label:"最大值"}}),t("el-table-column",{attrs:{prop:"point.value",label:"当前值"}}),t("el-table-column",{attrs:{prop:"min",label:"最小值"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[a.row.isVoice?t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleMute(a.row)}}},[e._v(" 静音")]):e._e(),a.row.isRolling?t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleRolling(a.row)}}},[e._v(" 停止滚动")]):e._e()],1)]}}])})],1)],1)]),t("audio",{ref:"audioRef",staticStyle:{display:"none"},attrs:{controls:"",loop:!0,src:"data:audio/mp3;base64,SUQzBAAAAAACClRJVDMAAAAhAAADw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUQUxCAAAAIQAAA8OVwr7Cs8Kkw4vDmMKyw4Qoc2MuY2hpbmF6LmNvbSkAVFBFMQAAACEAAAPDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRJVDIAAAAhAAADw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUQ09OAAAAIQAAA8OVwr7Cs8Kkw4vDmMKyw4Qoc2MuY2hpbmF6LmNvbSkAVERSQwAAAAYAAAMyMDE2AFRTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAABUAAA/wAAGCQwPEhUVGBseISQkJyotMDMzNjk8P0JFRUhLTlFUVFdaXWBjY2ZpbG9ycnV4e36BhISHio2Qk5OWmZyfoqKlqKuusbG0t7q9wMPDxsnMz9LS1djb3uHh5Ofq7fDw8/b5/P8AAAAATGF2YzU4LjkxAAAAAAAAAAAAAAAAJAJ8AAAAAAAAP8BU+GMwAAAAAAAAAAAAAAAAAAAA//OEZAAAAAGkAAAAAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAAAAAAAAAAAAAAAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAEn4f////////ppppl8e49ymYCXiZjnPkgMIIwQB3hPAvA8C4PQOQFoIIRcA//OEZFQAAAAAAAAAAAAAAAAAAAAAEQAHgNgeCCCy+63WnQQ0031IIIJpputOgxggAOzf/ACcPDw///zA/8w8eANrQB////////+gghWmmm6ai4aE8S8L2Rw5ADnBCxlkwehot0C+X0+z//+t///zn/miZXQb//YiZgaf/y+aYeoHXC3sA4f/0jQkEjQghqbwIDAcQAJjgMlwNMGByoBoCA0LD1//7N9uFlgWYA0xANUhy4yYN5AwoBpBQtI0x3////OEZNgK9SR6DqA0AIsJvTwfQGgC///4hAI0AygAXo7xYhHg54coP4yY7zMiYnNX//////+mTiI//////m6m//61If/1OyYthXIIJL/zpXHGr4GLSgNOwYLKpXGQdic////IeRMOXLxoSJBy4kyZr/////kXcaZ4v3YkD5cLjSJoKgaAAAAACkSGd9uCwAwAgIOeF///Kh6erUjqUWR6Yn58ZeYnX+MBLTM3YjjIc4mY7/+ycp/RMct/GIF4A8yQ//OEZP8O+fcEAMBQAJIbMhQBgKAAPFwvz6h3EKryos8tlo9MwY0Mz5fOGiCKaf////kkShIF0lzpeJQ4eP///////y+HkflzwwAIAInIiAANSZ4V88z/9A0b//HI2Zo6YyT31lRQjNHQHWOi1FqrczTN2//1ppvdVf/iqK3SRk4WiairZCkQG84jsTkfztQolRnofr4T5siuaYGGunqWJSiEiuqZcSc7Wy3q+ugtJZy69SaCl9FCdq////FYFWAK//OEZOkOEcd5j8E1EQ4Rzo25h2gCsgN/RkDJYWAxiFguv////C0j//IX8TX8f/x+/LJF/yL/i5S3/xxl2c/OkX/////+s9z+gL0BcEv+ZUhDJpEhpBmWkCJ8w0gNoEzNigaIGU9zumg6WnW9Gpp8/L3OnzucO////wYIAxAkD9VIMEVNqwfxvoxnVqbev2RGdCuzK9lVqkh5ZWN1OyPHhuPpHj95K+fPmNmYn00nmVvdz99LMzPHT6eSdilYJZnh//OEZOsOcetDjOfUAA6JlkjhyaAAZIqWv///gYBYAWAYBaAWgYDoAWAYM2CDAaD2CDgYPEA6AYF+BfAYBYAWgYBaAWf/+EQd4RBwRBwGDwcBr0d/hEH/hhgBhf8AUYgCDALrfBsGfgChYGBb8GC3/+ETp/4GLBaKvFX+BhAACr//FZ/xV/IqWvlkiod4HkxI/neoUxuaygnJuhcjP8+fPsIjytwTTQoXvRoUL+5/TRoP+/pokCJybkkb0aJ3//CK//OEZOgWZesiAD71xBA5mkAASCmA0IrAPp1Bi0DWrQYtmu/t2uvAQy1LEsmoug0voVjVOkDlUkvSlKZE6FrC8LTRRToxK5bYZ8saOgcRexf1u+ey3nH///+pOsjAiNAxSYjBbTZnb///QUQ9/2/f89//W/1t/+tBv+cqRt6ymT2hv4ZNmh3+/1wAhfzF6OGx4C3ZXDK5StfxRHZupQ+hvBpMw1g+nmzQqf////rBv/8r0HrbttrdwAI8c6EPm6hS//OEZJ8MSaNZLjDUXQupkrb6QEsqLEcVBMjHBEmg215j8NaulZKL1mjuGfIVS61fdYCFiQg4ZRw0f///0FHibjLgOEAfg+HvmQoAnC43///WQ79X63bzi/1f3+v+351v+tB0/5xS0W0WwAADNNwDw+Zkxzmf+R4a2E3RHcy0BAAwgFJA/+rr////i/qec7Nf8zVpmZCQgIcgG4cWOqkItiC/v+ioyn/tPI5GEgXdq//////3tN1eEl4SUm0EQG48//OEZLkLwaFVLiR0lQsZnq5cCBlqODQ8HA3KBoSH5RhCFjxRRdhQoULFyDCx5A8UUXYUU+BeDA8QPHmFuiX3UAADAG71eQEBjSuQ9cv1f//usc5SAyBFk8R4LALWThKD///9H/k1EkPmXySvUKpXaaUREkgEcK4OUiNstPku/wvPrl6oPi6Fifm5d0uHMun544dP5cPl7OnjmfL8vT5xNamRRSVPIfOnfn//4RABhCB8CBh4BhCBhCB8CEQAYQBE//OEZNkKvW99gwgIp4wxorJaEBrWIMB//wiD/gYQQMAQiADCAIgBgQiEGACIIGAMDCCBhBAwBgYQYRAjM8PDMzX0AkC73cTH9nYcQCwtU84GC4/zOSg6x52ozeTyW2yRJWcqkHfVfv//EQBHGGxg8O3//+3ySP//////f7+5dK4EyOOSSSSSSSIkGegSmyBENmlZz3VzzKssw53POvnHTTqHM5yrNfOPPsxjGzXVqWMzDnV0PTqhhDNqac/Q9vYJ//OEZP0PBTM9PKZMABEporsfRigCYfh4OHk/nf/ZZ9GarTB5vyBqLT7z7Zq3N/zMeOJlC6KABAKLZbbbbtbW1KgCAPwr28KIc76K7vdpC2W1vQx3WtGZmkF1O5WVjUyzqlT9/OPLT/RvwgCBEXOKKd//LM12SjOjEIdCM8UOHv/+UL0DpBAMiIf////////9BCe7okiO78wHAMgFsHgXEDA0L5sAzwpC6XTJJ3TC+hYq+Ocvk8kx5iMEpEwGEHgP//OEZOsMEXtNLsCoABNKZr5fgSgCdRkiigiYl1JNFL/8hMI2JeJ2OwxNwvA7CBUxm5eLyLGSJdRsj///y+cLn8ufL58v1Aq7rwMAIAwEEQLB/////////+C//wIEMAAcaBJf+Yr/VGMxUVWm//wXxY5t///zhMPHD58nzwCblgZcAw45btbGAPnqvVmZQQq4iw54a6QmIqqKFYN4s3R3luFBDuIuM8I/GfTUTJEyeIMYjfHSL4oHUCiUlqLDm1M0//OEZOgORb9sC8A0AQ36UsgfgBAAQPMitFOt1P////xcwlQC5RA3+fgAiKCIQi5Yub///Pnzgj0///Lf44//5bLX//+Qv/j//5YGsblfAdKwgBYkXNktkz7FOo8XiiZnS6O1NetdI+vRO2RW1mT2Wtv////ioCdiuKgr////CgmPRApWzy7SbAC0g8IR9jLXgGpQglnubToNKGSzDBVTSnyau4y0pqUnF6Yw1qOQoQTxpBWbP//xBYDDBBA94hAY//OEZOkOaaFJLOfUAQ4JnoGxwWgCGQMFAsYoxBi///+eBu4hPj/+ol+0si4lIekpuolS1+XfnPnC4LT/PY7HWv+RX+gLgb8b7Dm/VC6Rw8VySzoiBYXGC4oLdR89ACLVHbiKm2L////gwQDBGDJ/////hFH///h5A88O266RSADtVh6DHbuqLD2WQM0ackacgytdR9ryUT0aK7bH3rdVW2c4xp2KeY35/+MSIKBeIGCmQBqCugYZBYEieLsYoxP///OEZOgNgaNDLCAVwA16WkzAQGkM/84OkdwNlkJ/+dIXOF4vHQ6T8uHPjoP/JT/+OcKyS//HOapvrJc7/0cHAnq5hYJncMCOU7joVWA4IAghgPB/wcF/zOIQMrssb//CJBCJACJBBj+BhBBhB///+N2AUDgYHgYH1QpFPqToH/bxCjQSgWYR5gUEZaCFbYnZ2iciczD7x43lX+JckyfMMqB3YUp/v/V/yyRcsjjEcEIA4BAYZBIH6SUA0HQbPgYJ//OEZPEN1aE/LBgVwA6qBkQAECuACYIgmWstf//Onhywv5OHv/LJb+WBwy35Fi18ixa+Pxa/HF+J4IsWv8ckvlz+cLQUkqgKoD9EaGxH0hIGLWLaQy+ioSnHOcdT7PmCUm///00ipUydnK4EaAjYguLv///84XTx/l84XDhE1XAD549/zk/8bn8/z85Pzpw6fPlw6fOT86ePnY3hujcG6N8b43hQY3Bu////hENYRDYRKQGUn6BsQpAZSDYGGw2D//OEZPIOvaFDHCR1eQ5CInJQGGS4A0BhsNf///1GlG1OUVEV0VFG0VVGgigRc1KCqywpFVTlTlThFcKKFTpHFyUkkkC5CR6RxclJJnCR7OEj0jUknxfNJAuWkYm2zpnT5M7RUAN8IgImEYIwRwDcCJCIhHCNCJCIhHCMEf/////////nTh09+XC+XC+cLpygAcDAAAAb/y07uz/////msQ6fo/////uxyGXZfH+ODgAwKMPB/Bcf////+QAYqaBx//OEZO4Xugs+eVcN8w1KqqX+CAR4soJjL9EKVgJDWSSIyoSimU4R4KC9asWr10C9AXIBSEkSilGvlfFHFGvmJdHyXJUlyWJco3Ug6DTs6enZw5OnZ2dz5z//wNGiBiMDRIwiiAORgZAiAaQCJELIAsjDzBZF//hGAOYCMhGAZMDmIHEhGMGSBxIHMBGQjIRgIyDIBkgyIRkIwEYBkgyAjHwOYwOJ8Iz+HnDyh5A8geWHn///86dLpenD544dO+cP//OEZKYU/bEowDKSmg+qplTAEBuEnjikOBDABHgIPQyKcYcGDMEMzvVeD/VL/j/otfSIKMQ8d////////g0gC6DRwa/g0A1+I7//WVW4YRGFVTr/2IUZerAmFCgQUhRiZ4RXAwAC3fd6ZUzIsbAAQCDA5CVtzaAZg5DoAYWUT+pb1Rc2eJsOfWMdaOFbNxbU7etR6mLIVuoLPQvrOMtvBlh77GyjHt2a3vwcZhQy3UqxgOGdi6wok3ZoIYGONAwQ//OEZGoK4Mc2wQwjphJimlTAEBskOCBAlKsrWy/V0+3PT5z/npd8+d///zvz39X1V1fvUttbgC9//yoEK/UvCjxW0fhwigjFgvihxRf2UDr26XdVkd0WEEDQ7/oYQUQJFM89ntzJU+9oyN7o1jMZQjl4CJKB4VXLtLXjwZVaxiqjaoq67InbNXuT9UtRbN//0Sv+LnwPEyYhCu57YUvITBBti/f5ACJi5Xd8AgsYFccOl1XiVzGq9FDD2LTYAeqo//OEZHQKCI00wRgjkg/w5lwICERcomdWq7fm3r1s27KHOi1mr007dsVpFlN6c8+lKiqEApkYkoElEFiwsqFgUOGHrQl/odo4XGPAqWkjgRAu8wk1ul9csdJ0Jcq00KoSYFkrI4eBpOuWJUIeiJFBcs9bkhNqxpwkkDNUHLipkHkTZZjLHfp9iMUQ2tAqrSLZjV76K31FTrGrppuWhR9qdKNPTLPi6McLqg4WPWlRQmNqpQDffHM7uJqM4IY2vIcc//OEZI8GiAE4ZARCABC4AmCgCES4HlERgwCFzgABGKsPCsIC4Jrl5tLRQFzn/cFhKSuFFRGhOKZ9Dyqtn/////FbErYt9qq1gN4ADXljYoSgZ4UKFRy1A0AUm11HMsxwke2eP2ihIZ/9b6e+lNTdSutak/XN9FMo+o3sejVF99jyzFpFdM6p1tC01RHpX3WaJwrGDKRRs7QwE5pKS44kGQeLPPOE4eNA4EjXr1FTYhPuDhDX8YJDYPxRo+RJuflV//OEZMIJRDU9GgRjAhCAWmGAAEQARry3/+NHvOBJRtxpT/RV6Ufs49DDFjNeyDa63SWwQCSuM0Mzb4rdlilnBZhMclctqHVvMJGHHnNcvDop/xZh85A66////6FJ3aXf/0eh6roONGaxRsTIkzDLL4DFvpA0qjmIUUe5I8xmKo1yZa+SJkyaiyySx0uvr4fBxTignQHUTWys8P/OLxgWBgsYYGAA8Fgo2CBRwEH6K1l62RKTLc7v160MhfR7Px////OEZOAJsDc/GgDDBA/ggrJeCAYCGxseNjgvj4P/B/B/wcF7gNZLuvceoQTUQA+CAQYOih6DBEhZRLDwEYGAJrNyMPPUvJCRRk422IwFk5YTL/+DxKHSQ4ciEnIQJGKLAJUJ1P958DzP/////7mWiFlt1iFKAMDaHZbh6LSOIhCJvZMIrFjGul5sCCiyfWuMtOH5R5RyW4w9o7n4lySC7eG1KH4fQOeFw0tInCTW3sKonjaEPVYQF6UgrMoMPV1Y//OEZP4NLcEsYBhilhJBgl2AEET0rXsPqYlryrmqiz/XoY1WadqzyhBJbplIV0AAUNBeGHGD45EkWnl1u7+EeVKS5KZZzTLEFwgKulHTpCeaXUiq+sJCYTSQGDRZ2xitAoi7sHbLumxTf8Ud//9X/0rqEkUlGYmqYBJ+1FoZZ6iRPYRJ9ZRppLhXJtnwqrIjJN5XLWWTWyIzPRmMRruxHgxhoMBwUYGMDHgh+PHxh9mauuyodl3o1Hv1abNsv4MH//OEZPYMVJ0xECTDPBEo4l2AAEYA+C+OPBDKjta1jq5VNcB00GkOQyhTNR9BCtSNXHiTEM+BepzDyRAJuyWxCo0O96JH4EMgSoPpvXfSoVcpIVYwWFm3d7kMVQu1AoOdErWj2bk0WecalLRTmlt2XW0W0mLvEZftY/boCBBwixxFZS0yAWQ1NNdGnEdQNIJpQQ5HWPdsEyWCoGK+agdBAFTO7qErB4fTimp90SE/mT7TCZ7lUFKqONjwIfCpZxUE//OEZPkNVUkswDDCLhJYvl2AEESowhlixErOiovAkQCGkQGUpk78CCokVC7WAJ6FaCccKlVT2QAGeL67bWCSIEEiRGtUWFWBQwFmAQSpYI2BO2NbIb5xkUDw8LKeViB1AiYcBlvtjp01/KVii1qasB9FZj9zQEx2pjXfWTxda559Ks8CWqq19QSIAbFBdgNka6TiqqiBGq6bDRhOZiHLSIw4q5wFgooPDoVgZzsIYxtHOVklFGnY7jwQ4CDGAWHB//OEZPANtMcuxBhilhJwLllgCEYAxK9XFY4sEMDHdXzMEd1VyUIvMFe7pNvu9TsdRvwQAeKBnp41QYCje9uoLg44IfONj8JpDRkggNPBfg+CjcbHC4rPgMMFbqyWpCbweCmimJMG8fHBgwRXK5Wse5FKY+DHAcaGQpMJm9J5bE70SwgF0O6LkVnLLWehnt/p9/v//s/3s3q3J0JsRuyWS2WS622WOBtpBcsSKYfz3Z9Y35yQQUZqEkSTm8vK5pxb//OEZOMP2dMqwKSIAA+4vmGBQxgAomKOdnLc9cSTZ1mCfZroScycq6c54sWua6fNkkl3x2KYT4hBIBfQmJPe0sB+rD2lWoqH4T7lU5WCC9YfZ955tH/Gjv4Tast6JRELEytktvOsf289b1i51a2Z40K756/iKd5bya//////1h9e89ff4tXGIm763akem8bzeUBREraVEQWojiA3fU4lyShcB3htyO13Wayz9ADk0ggqadBJd2ZwSlJbRqXkYkke//OEZNAWOXVHL8e8AR/KvmW9hVgASKflqOah4PlZPMgQ0FSh1/nzY0ZROG4luKHGsO+HH0k4anBNH8eNg8hKJr2ol9axe6nwaUoQcPbNHWxc/5TdqnT9cwt0/VNT/0yd17W/8O+K/1p5//1dyv/9ViC7PwRtKxCsgQPwCBp50RTZV22Wce7cSrDWdiVwNDAafiXK9R4tlv8RT3//R1gt/+JVnc7KqBoYDUrErvrOrEQNLcyuIuVOgqMPAqPBWIjw//OEZEoHGALoyuCIAA9QAcABwhgAiDsFYK1PLP/+t0qdEv/xFLHip0FTv56IoKrBX8RcqdK///4ilpU6JTsGlB1MQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//OEZFQAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"}})],1)},qo=[],Zo={name:"Alarm",data(){return{pointAlarms:{},drawer:!1,errorMsg:{},toDateString:D.HN}},computed:{showMsgLength(){const e=Object.values(this.errorMsg);let t=e.filter((e=>e.isRolling));return t.length}},methods:{loadAlarm(e){let t=e.getCellById(F.Rs);if(!t)return;let a=t.propAlarm(),o={};a&&a.alarms&&(a.alarms.forEach((e=>{e.points.forEach((t=>{let a=`${t.mpId}.${t.attrId}`,s=o[a],{points:i,...r}=e,l={id:(0,H.Ak)(),...r};s?s.rules.push(l):(s={},o[a]=s,s["point"]=t,s["rules"]=[l])}))})),console.log(o),this.pointAlarms=o)},changeData(e){console.log("change data",e);for(let[t,a]of Object.entries(this.pointAlarms)){let o=e[t];if(o){let e=o.value;a.rules.forEach((({id:t,max:a,min:s,isVoice:i,level:r})=>{if(e<=a&&e>=s)this.$delete(this.errorMsg,t);else{let l=` 当前值[ ${e} ]`;e>a&&(l+=` 超过最大值[ ${a} ]`),e<s&&(l+=` 超过最小值[ ${s} ]`);let n=F.Ad.find((e=>e.value===r));this.$set(this.errorMsg,t,{max:a,min:s,isVoice:i,isRolling:!0,point:o,date:new Date,level:n,msg:`[${o.mpName}.${o.attrName}]${l}`})}})),this.changeVoice()}}},changeVoice(){let e=!1;for(let[,t]of Object.entries(this.errorMsg))t.isVoice&&(e=!0);e?this.alarm():this.stop()},alarm(){this.$refs.audioRef.play()},stop(){this.$refs.audioRef.pause()},handleMute(e){e.isVoice=!1,this.changeVoice()},handleRolling(e){e.isRolling=!1}}},Xo=Zo,es=(0,_.A)(Xo,Jo,qo,!1,null,"452be898",null),ts=es.exports,as=a(69354);class os{onTouchStart(e){if(e.touches.length>=2){const t=e.touches[0],a=e.touches[1];this.initialDistance=Math.hypot(a.clientX-t.clientX,a.clientY-t.clientY),this.startPos={x:(t.clientX+a.clientX)/2,y:(t.clientY+a.clientY)/2},this.currentScale=this.graph.transform.getScale().sx,this.initialDistance=this.getDistance(t,a),this.prevDistance=this.initialDistance,this.initialMidpoint=this.getMidpoint(t,a),this.isScaling=!1,this.isDragging=!1}}onTouchMove(e){if(e.touches.length>=2){e.preventDefault();const t=e.touches[0],a=e.touches[1],o=this.getDistance(t,a),s=this.getMidpoint(t,a);Math.abs(o-this.prevDistance)>10&&(this.isScaling=!0,this.isDragging=!1),this.isScaling||(Math.abs(s.x-this.initialMidpoint.x)>10||Math.abs(s.y-this.initialMidpoint.y)>10)&&(this.isDragging=!0),this.prevDistance=o,this.initialMidpoint=s,this.isScaling?console.log("Scaling"):this.isDragging&&(console.log("Dragging"),this.dragging(e))}}dragging(e){const t=e.touches[0],a=e.touches[1],o=Math.abs(Math.hypot(a.clientX-t.clientX,a.clientY-t.clientY));this.cumulatedFactor=o/this.initialDistance,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const s=this.currentScale;let i=this.graph.transform.clampScale(s*this.cumulatedFactor);const r=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,l=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(i=as.Dc.clamp(i,r,l),i!==s)if(this.widgetOptions.zoomAtMousePosition){const e=!!this.graph.getPlugin("scroller"),t=e?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(i,{absolute:!0,center:t.clone()}),this.callback([i,s])}else this.graph.zoom(i,{absolute:!0});this.cumulatedFactor=1}getDistance(e,t){const a=t.clientX-e.clientX,o=t.clientY-e.clientY;return Math.sqrt(a*a+o*o)}getMidpoint(e,t){return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}}onTouchEnd(){this.initialDistance=null,this.startPos=null}constructor(e,t){this.widgetOptions={zoomAtMousePosition:!0,minScale:.2,maxScale:3},this.callback=t,this.graph=e,this.initialDistance=null,this.currentScale=null,this.startPos=null,this.prevDistance=null,this.initialMidpoint=null,this.isScaling=!1,this.isDragging=!1,document.getElementById("preview-container").addEventListener("touchstart",this.onTouchStart.bind(this),{passive:!1}),document.getElementById("preview-container").addEventListener("touchmove",this.onTouchMove.bind(this),{passive:!1}),document.getElementById("preview-container").addEventListener("touchend",this.onTouchEnd.bind(this),{passive:!1})}}var ss=os,is={name:"PreviewComm",inject:["webtopoAPI"],components:{EventAction:Qo,Alarm:ts},props:{isConnect:{type:Boolean,default:!1},height:{type:String,default:null},isPreview:{type:Boolean,default:!1},svgJSON:{type:Object,default:null},svgId:{type:String,default:null}},data(){return{loadJSONLoading:!1,historyStack:[],pageHeight:this.height??"100vh",value:0,drawer:!1,graphConfig:{},previewData:{},graph:null,svgJSONData:(0,k.cloneDeep)(this.svgJSON),dataHook:null,showPopper:!1,instance:null,showEvent:!1,showDataHistory:!1,eventCells:null,ctrlDown:!1,altDown:!1,pointNameStor:null,currentSvgId:null,offect:null,timeFormatNodes:[],timerId:null,targetScale:0}},mounted(){if(this.graph=new j.ke({container:document.getElementById("preview-container"),interacting:function(){return!1},cursor:"crosshair",mousewheel:{enabled:!0,zoomAtMousePosition:!0,minScale:.2,maxScale:3},connecting:{},async:!0}),this.graph.use(new ue.H({enabled:!0,pannable:!0,pageVisible:!0,pageBreak:!1,autoResize:!1})),this.offect=new Ea.s(this.graph),this.graph.on("cell:change:data",(({cell:e,current:t})=>{this.offect.changeData(e,t),e.propAlarm&&e.propAlarm()&&this.$refs.alarmRef.changeData(t)})),this.dataHook=new Ko,this.svgId&&!this.svgJSONData&&this.initJSON(),!this.svgJSONData&&!this.svgId){let e=sessionStorage.getItem("previewJSON");e&&(this.svgJSONData=JSON.parse(e))}this.graph.on("render:done",this.changePageSize),this.svgJSONData&&(this.addHistoryStack(),this.initGraph()),window.addEventListener("resize",this.resizeFun),new ss(this.graph,(e=>{this.targetScale=e}))},computed:{loadingBean(){let e={isLoading:!1,text:"正在拼命连接服务器"};return this.loadJSONLoading?(e.isLoading=!0,e.text="正在获取图纸资源...",e):(this.isConnect||this.isPreview||(e.isLoading=!0,e.text="正在拼命连接服务器..."),e)}},methods:{graphRotate(){this.graph.rotate(90)},initJSON(){this.svgId&&this.getSVGJson(this.svgId,(()=>{this.addHistoryStack(this.svgId)}))},toSvgPage(e){this.getSVGJson(e,(()=>{this.addHistoryStack(e)}))},addHistoryStack(e="svgData"){this.currentSvgId=e,this.historyStack.push(e)},backHistoryStack(){if(this.historyStack.pop(),this.currentSvgId=this.historyStack[this.historyStack.length-1],"svgData"===this.currentSvgId){if(this.svgJSON)this.svgJSONData=(0,k.cloneDeep)(this.svgJSON);else{let e=sessionStorage.getItem("previewJSON");e&&(this.svgJSONData=JSON.parse(e))}this.initGraph()}else this.getSVGJson(this.currentSvgId)},getSVGJson(e,t=(()=>{})){this.loadJSONLoading=!0,this.webtopoAPI.getJSONById(e).then((({data:a})=>{if(!a)return this.loading=!1,void this.$message.error("未找到资源，请刷新后重试");console.log(a);let o,s,i,{graph:r,cells:l,points:n}=a;if(l)try{s=JSON.parse(l)}catch(V){s=l}if(n)try{i=JSON.parse(n)}catch(V){i=n}if(r)try{o=JSON.parse(r)}catch(V){o=r}this.svgJSONData={graph:o,cells:s,points:i},this.initGraph(),t(e)})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))},async initGraph(){this.graphConfig=this.svgJSONData.graph;let{backgroundColor:e,backgroundImg:t}=this.graphConfig;t?this.graph.drawBackground({color:""}):this.graph.drawBackground({color:e}),this.graph.fromJSON(this.svgJSONData.cells),this.$nextTick((()=>{this.$refs.eventAction.initCellEvent()})),this.svgJSONData.points&&await se.A.init(this.graph.getCells(),this.svgJSONData),this.offect.clear(),this.dataHook.init(this.graph),this.initTimeInterval(),this.initPointData(),this.$emit("register",se.A.pointList)},initTimeInterval(){let e=this.graph.getNodes();e.forEach((e=>{let t=e.prop("formulas/time");t?.format&&t?.selector&&this.timeFormatNodes.push(e)})),this.timeFormatNodes.length>0&&(this.timerId=setInterval((()=>{let e=new Date;this.timeFormatNodes.forEach((t=>{let a=t.prop("formulas/time");t.attr(`${a.selector.selector}/text`,(0,D.HN)(e,a.format))}))}),1e3))},getGraph(){return this.graph},getPreviewData(){return this.previewData},getPointNameStor(){return this.pointNameStor},resizeFun(){let e=this.$refs.containerDiv,t=e.clientWidth,a=e.clientHeight,o=t,s=a;this.graph.resize(o,s),this.changePageSize()},changePageSize(){let e=this.svgJSONData.graph.contentAdaptation,t=this.graph.getPlugin("scroller");this.graph.fitToContent({padding:20}),setTimeout((()=>{this.loadJSONLoading=!1}),500);let a=this.graph.getGraphArea();switch(e){case F.HE.fullAll.value:t&&t.transitionToRect(a,{visibility:1});break;default:this.graph.positionContent("top",{animation:{duration:2e3,easing:"linear"},padding:10});break}},initPointData(){this.$refs.alarmRef.loadAlarm(this.graph),this.pointNameStor=(0,k.cloneDeep)(this.dataHook.getPointNameStor());let e={};console.log(this.pointNameStor),Object.values(this.pointNameStor).forEach((t=>{Object.values(t.attrs).forEach((t=>{e[`${t.mpId}.${t.attrId}`]=t}))})),this.previewData=e,this.$emit("getPointNameStor",this.pointNameStor)},showEventFun(e){if(this.showEvent=e,!this.eventCells){let e=[],t=this.graph.getCells();t.forEach((t=>{let a=t.getProp("events");if(a&&a.length>0){let o=[];a.forEach((e=>{e.eventType==F.cP.click.value?o.includes(F.cP.click.tool)||o.push(F.cP.click.tool):e.eventType==F.cP.rightClick.value?o.includes(F.cP.rightClick.tool)||o.push(F.cP.rightClick.tool):e.eventType==F.cP.mouseenter.value&&(o.includes(F.cP.mouseenter.tool)||o.push(F.cP.mouseenter.tool))})),e.push({cell:t,tools:o})}})),this.eventCells=e}this.eventCells.forEach((({cell:e,tools:t})=>{this.showEvent?e.addTools(t):e.removeTools(t)}))},changeData(e){Array.isArray(e)||(e=[e]);let t={};e.forEach((e=>{t[`${e.mpId}.${e.attrId}`]=e,this.previewData[`${e.mpId}.${e.attrId}`]=e})),this.dataHook.updateData(t)},eventDataChange(e){this.dataHook.updateData(e);for(let[t,{mpId:a,attrId:o,value:s}]of Object.entries(e))this.pointNameStor[a].attrs[o].value=s,this.previewData[t].value=s;this.$emit("getPointNameStor",this.pointNameStor)},getPointList(){return se.A.pointList}},destroyed(){this.graph&&this.graph.dispose(),this.instance&&this.instance.destroy(),console.log("执行销毁"),null!=this.timerId&&clearInterval(this.timerId),window.removeEventListener("resize",this.resizeFun)}},rs=is,ls=(0,_.A)(rs,To,ko,!1,null,"3494821a",null),ns=ls.exports,Vs={name:"PreviewPane",components:{PreviewComm:ns},props:["svgJSON"],data(){return{previewData:{},showPopper:!1,instance:null,showEvent:!1,showDataHistory:!1,eventCells:null,ctrlDown:!1,altDown:!1,pointNameStor:null,isRandom:!1,randomIntervalId:null}},mounted(){this.graph=this.$refs.previewCommRef.getGraph(),this.previewData=this.$refs.previewCommRef.getPreviewData()},methods:{valueRandomHander(e){console.log("执行了"),e?(this.changeAllValue(),this.randomIntervalId=setInterval((()=>{this.changeAllValue()}),1500)):this.randomIntervalId&&clearInterval(this.randomIntervalId)},changeAllValue(){for(let e of Object.values(this.pointNameStor))for(let t of Object.values(e.attrs))t.value=2*Math.random()|0,this.changeData(t)},getPointNameStor(e){this.changeData(Object.values(e).flatMap((e=>Object.values(e.attrs)))),this.pointNameStor=e},showEventFun(e){if(this.showEvent=e,!this.eventCells){let e=[],t=this.graph.getCells();t.forEach((t=>{let a=t.getProp("events");if(a&&a.length>0){let o=[];a.forEach((e=>{e.eventType==F.cP.click.value?o.includes(F.cP.click.tool)||o.push(F.cP.click.tool):e.eventType==F.cP.rightClick.value?o.includes(F.cP.rightClick.tool)||o.push(F.cP.rightClick.tool):e.eventType==F.cP.mouseenter.value&&(o.includes(F.cP.mouseenter.tool)||o.push(F.cP.mouseenter.tool))})),e.push({cell:t,tools:o})}})),this.eventCells=e}this.eventCells.forEach((({cell:e,tools:t})=>{this.showEvent?e.addTools(t):e.removeTools(t)}))},graphRotate(){this.$refs.previewCommRef.graphRotate()},changeData(e){this.$refs.previewCommRef.changeData((0,k.cloneDeep)({dataTime:Number.parseInt((new Date).getTime()/1e3),...e}))}},beforeDestroy(){clearInterval(this.randomIntervalId)}},cs=Vs,us=(0,_.A)(cs,xo,Mo,!1,null,"db2136a2",null),ps=us.exports,ds=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{ref:"container",staticStyle:{height:"calc(100vh - 111px)"}})]),t("el-col",{attrs:{span:12}},[t("div",{ref:"preContainer",staticStyle:{height:"calc(100vh - 111px)"}})])],1),t("select-point",{ref:"selectPoint"})],1)},hs=[],gs=a(1201),ms=a.n(gs);class fs extends j.bP{constructor(e){super(e),this.collapsed=!1}postprocess(){this.toggleCollapse(!1)}isCollapsed(){return this.collapsed}toggleButtonVisibility(e){this.attr("buttonGroup",{display:e?"block":"none"})}toggleCollapse(e){const t=null==e?!this.collapsed:e;t?this.attr("buttonSign",{d:"M 2 5 8 5",strokeWidth:1.8}):this.attr("buttonSign",{d:"M 1 5 9 5 M 5 1 5 9",strokeWidth:1.6}),this.collapsed=t}}fs.config({zIndex:2,markup:[{tagName:"g",selector:"buttonGroup",children:[{tagName:"rect",selector:"button",attrs:{"pointer-events":"visiblePainted"}},{tagName:"path",selector:"buttonSign",attrs:{fill:"none","pointer-events":"none"}}]},{tagName:"rect",selector:"body"},{tagName:"title",selector:"title"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:1,fill:"#EFF4FF",stroke:"#5F95FF"},label:{textWrap:{ellipsis:!0,width:-10},textAnchor:"middle",textVerticalAnchor:"middle",refX:"50%",refY:"50%",fontSize:12},buttonGroup:{refX:"100%",refY:"50%"},button:{fill:"#5F95FF",stroke:"none",x:-10,y:-10,height:20,width:30,rx:10,ry:10,cursor:"pointer",event:"node:collapse"},buttonSign:{refX:5,refY:-5,stroke:"#FFFFFF",strokeWidth:1.6}}});class bs extends j.yp.oH{isHidden(){const e=this.getTargetNode();return!e||!e.isVisible()}}bs.config({zIndex:1,attrs:{line:{stroke:"#A2B1C3",strokeWidth:1,targetMarker:null}}});var vs={name:"Relationship",components:{SelectPoint:Ga.A},props:["svgJSON"],mixins:[Z.c],data(){return{preGraph:null,localGraph:null,preCell:null}},mounted(){j.bP.registry.register("tree-node",fs,!0),j.oH.registry.register("tree-edge",bs,!0),this.preGraph=new j.ke({container:this.$refs.preContainer,background:{color:this.svgJSON.graph.backgroundColor},interacting:function(){return{nodeMovable:!1,magnetConnectable:!1,edgeMovable:!1,edgeLabelMovable:!1,arrowheadMovable:!1,vertexMovable:!1,vertexAddable:!1,vertexDeletable:!1}},cursor:"crosshair",mousewheel:{enabled:!0,zoomAtMousePosition:!0,maxScale:3},connecting:{},async:!0}),this.preGraph.use(new ue.H({enabled:!0,pannable:!0,pageVisible:!1,pageBreak:!1,autoResize:!0})),this.preGraph.fromJSON(this.svgJSON.cells),this.localGraph=new j.ke({container:this.$refs.container,panning:!0,mousewheel:!0,interacting:!1,connecting:{anchor:"orth",connector:"rounded",connectionPoint:"boundary",router:{name:"er",args:{offset:24,direction:"H"}}}}),this.localGraph.on("cell:click",(({e:e,cell:t})=>{if(e.target.getAttribute("event"))return;let a=t.prop("nodeType"),o=t.prop("mpObj");if("point"===a&&this.$refs.selectPoint.open({isSelectAttr:!1,point:{mpId:o?.mpId}},(e=>{console.log(e)})),"attr"===a&&this.$refs.selectPoint.open({isSelectPoint:!1,point:{mpId:o?.mpId,attrId:o?.attrId}},(e=>{console.log(e)})),"node"===a){let e=this.preGraph.getCellById(t.id);this.preGraph.centerCell(e),this.highlight(this.preGraph,e),this.highlight(this.localGraph,t),this.preCell=e}})),this.localGraph.on("node:collapse",(({node:e})=>{e.toggleCollapse();const t=e.isCollapsed(),a=e=>{const o=this.localGraph.getSuccessors(e,{distance:1});o&&o.forEach((e=>{e.toggleVisible(!t),e.isCollapsed()||a(e)}))};a(e)}));let e={};e=this.getTreeData();const t=ms().mindmap(e,{direction:"H",getHeight(){return 60},getWidth(){return 16},getHGap(){return 80},getVGap(){return 1},getSide:()=>"right"}),a={nodes:[],edges:[]},o=e=>{e&&a.nodes?.push({id:`${e.id}`,x:e.x+250,y:e.y+250,shape:"tree-node",width:70,height:26,mpObj:e.data.mpObj,nodeType:e.data.nodeType,toggleButtonVisibility:!!e.children.length,attrs:{label:{textWrap:{text:e.data.name}},title:{text:e.data.name},buttonGroup:{display:e.children.length?"block":"none"}}}),e.children&&e.children.forEach((t=>{a.edges?.push({source:`${e.id}`,target:`${t.id}`,attrs:{line:{stroke:"#A2B1C3",strokeWidth:1,targetMarker:null}}}),o(t)}))};o(t),this.localGraph.fromJSON(a)},methods:{highlight(e,t){if(this.preCell){let t=e.findView(this.preCell);t.unhighlight(t.container,{highlighter:{name:"stroke",args:{padding:3,attrs:{"stroke-width":2,stroke:"#75d411","stroke-dasharray":"5,5"}}}})}let a=e.findView(t);a.highlight(a.container,{highlighter:{name:"stroke",args:{padding:3,attrs:{"stroke-width":2,stroke:"#75d411","stroke-dasharray":"5,5"}}}})},getTreeData(){let e=this.graph.getCells();console.log(e);let t=[];return e.forEach((e=>{let a=this.buildCellTree(e);if(Object.keys(a).length){let e=this.buildNode(a);t.push(...e)}})),{shape:"tree-node",id:"Modeling Methods",name:"根节点",children:t}},buildNode(e){let t=[];if(!e)return t;for(let[,a]of Object.entries(e)){let e=this.buildNode(a.nodeChildren);t.push({shape:"tree-node",id:a.id,mpObj:a.mpObj,nodeType:a.type,name:a.name,children:e})}return t},buildCellTree(e,t={}){let a;return a=e.getPoints?e.getPoints():e.prop("points")??[],a.forEach((a=>{let o=t[a.mpId];if(!o){let e=se.A.getPointName(a.mpKey);t[a.mpId]=o={id:a.mpId,mpObj:a,name:e,type:"point",nodeChildren:{}}}let s=o.nodeChildren[a.attrId];if(!s){let e=se.A.getAttrName(a.mpKey,a.attrKey),t=a.mpId+"_"+a.attrId;o.nodeChildren[t]=s={id:t,name:e,mpObj:a,type:"attr",nodeChildren:{}}}let i=s.nodeChildren[e.id];if(!i){let t=e.prop(F.f1);s.nodeChildren[e.id]=i={id:e.id,name:t,type:"node"}}})),t}},destroyed(){this.localGraph&&this.localGraph.dispose()}},As=vs,ys=(0,_.A)(As,ds,hs,!1,null,null,null),ws=ys.exports,_s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"480px",visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:e.isUpdate?"修改图纸":"保存图纸"},on:{"update:visible":e.updateVisible},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:function(t){return e.updateVisible(!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v(" 保存 ")])]},proxy:!0}])},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"82px"}},[t("el-row",{attrs:{gutter:15}},[t("el-col",e._b({},"el-col",e.styleResponsive?{sm:24}:{span:24},!1),[t("el-form-item",{attrs:{label:"图纸名称:",prop:"name"}},[t("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"请输入图纸名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"读标识:",prop:"readPermission"}},[t("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"请输入读权限标识"},model:{value:e.form.readPermission,callback:function(t){e.$set(e.form,"readPermission",t)},expression:"form.readPermission"}})],1),t("el-form-item",{attrs:{label:"写标识:",prop:"writePermission"}},[t("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"请输入写权限标识"},model:{value:e.form.writePermission,callback:function(t){e.$set(e.form,"writePermission",t)},expression:"form.writePermission"}})],1)],1)],1)],1)],1)},Ns=[],xs={name:"Save",props:{graphConfig:Object,visible:Boolean,saveForm:Object},mixins:[Z.c],data(){return{form:{...this.saveForm},loading:!1,isUpdate:!0,rules:{name:[{required:!0,message:"请输入图纸名称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],readPermission:{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"},writePermission:{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}}}},computed:{styleResponsive(){return!0}},methods:{updateVisible(e){this.$emit("update:visible",e)},save(){this.$refs.form.validate((e=>{if(!e)return!1;let t,a,o;this.loading=!0,this.graph&&(t=JSON.stringify(this.graph.toJSON())),se.A?.points&&(a=JSON.stringify(se.A.points)),this.graphConfig&&(o=JSON.stringify(this.graphConfig));const s={...this.form,cells:t,points:a,graph:o};this.webtopoAPI.saveOrUpdate(s).then((({data:e})=>{this.loading=!1,this.$message.success("保存成功"),this.updateVisible(!1),localStorage.removeItem(`${F.Q6}_${this.saveForm.id}`),this.$emit("afterSaveing",e)})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))}))}},watch:{visible(e){this.loading=!1,e&&(this.form={...this.saveForm},this.saveForm.id?this.isUpdate=!0:this.isUpdate=!1)}}},Ms=xs,Ts=(0,_.A)(Ms,_s,Ns,!1,null,null,null),ks=Ts.exports,Ds=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"1000px",visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:"告警配置"},on:{"update:visible":e.updateVisible},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:function(t){return e.updateVisible(!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v(" 保存 ")])]},proxy:!0}])},[t("div",{staticStyle:{height:"600px","overflow-y":"auto"}},e._l(e.form.alarms,(function(a,o){return t("el-form",{key:a.id,ref:"form",refInFor:!0,attrs:{"label-position":"top",inline:!0,model:a,rules:e.rules,"label-width":"62px",size:"mini"}},[t("el-row",[t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"点位:",prop:"points"}},[t("el-input",{attrs:{size:"mini",clearable:"",value:e.getPointName(a.points)}},[t("template",{slot:"append"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectPoint(a)}}},[e._v("选择点位")])],1)],2)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"上限>=:",prop:"max"}},[t("el-input-number",{attrs:{clearable:"",maxlength:20,size:"mini",placeholder:"请输入上限",min:a.min,rules:[{row:a}]},model:{value:a.max,callback:function(t){e.$set(a,"max",t)},expression:"alarm.max"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"下限<=:",prop:"min"}},[t("el-input-number",{attrs:{clearable:"",maxlength:20,size:"mini",max:a.max,placeholder:"请输入下限"},model:{value:a.min,callback:function(t){e.$set(a,"min",t)},expression:"alarm.min"}})],1)],1),t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"声音:"}},[t("el-checkbox",{attrs:{size:"mini","true-label":1,"false-label":0},model:{value:a.isVoice,callback:function(t){e.$set(a,"isVoice",t)},expression:"alarm.isVoice"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"级别:"}},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:a.level,callback:function(t){e.$set(a,"level",t)},expression:"alarm.level"}},e._l(e.levels,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}},[t("div",{staticClass:"option-div"},[t("span",[e._v(e._s(a.name))]),t("span",{staticClass:"label-color-block",style:{"background-color":a.color}})])])})),1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"操作:"}},[t("div",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.copyItem(a)}}},[e._v("复制")]),0!==o?t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.removeItem(a)}}},[e._v("移除")]):e._e()],1)])],1)],1)],1)})),1),t("select-point",{ref:"selectPoint"})],1)},Cs=[],Es={name:"Save",components:{SelectPoint:Ga.A},props:{visible:Boolean},mixins:[Z.c],data(){let e={id:(0,H.Ak)(),type:"overLimit",points:[],max:0,min:0,isVoice:1,level:"majorAlert"};return{alarmCell:null,levels:F.Ad,form:{alarms:[e]},loading:!1,rules:{points:{required:!0,validator:(e,t,a)=>{Array.isArray(t)&&t.length>0?a():a(new Error("点位不能为空"))},trigger:"change"}}}},computed:{styleResponsive(){return!0}},mounted(){let e=this.graph.getCellById(F.Rs);if(!e)return void this.$message.warning("未找到告警节点，请保存图纸刷新后重试");this.alarmCell=e;let t=e.propAlarm();t&&(this.form=(0,k.cloneDeep)(t))},methods:{getPointName(e){if(e?.length){const t=e[0];return`${t.mpName}.${t.attrName}`}return""},copyItem(e){let t=(0,k.cloneDeep)(e);t.id=(0,H.Ak)(),this.form.alarms.push(t)},removeItem(e){const t=this.form.alarms.findIndex((t=>t.id===e.id));-1!==t&&this.form.alarms.splice(t,1)},selectPoint(e){this.$refs.selectPoint.open({},(t=>{this.$set(e.points,0,t)}))},updateVisible(e){this.$emit("update:visible",e)},save(){let e=[];this.$refs.form?.forEach((t=>{e.push(this.formValidate(t))})),Promise.all(e).then((()=>{this.alarmCell.propAlarm((0,k.cloneDeep)(this.form)),this.updateVisible(!1)}))},formValidate(e){return new Promise(((t,a)=>{e.validate((e=>{e&&t()}))}))}}},Os=Es,Is=(0,_.A)(Os,Ds,Cs,!1,null,"2587e588",null),Ss=Is.exports,Ps=function(){var e=this,t=e._self._c;return t("el-link",{attrs:{underline:!1,disabled:e.disabled},nativeOn:{click:function(t){return e.btnClick.apply(null,arguments)}}},[t("span",{staticClass:"font-span"},[t("i",{staticClass:"font-i",class:e.icon}),t("span",{staticClass:"font-f"},[e._v(" "+e._s(e.label)+" ")])])])},js=[],zs={name:"ToolBtn",props:["icon","label","disabled"],data(){return{}},methods:{btnClick(){this.disabled||this.$emit("click")}}},Ls=zs,Fs=(0,_.A)(Ls,Ps,js,!1,null,"dbc88d10",null),Rs=Fs.exports,Bs={name:"TopPane",props:["graphConfig","saveForm"],mixins:[Z.c],components:{PreviewPane:ps,Relationship:ws,Save:ks,ToolBtn:Rs,AlarmConfig:Ss},data(){return{DrawEdge:he,showEvent:!1,relationshipVisible:!1,centerDialogVisible:!1,saveVisible:!1,alarmVisible:!1,svgJSON:null,inputJson:"",selectNodeCount:0,selectCellCount:0,blueprintId:""}},inject:["svg"],watch:{centerDialogVisible(e){se.A.isTest=!e}},mounted(){this.nodeEventHook.onSelecteds((()=>{let e=this.graph.getSelectedCells();this.selectNodeCount=e.filter((e=>!e.isEdge())).length})),this.nodeEventHook.onUnselected((()=>{this.selectNodeCount=0}))},methods:{afterSaveing(){this.$emit("afterSaveing")},exportJSON(){let e=this.graph.toJSON(),t=se.A.points;this.downloadJSON({graph:this.graphConfig,cells:e,points:t})},openFilePicker(){const e=document.createElement("input");e.type="file",e.addEventListener("change",this.parseFile),e.click()},parseFile(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;try{const{cells:e,graph:a,points:o}=JSON.parse(t);e&&a&&localStorage.setItem(F.Q6,JSON.stringify({graph:a,cells:e})),o&&localStorage.setItem(F.Mr,JSON.stringify(o)),this.$emit("loadJSON",{graph:a,cells:e,points:o})}catch(a){console.error("Failed to parse the file:",a)}},e.readAsText(t)}},downloadJSON(e){const t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download=this.generateFileNameWithTimestamp(),s.click(),URL.revokeObjectURL(o)},generateFileNameWithTimestamp(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return`${t}${a}${o}${s}${i}${r}.json`},clearGraph(){this.$confirm("是否确认清空画布?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.graph.fromJSON([])})).catch((()=>{}))},plVisibleDistribut(e){if(e){let e=this.graph.getSelectedCells();this.selectCellCount=e.length}},visibleDistribut(e){if(e){let e=this.graph.getSelectedCells();this.selectNodeCount=e.filter((e=>!e.isEdge())).length}},handleCommand(e){s[e](this.graph,this.graphConfig)},exportPNG(){console.log("123"),this.graph.toJPEG((e=>{j.B6.downloadDataUri(e,"chart.png")}))},undo(){this.graph.canUndo()&&this.graph.undo()},redo(){this.graph.canRedo()&&this.graph.redo()},saveConfig(){console.log(JSON.stringify(this.svg.graph.toJSON()))},loadConfig(){this.svg.graph.fromJSON(JSON.parse(this.inputJson))},zoomToFit(){this.svg.graph.zoomToFit()},reLoad(){let e=this.svg.graph.toJSON();this.svg.graph.fromJSON(e)},pointPre(){this.svg.graph.cleanSelection(),this.svg.graph.clearTransformWidgets();let e=this.svg.graph.toJSON();this.svgJSON={graph:this.graphConfig,cells:e},this.relationshipVisible=!0},production(){this.svg.graph.cleanSelection(),this.svg.graph.clearTransformWidgets();let e=this.svg.graph.toJSON();this.svgJSON={graph:this.graphConfig,cells:e};var t=this.$router.resolve({name:"Spreview"});sessionStorage.setItem("previewJSON",JSON.stringify(this.svgJSON)),window.open(t.href,"_blank")},preview(){this.svg.graph.cleanSelection(),this.svg.graph.clearTransformWidgets();let e=this.svg.graph.toJSON();this.svgJSON={graph:this.graphConfig,cells:e},this.centerDialogVisible=!0},addEdge(){this.svg.graph.addEdge({[F.f1]:"管道_"+(this.graph.getCellCount()+1),shape:"pipeline-edge",source:{x:240,y:120},target:{x:420,y:120},...O})},showEventFun(e){this.showEvent=e;let t=this.svg.graph.getCells();t.forEach((e=>{let t=e.getProp("events");if(t&&t.length>0){let a=[];t.forEach((e=>{e.eventType==F.cP.click.value?a.includes(F.cP.click.tool)||a.push(F.cP.click.tool):e.eventType==F.cP.rightClick.value?a.includes(F.cP.rightClick.tool)||a.push(F.cP.rightClick.tool):e.eventType==F.cP.mouseenter.value&&(a.includes(F.cP.mouseenter.tool)||a.push(F.cP.mouseenter.tool))})),this.showEvent?e.addTools(a):e.removeTools(a)}}))}},destroyed(){he.stop()}},Us=Bs,Hs=(0,_.A)(Us,_o,No,!1,null,"12518470",null),$s=Hs.exports;class Ys{constructor(){this.addedHook=[],this.removedHook=[],this.selectHook=[],this.selectHooks=[],this.unSelectHook=[],this.nodeChangeHook=[],this.graphInitHook=[],this.select={}}setGraph(e){this.graph=e,this.graphInitHook.forEach((t=>t(e))),e.on("cell:added",(t=>{this.addedHook.forEach((a=>a(t,e)))})),e.on("cell:removed",(t=>{this.removedHook.forEach((a=>a(t,e)))})),e.on("cell:selected",(t=>{let a=e.getSelectedCells();if(this.selectHooks.forEach((a=>a(t,e))),a.length>1)return;let o=t.cell.isEdge();o?t.cell.addTools(["vertices","segments","source-arrowhead","target-arrowhead",{name:"edge-editor",args:{attrs:{fontSize:"16",color:"#fff",backgroundColor:"#000"}}}],{reset:!1}):t.cell.addTools(["top-add-button","right-add-button","left-add-button","bottom-add-button"]),this.select=t,this.selectHook.forEach((a=>a(t,e)))})),e.on("cell:unselected",(t=>{let a=t.cell.isEdge();a?setTimeout((()=>{t.cell.removeTool("edge-editor"),t.cell.removeTool("vertices"),t.cell.removeTool("segments"),t.cell.removeTool("source-arrowhead"),t.cell.removeTool("target-arrowhead")}),100):t.cell.removeTools(["top-add-button","right-add-button","left-add-button","bottom-add-button"]),this.select={},this.unSelectHook.forEach((a=>a(t,e)))})),e.on("node:change:*",(t=>{this.nodeChangeHook.forEach((a=>a(t,e)))}))}getGraph(){return this.graph}getSelect(){return this.select}onAdded(e){if(!e)return;let t=this.addedHook.find((t=>t===e&&t.toString()===e.toString()));t||this.addedHook.push(e)}onRemoved(e){if(!e)return;let t=this.removedHook.find((t=>t===e&&t.toString()===e.toString()));t||this.removedHook.push(e)}onSelected(e){if(!e)return;let t=this.selectHook.find((t=>t===e&&t.toString()===e.toString()));t||this.selectHook.push(e)}onSelecteds(e){if(!e)return;let t=this.selectHooks.find((t=>t===e&&t.toString()===e.toString()));t||this.selectHooks.push(e)}onUnselected(e){if(!e)return;let t=this.unSelectHook.find((t=>t===e&&t.toString()===e.toString()));t||this.unSelectHook.push(e)}onNodeChange(e){if(!e)return;let t=this.nodeChangeHook.find((t=>t===e&&t.toString()===e.toString()));t||this.nodeChangeHook.push(e)}onGraphInitHook(e){if(!e)return;let t=this.graphInitHook.find((t=>t===e&&t.toString()===e.toString()));t||this.graphInitHook.push(e)}clear(){this.addedHook=[],this.removedHook=[],this.selectHook=[],this.unSelectHook=[],this.nodeChangeHook=[],this.graphInitHook=[],this.select={}}}var Ws=a(63738),Gs=a.n(Ws);K();const Qs=new Ze;Qs.init(j.ke);const Ks=new Qe;Ks.init(j.ke);const Js=new $e,qs=new me,Zs=new Ys;let Xs,ei="0";window.__x6_instances__=[];var ti={name:"Webtopo",components:{LeftPane:ut,DecorateMenu:bt,RightPane:wo,AddNodeDialog:oe,TopPane:$s},props:{webtopoAPI:{default:()=>({getCaptcha:()=>{},getPoints:()=>{},getAttrs:()=>{},saveOrUpdate:()=>{},getJSONById:()=>{},getImages:()=>{},uploadFile:()=>{},palpitate:()=>{},listNotPage:()=>{},getMpAndMstypeNames:()=>{},setData:()=>{}})}},data(){return{models:[{index:1,text:"模板1"},{index:2,text:"588个节点测试"},{index:3,text:"位移测试"},{index:4,text:"百分比位移"},{index:5,text:"组合动画"},{index:7,text:"冷水机组"}],saveForm:{id:"",name:"",readPermission:"",writePermission:"",consId:""},contentHeight:"100vh",leftFold:!1,rightFold:!1,drawer:!1,graphConfig:{backgroundColor:"#000",backgroundImg:"",pageSize:{},contentAdaptation:null},saveInterval:null,scale:100,visible:!1,graph:null,isDraw:!1,svg:{graph:void 0,nodesObj:null},isChange:!1,palpitate:null,path:null}},provide(){return{svg:this.svg,getNodeEventHook:this.getNodeEventHook,getBlueprintInfo:this.getBlueprintInfo,webtopoAPI:this.webtopoAPI}},created(){se.A.setMpAndMstypeNamesAPI(this.webtopoAPI.getMpAndMstypeNames)},mounted(){const e=this;this.path=this.$route?.path,se.A.isTest=!0,this.saveForm.id=this.$route?.query?.id,this.saveForm.id&&this.getSvgJSONById(),this.$util?.contentHeight&&(this.contentHeight=this.$util.contentHeight()+"px"),this.$nextTick((()=>{this.graph=new j.ke({container:this.$refs["graph-container"],background:{color:"#000000",image:"",size:"cover"},grid:{type:"fixedDot",visible:!0,size:10},translating:{restrict:!0},cursor:"crosshair",mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:["ctrl","meta"],factor:1.1,global:!0,minScale:.2,maxScale:3},interacting:({cell:e})=>{if(this.isDraw)return!1;let t=e.prop("lock");return!t||{nodeMovable:!1,magnetConnectable:!1,edgeMovable:!1,edgeLabelMovable:!1,arrowheadMovable:!1,vertexMovable:!1,vertexAddable:!1,vertexDeletable:!1}},connecting:{validateConnection(){return!e.graph.enableConnection},connectionPoint:{name:"bbox",args:{offset:20,stroked:!0}}},virtual:!1,async:!1}),this.initAlarmPoint(),window.__x6_instances__.push(this.graph),Xe(this.graph),this.svg.graph=this.graph,this.cells=this.graph.getCells();let t,a,o=(0,k.debounce)((()=>{let e=this.graph.toJSON();if(e.cells.length){let t=se.A.points;localStorage.setItem(`${F.Q6}_${this.saveForm.id}`,JSON.stringify({graph:this.graphConfig,points:t,cells:e}))}}),300,{leading:!1,trailing:!0});qs.init(this.graph,{beforeAddCommand:()=>{this.isChange||(this.isChange=!0,window.addEventListener("beforeunload",this.confirmExit)),o()}}),Js.init(this.graph,this.graphConfig,this),Zs.setGraph(this.graph),this.autoSave(),Xs=new ResizeObserver((e=>{for(let o of e){if(!a||!t)return a=o.contentRect.width,void(t=o.contentRect.height);(Math.abs(o.contentRect.width-a)>10||Math.abs(o.contentRect.height-t)>10)&&(a=o.contentRect.width,t=o.contentRect.height,this.$nextTick((()=>{console.log(o),this.resizeFun()})))}})),Xs.observe(this.$refs.graphDiv),he.onStartDrawListening((()=>{this.isDraw=!0})),he.onEndDrawListening((()=>{this.isDraw=!1})),this.$refs["graph-container"].addEventListener("dragover",this.dragoverFun),this.$refs["graph-container"].addEventListener("drop",this.dropFun)}))},methods:{afterSaveing(){this.isChange=!1,window.removeEventListener("beforeunload",this.confirmExit)},getBlueprintInfo(){return this.saveForm},handleFileUpload(e,t){if(e.length>0){this.$message.warning("正在上传");const a=e[0];this.webtopoAPI.uploadFile(a).then((({data:e})=>{this.$message.success("上传成功");const o=new FileReader;o.readAsDataURL(a);let{pageX:s,pageY:i}=t,{x:r,y:l}=this.graph.pageToLocal(s,i);(0,D._l)(this.graph,e,r,l)})).catch((e=>{this.$message.error(e.message)}))}},resizeFun(){if(!this.$refs.graphDiv)return;let e=this.$refs.graphDiv.clientWidth,t=this.$refs.graphDiv.clientHeight,a=e,o=t;this.graph.resize(a,o),this.$refs.rightPaneRef.changePageSize()},async appModel(e){const t=this.$loading({lock:!0,text:"正在加载图纸",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Gs().request({url:`webtopo/model/json/${e}.json?_t=${(new Date).getTime()}`,method:"get"}).then((e=>{let a=e.data;this.initGraphData(a),t.close()})).catch((()=>{alert("抱歉，服务出错！"),t.close()})),this.drawer=!1},autoSave(){let e=localStorage.getItem(`${F.Q6}_${this.saveForm.id}`);if(e){let a;try{a=JSON.parse(e)}catch(t){console.error(t)}a&&this.$confirm("有未保存内容，是否加载?","加载保存",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((()=>{this.initGraphData(a)})).catch((()=>{}))}else this.drawer=!0},getSvgJSONById(){this.webtopoAPI.getJSONById(this.saveForm.id).then((({data:e})=>{if(!e)return this.loading=!1,void this.$message.error("未找到资源，请刷新后重试");let t,a,o,{graph:s,cells:i,points:r}=e;if(i)try{t=JSON.parse(i)}catch(n){t=i}if(r)try{a=JSON.parse(r)}catch(n){a=r}s&&(o=JSON.parse(s)),this.saveForm={id:e.id,name:e.name,readPermission:e.readPermission,writePermission:e.writePermission,consId:e.consId};let l={graph:o,cells:t,points:a};this.initGraphData(l)})).catch((e=>{this.$message.error(e.message)}))},initAlarmPoint(){fe(this.graph)},initGraphData(e){if(console.log("执行了initGraphData"),e.cells&&this.graph.fromJSON(e.cells),this.initAlarmPoint(),e.graph){let{backgroundColor:t,backgroundImg:a,pageSize:o,contentAdaptation:s}=e.graph;this.graphConfig.backgroundColor=t,t&&this.graph.drawBackground({color:t}),this.graphConfig.backgroundImg=a,a&&this.graph.background.draw({image:a,repeat:"repeat-y",size:"cover"}),this.graphConfig.pageSize=o,this.graphConfig.contentAdaptation=s;let i=this.graph.getCells();i.forEach((e=>{e.removeTools(["top-add-button","right-add-button","left-add-button","bottom-add-button"])}))}if(e.points){let t=e.points;t?.length&&se.A.setPoints(t)}},intervalFun(){this.saveInterval=setInterval((()=>{let e=this.graph.toJSON();if(e.cells.length){let t=se.A.points;localStorage.setItem(`${F.Q6}_${this.saveForm.id}`,JSON.stringify({graph:this.graphConfig,points:t,cells:e}))}}),1e4)},getNodeEventHook(){return Zs},recover(){this.$refs.rightPaneRef.changePageSize()},zoomIn(){this.graph.zoom(.1)},zoomOut(){this.graph.zoom(-.1)},confirmExit(e){e.returnValue="检测到未保存的内容，是否在离开页面前保存修改？"},dragoverFun(e){e.preventDefault()},dropFun(e){e.preventDefault();const t=e.dataTransfer.files;this.handleFileUpload(t,e)},palpitateFun(){this.palpitate=setInterval((()=>{this.webtopoAPI.palpitate().catch((e=>{}))}),6e4)},handleMenuClick(e){e.index!==ei?(this.leftFold=!1,ei=e.index):this.leftFold=!this.leftFold}},beforeDestroy(){this.palpitate&&clearInterval(this.palpitate),window.removeEventListener("beforeunload",this.confirmExit),this.$refs["graph-container"].removeEventListener("dragover",this.dragoverFun),this.$refs["graph-container"].removeEventListener("drop",this.dropFun),this.graph&&this.graph.dispose(),this.saveInterval&&clearInterval(this.saveInterval),Js.clear(),Xs&&Xs.disconnect(),Zs.clear(),he.stopListening(),q.clear(),se.A.clear()}},ai=ti,oi=(0,_.A)(ai,M,T,!1,null,"d14610ba",null),si=oi.exports,ii=function(){var e=this,t=e._self._c;return t("div",{staticClass:"big-a-webtopo"},[t("preview-comm",{ref:"previewCommRef",attrs:{svgId:e.svgId,webtopoAPI:e.webtopoAPI,isConnect:e.isConnect,isPreview:e.isPreview},on:{register:t=>e.$emit("register",t)}})],1)},ri=[];K();const li=new Ze;li.init(j.ke);const ni=new Qe;ni.init(j.ke);var Vi={name:"Preview",components:{PreviewComm:ns},props:{svgId:{type:String,default:""},isConnect:{type:Boolean,default:!1},webtopoAPI:{default:()=>({getCaptcha:()=>{},getPoints:()=>{},getAttrs:()=>{},saveOrUpdate:()=>{},getJSONById:()=>{},getImages:()=>{},uploadFile:()=>{},palpitate:()=>{},listNotPage:()=>{},getMpAndMstypeNames:()=>{},setData:()=>{}})},isPreview:{type:Boolean,default:!1}},provide(){return{webtopoAPI:this.webtopoAPI}},created(){se.A.setMpAndMstypeNamesAPI(this.webtopoAPI.getMpAndMstypeNames)},methods:{getPointList(){return this.$refs.previewCommRef.getPointList()},changeData(e){this.$refs.previewCommRef.changeData(e)}}},ci=Vi,ui=(0,_.A)(ci,ii,ri,!1,null,null,null),pi=ui.exports,di=function(){var e=this,t=e._self._c;return t("div")},hi=[];function gi(e){return Array.from(document.querySelectorAll(`.${e}`))}const mi=3,fi=-8,bi="left",vi="right",Ai="contextmenu-submenu";var yi={name:"vue-contextMenu-2",mounted(){const e=i["default"].component(Ai);this.mainMenuInstance=new e,this.mainMenuInstance.items=this.items,this.mainMenuInstance.commonClass={menu:this.$style.menu,menuItem:this.$style.menu_item,clickableMenuItem:this.$style.menu_item__clickable,unClickableMenuItem:this.$style.menu_item__unClickable},this.mainMenuInstance.position={x:this.position.x,y:this.position.y,width:0,height:0},this.mainMenuInstance.style.minWidth=this.style.minWidth,this.mainMenuInstance.style.zIndex=this.style.zIndex,this.mainMenuInstance.customClass=this.customClass,this.mainMenuInstance.$mount(),document.body.appendChild(this.mainMenuInstance.$el),this.addListener()},data:()=>({items:[],position:{x:0,y:0},style:{zIndex:2,minWidth:150},mainMenuInstance:null,customClass:null,mouseListening:!1}),methods:{mousewheelListener(){this.close()},mouseDownListener(e){let t=e.target;const a=gi(this.$style.menu);while(!a.find((e=>e===t))&&t.parentElement)t=t.parentElement;a.find((e=>e===t))||this.close()},mouseClickListener(e){let t=e.target;const a=gi(this.$style.menu),o=gi(this.$style.menu_item);while(!a.find((e=>e===t))&&!o.find((e=>e===t))&&t.parentElement)t=t.parentElement;if(o.find((e=>e===t))){const a=gi(this.$style.menu_item__unClickable);if(0!==e.button||a.find((e=>e===t)))return;this.close()}else a.find((e=>e===t))||this.close()},addListener(){this.mouseListening||(document.addEventListener("click",this.mouseClickListener),document.addEventListener("mousedown",this.mouseDownListener),document.addEventListener("mousewheel",this.mousewheelListener),this.mouseListening=!0)},removeListener(){this.mouseListening&&(document.removeEventListener("click",this.mouseClickListener),document.removeEventListener("mousedown",this.mouseDownListener),document.removeEventListener("mousewheel",this.mousewheelListener),this.mouseListening=!1)},close(){this.removeListener(),this.mainMenuInstance&&(this.mainMenuInstance.close(),this.mainMenuInstance=null),this.$destroy(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},wi=yi,_i={menu:"Contextmenu_menu_wBlqp",menu_item:"Contextmenu_menu_item_YcEwH",menu_item__clickable:"Contextmenu_menu_item__clickable_XqgL5",menu_item__unClickable:"Contextmenu_menu_item__unClickable__etZB"};function Ni(e){this["$style"]=_i.locals||_i}var xi=(0,_.A)(wi,di,hi,!1,Ni,null,null),Mi=xi.exports,Ti=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"contextmenu-submenu-fade"}},[e.visible?t("div",{ref:"menu",class:["menu",e.customClass,e.commonClass.menu],style:{left:e.style.left+"px",top:e.style.top+"px",minWidth:e.style.minWidth+"px",zIndex:e.style.zIndex},on:{contextmenu:function(e){e.preventDefault()}}},[t("div",{staticClass:"menu_body"},e._l(e.itemsShow,(function(a,o){return t("div",{key:a.label,staticClass:"menu_item",class:[e.commonClass.menuItem,a.disabled||a.children?e.commonClass.unClickableMenuItem:e.commonClass.clickableMenuItem,a.children&&e.activeSubmenu.index===o?"menu_item_expand":null,a.divided?"menu_item__divided":null,a.disabled?"menu_item__disabled":"menu_item__available"],on:{click:function(t){!a.disabled&&!a.children&&e.itemClick(a)},mouseenter:function(t){!a.disabled&&e.enterItem(t,a,o)}}},[e.hasIcon?t("div",{staticClass:"menu_item_icon"},[a.icon?t("i",{class:a.icon}):e._e()]):e._e(),t("span",{staticClass:"menu_item_label"},[e._v(e._s(a.label))]),t("div",{staticClass:"menu_item_expand_icon"},[e._v(e._s(a.children?"▶":""))])])})),0)]):e._e()])},ki=[],Di={name:Ai,mounted(){const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,a=this.$refs.menu,o=a.offsetWidth,s=33*this.itemsShow.length+16;(this.openTrend===bi?this.leftOpen:this.rightOpen)(e,t,o),this.style.top=this.position.y,this.position.y+s>t&&(0===this.position.height?this.style.top=this.position.y-s:this.style.top=t-s,this.style.top<0&&(this.style.top=0))},data:()=>({commonClass:{menu:null,menuItem:null,clickableMenuItem:null,unClickableMenuItem:null},activeSubmenu:{index:null,instance:null},items:[],position:{x:0,y:0,width:0,height:0},style:{left:0,top:0,zIndex:2,minWidth:150},customClass:null,visible:!0,openTrend:vi}),computed:{hasIcon(){return this.itemsShow.some((e=>e.icon))},itemsShow(){return this.items.filter((e=>!e.hidden))}},methods:{leftOpen(e,t,a){this.style.left=this.position.x-a,this.openTrend=bi,this.style.left<0&&(this.openTrend=vi,0===this.position.width?this.style.left=0:this.style.left=this.position.x+this.position.width)},rightOpen(e,t,a){this.style.left=this.position.x+this.position.width,this.openTrend=vi,this.style.left+a>e&&(this.openTrend=bi,0===this.position.width?this.style.left=e-a:this.style.left=this.position.x-a)},enterItem(e,t,a){if(!this.visible)return;if(this.activeSubmenu.instance){if(this.activeSubmenu.index===a)return;this.activeSubmenu.instance.close(),this.activeSubmenu.instance=null,this.activeSubmenu.index=null}if(!t.children)return;const o=e.target.getBoundingClientRect(),s=i["default"].component(Ai);this.activeSubmenu.index=a,this.activeSubmenu.instance=new s,this.activeSubmenu.instance.items=t.children,this.activeSubmenu.instance.openTrend=this.openTrend,this.activeSubmenu.instance.commonClass=this.commonClass,this.activeSubmenu.instance.position={x:o.x+mi,y:o.y+fi,width:o.width-2*mi,height:o.width},this.activeSubmenu.instance.style.minWidth="number"===typeof t.minWidth?t.minWidth:this.style.minWidth,this.activeSubmenu.instance.style.zIndex=this.style.zIndex,this.activeSubmenu.instance.customClass="string"===typeof t.customClass?t.customClass:this.customClass,this.activeSubmenu.instance.$mount(),document.body.appendChild(this.activeSubmenu.instance.$el)},itemClick(e){this.visible&&(!e||e.disabled||e.hidden||"function"!==typeof e.onClick||e.onClick())},close(){this.activeSubmenu.instance&&(this.activeSubmenu.instance.close(),this.activeSubmenu.instance=null,this.activeSubmenu.index=null),this.visible=!1,this.$destroy(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},Ci=Di,Ei=(0,_.A)(Ci,Ti,ki,!1,null,"19a59197",null),Oi=Ei.exports;const Ii=[si,pi],Si=function(e){Ii.forEach((t=>{e.component(t.name,t)}));const t=e.extend(Mi);e.component(Ai,Oi),console.log(e.component(Ai));let a=null;const o=function(e){let s=new t;s.items=e.items,s.position.x=e.x||0,s.position.y=e.y||0,e.event&&(s.position.x=e.event.clientX,s.position.y=e.event.clientY),s.customClass=e.customClass,e.minWidth&&(s.style.minWidth=e.minWidth),e.zIndex&&(s.style.zIndex=e.zIndex),o.destroy(),a=s,s.$mount()};o.destroy=function(){a&&(a.close(),a=null)},e.prototype.$contextmenu=o};var Pi=Si;i["default"].use(l(),{size:"small",zIndex:3e3}),i["default"].config.productionTip=!1,i["default"].use(Pi),new i["default"]({render:e=>e(x)}).$mount("#app")},73178:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var echarts_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25600),echarts_renderers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(50771),echarts_charts__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(71425),echarts_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(63793),echarts_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74468),echarts_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(50124),echarts_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(72867),vue_echarts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85047),echarts_liquidfill__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(95030),_constants_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94380),echarts__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24156);(0,echarts_core__WEBPACK_IMPORTED_MODULE_3__.Y)([echarts_renderers__WEBPACK_IMPORTED_MODULE_4__.a,echarts_charts__WEBPACK_IMPORTED_MODULE_5__.a,echarts_components__WEBPACK_IMPORTED_MODULE_6__.a,echarts_components__WEBPACK_IMPORTED_MODULE_7__.a,echarts_components__WEBPACK_IMPORTED_MODULE_8__.a,echarts_components__WEBPACK_IMPORTED_MODULE_9__.a]);let sumNum=100,successNum=875;__webpack_exports__.A={name:"CommChart",inject:["getNode"],components:{VChart:vue_echarts__WEBPACK_IMPORTED_MODULE_0__.Ay},data(){return{[_constants_Constants__WEBPACK_IMPORTED_MODULE_2__.qX]:null,chartDataOption:{tooltip:{show:!1},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,height:200},xAxis:{max:sumNum,type:"value",boundaryGap:[0,.01],minorTick:{show:!0,length:10,lineStyle:{width:3,color:"#fff"},splitNumber:10},axisLabel:{show:!0,inside:!1,margin:27,color:"#fff",rotate:0},axisTick:{show:!0,length:20,inside:!1,lineStyle:{width:3,color:"#fff"}},splitLine:{show:!1},axisLine:{show:!1},position:"top",offset:-67},yAxis:{type:"category",data:["数量"],show:!1},series:[{name:"数量",type:"bar",itemStyle:{barBorderRadius:[15,15,15,15],color:new echarts__WEBPACK_IMPORTED_MODULE_10__.fA.LinearGradient(0,0,1,0,[{offset:0,color:"#6faaed"},{offset:1,color:"#1edaf6"}])},showBackground:!0,backgroundStyle:{color:"rgba(4, 38, 64, 0.8)",barBorderRadius:[15,15,15,15]},barWidth:16,data:[successNum]}]},intervals:[],timeouts:[]}},computed:{},methods:{},mounted(){const node=this.getNode();let chartsOption=node.prop("charts");if(chartsOption){let option={};eval(chartsOption),this[_constants_Constants__WEBPACK_IMPORTED_MODULE_2__.qX]=option,this.chartDataOption=option}node.on("change:charts",(({current:current,options:options})=>{if(options.customOption){let option={};eval(current),this[_constants_Constants__WEBPACK_IMPORTED_MODULE_2__.qX]=option,this.chartDataOption=option}this.$nextTick((()=>{this.$refs.dataChart?.resize()}))})),node.on("change:angle",(({current:e,options:t})=>{this.chartDataOption.xAxis.axisLabel.rotate=360-e,console.log("执行了",e,t)}))},destroyed(){this.intervals.forEach((e=>{clearInterval(e)})),this.timeouts.forEach((e=>{clearTimeout(e)}))}}},59808:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15724),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31764),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),_textbus_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72685),_textbus_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46864),_SelectPoint_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52547),_store_CellPointController__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(38083),_constants_Constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94380);const myComponent=(0,_textbus_core__WEBPACK_IMPORTED_MODULE_3__.defineComponent)({type:_textbus_core__WEBPACK_IMPORTED_MODULE_3__.ContentType.InlineComponent,name:"MyComponent",transform:function(e,t){return t},setup:function(e){let t=e?.state||{mpKey:"",attrKey:"",mpId:"",attrId:""};const a=(0,_textbus_core__WEBPACK_IMPORTED_MODULE_3__.useState)(t);return a.onChange.subscribe((function(e){t=e})),{render:function(){return _textbus_core__WEBPACK_IMPORTED_MODULE_3__.VElement.createElement("span",{cname:"MyComponent",mpKey:t.mpKey,attrKey:t.attrKey,mpId:t.mpId,attrId:t.attrId,style:"color: #FFF;border-radius: 5px;margin: 0 2px;padding: 0px 4px;background-color: cornflowerblue;"},[`${_store_CellPointController__WEBPACK_IMPORTED_MODULE_5__.A.getPAName(t.mpKey,t.attrKey)}`])},toJSON:function(){return t}}}}),myComponentLoader={match:function(e){return"MyComponent"===e.getAttribute("cname")},read:function(e,t){const a=myComponent.createInstance(t);return a.updateState((function(t){t.mpKey=e.attributes.mpKey.value,t.attrKey=e.attributes.attrKey.value,t.mpId=e.attributes.mpId.value,t.attrId=e.attributes.attrId.value})),a},component:myComponent};__webpack_exports__.A={name:"ComplexEditor",components:{SelectPoint:_SelectPoint_vue__WEBPACK_IMPORTED_MODULE_4__.A},props:["points","ifstr"],data(){return{VARIABLES:_constants_Constants__WEBPACK_IMPORTED_MODULE_6__.ut,editor:null,localPoints:(0,lodash__WEBPACK_IMPORTED_MODULE_1__.cloneDeep)(this.points),localIfstr:(0,lodash__WEBPACK_IMPORTED_MODULE_1__.cloneDeep)(this.ifstr)}},mounted(){this.initEditor()},methods:{savePoint(e){this.addFormulaItem(e),this.$refs.selectPoint.close()},getFormula(){let e=this.getEditContent();if(""===e.formula.trim())return void this.$message.error("公式不可为空");let t=this.isSafeUserCode(e.formula);if(!t)return void this.$message.error("公式不合法");let a=this.formulaIsSuccess(e);if(a)return e;this.$message.error("公式计算不正确")},getEditContent(){let e,t="",a=this.editor.get(_textbus_core__WEBPACK_IMPORTED_MODULE_3__.RootComponentRef),o=a.component.slots.toArray(),s=o[0].getContentAtIndex(0).slots;if(s){e=[];let a=s.slots[0].content.data;a.forEach((function(a){a instanceof Object?(t+=`{${a.state.mpKey}.${a.state.attrKey}}`,e.push({...a.state})):"\n"!==a&&(t+=a)}))}return{formula:t,points:e}},isSafeUserCode(e){var t=/eval|alert|document\.write|<script|<\/script|onload|onclick|onerror/i;return!t.test(e)},formulaIsSuccess({formula:formula,points:points}){let ifstr=formula,x=1;points.forEach((e=>{ifstr=ifstr.replaceAll(`{${e.mpKey}.${e.attrKey}}`,`(${x})`)}));try{eval(ifstr)}catch(error){return!1}return!0},addFormulaItem(e){this.editor.focus();const t=this.editor.get(_textbus_core__WEBPACK_IMPORTED_MODULE_3__.Commander),a=myComponent.createInstance(this.editor);a.updateState((function(t){t.mpKey=e.mpKey,t.attrKey=e.attrKey,t.mpId=e.mpId,t.attrId=e.attrId})),t.insert(a)},initEditor(){let e,t=this.ifstr,a="color: #FFF;border-radius: 5px;margin: 0 2px;padding: 0px 4px;background-color: cornflowerblue";t&&(this.points&&this.points.forEach((function(e){let o=`{${e.mpKey}.${e.attrKey}}`;if(-1!=t.indexOf(o)){let s=`<span cname="MyComponent" mpKey="${e.mpKey}" attrKey="${e.attrKey}"\n                mpId="${e.mpId}" attrId="${e.attrId}" \n                  style="${a}">${_store_CellPointController__WEBPACK_IMPORTED_MODULE_5__.A.getPAName(e.mpKey,e.attrKey)}</span>`;t=t.replace(new RegExp(o,"g"),s)}})),t="<p>"+t+"</p>",e=t),this.editor=(0,_textbus_editor__WEBPACK_IMPORTED_MODULE_2__.ieJ)({content:e,placeholder:"请输入公式...",componentLoaders:[_textbus_editor__WEBPACK_IMPORTED_MODULE_2__.F1z,myComponentLoader],components:[_textbus_editor__WEBPACK_IMPORTED_MODULE_2__.kt2,myComponent],autoHeight:!0,plugins:[new _textbus_editor__WEBPACK_IMPORTED_MODULE_2__.M7E([[_textbus_editor__WEBPACK_IMPORTED_MODULE_2__.Qct,_textbus_editor__WEBPACK_IMPORTED_MODULE_2__.YG1]])]}),this.editor.mount(this.$refs.editorContainer),this.editor.onReady.subscribe((()=>{this.editor.focus()}))}},destroyed(){this.editor.destroy()}}},34241:function(e,t,a){"use strict";a.d(t,{S:function(){return o}});class o{constructor(){return o.instance||(this.chartThemes={},this.themeSelect={},this.initThemes(),o.instance=this),o.instance}initThemes(){let e=a(3680);e.keys().forEach((t=>{let a=e(t).default,o=t.replaceAll("./","");this.chartThemes[o]=a,this.themeSelect[o]=a.name}))}getTheme(e){return e?this.chartThemes[e]:{}}getThemeSelect(){return this.themeSelect}}},90051:function(e,t,a){"use strict";a.r(t);const o={name:"暗黑",backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#f2f2f2"}},legend:{inactiveColor:"#595959",inactiveBorderColor:"#000",textStyle:{color:"#bfbfbf",lineHeight:14}},tooltip:{axisPointer:{lineStyle:{color:"#434343",width:"1"},crossStyle:{color:"#434343",width:"1"}},backgroundColor:"rgba(48,48,48,0.95)",borderWidth:0,textStyle:{color:"#ffffff"}},xAxis:{axisLabel:{color:"#bfbfbf"}},yAxis:{axisLabel:{color:"#bfbfbf"}}};t["default"]=o},80542:function(e,t,a){"use strict";a.r(t);const o={name:"默认",backgroundColor:"#fff",textStyle:{},title:{textStyle:{color:"#000"}},legend:{inactiveColor:"#595959",inactiveBorderColor:"#000",textStyle:{color:"#000"}},tooltip:{axisPointer:{lineStyle:{color:"#434343",width:"1"},crossStyle:{color:"#434343",width:"1"}},backgroundColor:"rgba(48,48,48,0.95)",borderWidth:0,textStyle:{color:"#000"}},xAxis:{axisLabel:{color:"#000"}},yAxis:{axisLabel:{color:"#000"}}};t["default"]=o},40441:function(e,t,a){"use strict";a.d(t,{l:function(){return o}});const o=[{name:"默认",value:"default",colors:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"]},{name:"复古",value:"复古",colors:["#0780cf","#765005","#fa6d1d","#0e2c82","#b6b51f","#da1f18","#701866","#f47a75","#009db2"]},{name:"新特性",value:"新特性",colors:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86"]},{name:"渐变",value:"渐变",colors:["#71ae46","#96b744","#c4cc38","#ebe12a","#eab026","#e3852b","#d85d2a","#ce2626","#ac2026"]},{name:"清新",value:"清新",colors:["#00a8e1","#99cc00","#e30039","#fcd300","#800080","#00994e","#ff6600","#808000","#db00c2"]},{name:"怀旧",value:"怀旧",colors:["#3b6291","#943c39","#779043","#624c7c","#388498","#bf7334","#3f6899","#9c403d","#7d9847"]},{name:"商务",value:"商务",colors:["#194f97","#555555","#bd6b08","#00686b","#c82d31","#625ba1","#898989","#9c9800","#007f54"]},{name:"明亮",value:"明亮",colors:["#0e72cc","#6ca30f","#f59311","#fa4343","#16afcc","#85c021","#d12a6a","#0e72cc","#6ca30f"]},{name:"雅致",value:"雅致",colors:["#3682be","#45a776","#f05326","#eed777","#334f65","#b3974e","#38cb7d","#ddae33","#844bb3"]},{name:"柔和",value:"柔和",colors:["#5b9bd5","#ed7d31","#70ad47","#ffc000","#4472c4","#91d024","#b235e6","#02ae75","#8085e9"]},{name:"淡雅",value:"淡雅",colors:["#95a2ff","#fa8080","#ffc076","#fae768","#87e885","#3cb9fc","#73abf5","#cb9bff","#434348"]},{name:"经典",value:"经典",colors:["#007bbb","#ffdb4f","#dd4b4b","#2ca9e1","#ef8b07","#4a488e","#82ae46","#dd4b4b","#bb9581"]},{name:"艳丽",value:"艳丽",colors:["#fa2c7b","#ff38e0","#ffa235","#04c5f3","#0066fe","#8932a5","#c90444","#cb9bff","#434348"]},{name:"科技",value:"科技",colors:["#0082fc","#fdd845","#22ed7c","#09b0d3","#1d27c9","#f9e264","#f47a75","#009db2","#05f8d6"]},{name:"炫彩1",value:"炫彩1",colors:["#e75840","#a565ef","#628cee","#eb9358","#d05c7c","#bb60b2","#433e7c","#f47a75","#009db2"]},{name:"炫彩2",value:"炫彩2",colors:["#ef4464","#fad259","#d22e8d","#03dee0","#d05c7c","#bb60b2","#433e7c","#f47a75","#009db2"]},{name:"简洁1",value:"简洁1",colors:["#929fff","#9de0ff","#ffa897","#af87fe","#7dc3fe","#bb60b2","#433e7c","#f47a75","#009db2"]},{name:"简洁2",value:"简洁2",colors:["#50c48f","#26ccd8","#3685fe","#9977ef","#f5616f","#f7b13f","#f9e264","#f47a75","#009db2"]},{name:"冷色1",value:"冷色1",colors:["#bf19ff","#02cdff","#0090ff","#314976","#854cff","#f9e264","#5f45ff","#f47a75","#009db2"]},{name:"冷色2",value:"冷色2",colors:["#45c8dc","#854cff","#5f45ff","#47aee3","#d5d6d8","#96d7f9","#f9e264","#f47a75","#009db2"]},{name:"暖色",value:"暖色",colors:["#9489fa","#f06464","#f7af59","#f0da49","#71c16f","#2aaaef","#5690dd","#bd88f5","#009db2"]}]},94380:function(e,t,a){"use strict";a.d(t,{Ad:function(){return x},HE:function(){return _},Mr:function(){return s},Q6:function(){return o},Rs:function(){return c},Ue:function(){return y},VY:function(){return n},ZT:function(){return m},_k:function(){return l},cP:function(){return v},eo:function(){return r},f1:function(){return p},fF:function(){return f},g7:function(){return A},g8:function(){return g},iq:function(){return h},jM:function(){return u},lk:function(){return w},qX:function(){return d},qc:function(){return i},sD:function(){return V},ut:function(){return N},x9:function(){return b}});const o="save-svg",s="save-svg-points",i="super-group-node",r="d3-group-node",l="selectorRect",n="default-label-selector",V="nodeType",c="alarm_node_id",u={echarts:"echarts"},p="nodeName",d="echartsDefaultConfigKey",h="echartsConfigKey",g={data:{name:"数据",value:"data"},complex:{name:"公式",value:"complex"},time:{name:"日期",value:"time"}},m={style:{name:"样式改变",value:"style"},status:{name:"状态切换",value:"status"},animation:{name:"动画效果",value:"animation"},progress:{name:"进度效果",value:"progress"},text:{name:"文本内容",value:"text"},transition:{name:"位移",value:"transition"}},f={tooltip:{name:"悬浮框",value:"tooltip"},dialog:{name:"弹框",value:"dialog"},present:{name:"当前页",value:"present"},newtab:{name:"新开标签",value:"newtab"}},b={intranet:{name:"内链",value:"intranet",form:[f.present.value,f.newtab.value,f.dialog.value]},internet:{name:"外链",value:"internet",form:[f.present.value,f.newtab.value,f.dialog.value]},data:{name:"显示/设置数据",value:"data",form:[f.tooltip.value,f.dialog.value]}},v={click:{name:"点击",value:"click",tool:"event-left-btn",icon:"svg-edit-mouseL",actionType:[b.data.value,b.intranet.value,b.internet.value]},rightClick:{name:"右击",value:"rightClick",tool:"event-right-btn",icon:"svg-edit-shubiao-zuojian",actionType:[b.data.value,b.intranet.value,b.internet.value]},mouseenter:{name:"鼠标悬停",value:"mouseenter",tool:"event-mouseenter-btn",icon:"svg-edit-xuanfuanniu",actionType:[b.data.value]}},A={setdata:{name:"设置数据",value:"setdata"},showdata:{name:"显示数据",value:"showdata",form:[f.tooltip,f.dialog]}},y={text:{name:"文本",value:"text"},variable:{name:"变量",value:"variable"},state:{name:"状态",value:"state"}},w={button:{name:"按钮",value:"button"},integer:{name:"整数",value:"integer"},decimal:{name:"小数",value:"decimal"},input:{name:"文本",value:"input"}},_={fullAll:{name:"自适应缩放",value:"fullAll"},noZoom:{name:"不缩放",value:"noZoom"}},N={readble:{code:"0",name:"可读"},writeable:{code:"1",name:"可写"},readbleAndWriteable:{code:"2",name:"读写"}},x=[{name:"严重",value:"criticalAlert",color:"#F00"},{name:"主要",value:"majorAlert",color:"#FFA500"},{name:"次要",value:"minorAlert",color:"#FF0"},{name:"提示",value:"informationalAlert",color:"#00F"}]},70595:function(e,t,a){"use strict";a.d(t,{b:function(){return p}});a(15724);var o=a(94380),s=a(38083),i=a(40441),r=a(85047),l=a(31764),n=a(34241),V=a(54461);let c=new n.S;function u({color:e="#000",opacity:t=.5}){if(t=Math.max(t,0),t=Math.min(t,1),e=e.replace("#","").toUpperCase(),3===e.length){let t=e.split("");e="";for(let a=0;a<t.length;a++)e+=t[a]+t[a]}let a=Math.round(255*t),o="",s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];while(a>0){let e=a%16;a=(a-e)/16,o=s[e]+o}return 1==o.length&&(o="0"+o),0==o.length&&(o="00"),`#${e+o}`}function p({type:e="line",dataDealWith:t,options:a={}}){return{inject:["getNode"],provide(){return{[r.k4]:"dark"}},data(){return{bgColor:"#000",[o.qX]:{theme:"chart-theme-dark.js",color:{colorOpacity:100,colorObj:i.l[0]},title:{show:!0,text:"新建图表",x:"left",y:"top",padding:20,textStyle:{fontStyle:"normal",fontWeight:"bolder",fontSize:18}},legend:{show:!0,type:"scroll",orient:"horizontal",x:"right",y:"top",icon:"",padding:30,itemStyle:{borderType:"inherit",borderCap:"butt"},textStyle:{fontSize:"12",fontStyle:"normal",fontWeight:"bolder"}},tooltip:{show:!0,appendToBody:!0,trigger:"axis",textStyle:{fontSize:"12",fontStyle:"normal",fontWeight:"bolder"}},grid:{top:{value:20,unit:"%"},left:{value:5,unit:"%"},right:{value:5,unit:"%"},bottom:{value:5,unit:"%"},containLabel:!0},xAxis:{show:!0,position:"bottom",type:"category",boundaryGap:!1,axisTick:{show:!0},splitLine:{show:!1,lineStyle:{color:"#E6E6E6",width:1,type:"solid"}},axisLabel:{show:!0,rotate:0,fontSize:12}},yAxis:{type:"value",position:"left",axisTick:{show:!0},splitLine:{show:!0,lineStyle:{color:"#E6E6E6",width:1,type:"dashed"}},axisLabel:{show:!0,rotate:0,fontSize:12}},series:{type:e,radius:{inner:{value:0,unit:"%"},outside:{value:70,unit:"%"}},symbol:"star",symbolSize:1,itemStyle:{normal:{lineStyle:{width:1}}},smooth:!1}},chartDataOption:{},dataList:[]}},computed:{chartsConfig(){return this[o.iq]},colors(){let e=this[o.qX];return e?.color?.colorObj?.colors?.map((t=>u({color:t,opacity:e.color.colorOpacity/100})))},defaultOption(){let e=(0,l.cloneDeep)(this[o.qX]);e.color=this.colors;let t=e.series?.radius;return t?.inner&&t?.outside&&(e.series.radius=[`${t.inner.value}${t.inner.unit}`,`${t.outside.value}${t.outside.unit}`]),e.grid&&(e.grid.top&&(e.grid.top=`${e.grid.top.value}${e.grid.top.unit}`),e.grid.left&&(e.grid.left=`${e.grid.left.value}${e.grid.left.unit}`),e.grid.right&&(e.grid.right=`${e.grid.right.value}${e.grid.right.unit}`),e.grid.bottom&&(e.grid.bottom=`${e.grid.bottom.value}${e.grid.bottom.unit}`)),e}},created(){const e=this.getNode();let t=e.prop("charts");t&&(this[o.qX]=t)},mounted(){const e=this.getNode();s.A.isTest&&this.initData(),this.packageData(),e.on("change:data",(({current:e})=>{let t;this.dataList.length&&(t=this.dataList[this.dataList.length-1]);for(let[a,{value:o,dataTime:i}]of Object.entries(e)){t&&this.isCrossingDay(t.dataTime,i)&&(this.dataList=[]);let e=a.split("."),r=s.A.getPointById(e?.[0],e?.[1]);this.dataList.push({realData:o,dataTime:i,...r})}this.packageData(),this.$nextTick((()=>{this.$refs.dataChart?.resize()}))})),e.on("change:charts",(({current:e,options:t})=>{t.customOption?(this[o.qX]=e,this.chartDataOption=e):("charts/theme"===t.propertyPath?this[o.qX]=this.getTheme(e):this[o.qX]=e,this.packageData(t)),this.$nextTick((()=>{this.$refs.dataChart?.resize()}))}))},methods:{initData(){this.dataList.push({mpId:1,mpName:"表计1",attrId:1,attrName:"电压",realData:38.17,dataTime:1691856e3,unit:"V"},{mpId:2,mpName:"表计2",attrId:2,attrName:"电压",realData:91.1,dataTime:1691856e3,unit:"V"},{mpId:1,mpName:"表计1",attrId:1,attrName:"电压",realData:158.13,dataTime:1691856300,unit:"V"},{mpId:2,mpName:"表计2",attrId:2,attrName:"电压",realData:2.86,dataTime:1691856300,unit:"V"},{mpId:1,mpName:"表计1",attrId:1,attrName:"电压",realData:158.6,dataTime:1691856600,unit:"V"})},getTheme(e){try{let t=c.getTheme(e.theme);t?(0,l.merge)(e,t):console.warn(`未找到${e.theme}皮肤`)}catch(t){console.warn(`未找到${e.theme}皮肤`,t)}return e},packageData(){let e=this.defaultOption;if(t){let a=t(this.dataList,this);if(a.legend?.config?.data?e.legend.data=a.legend.config.data:!1===a.legend&&delete e.legend,a.xAxis?.config?.data?e.xAxis.data=a.xAxis.config.data:!1===a.xAxis&&delete e.xAxis,!1===a.yAxis&&delete e.yAxis,a?.series?.config){let t=[];a.series.config.forEach((a=>{t.push({...e.series,...a})})),e.series=t}this.chartDataOption=e}else{let t={},s={};this.dataList.forEach((e=>{let a=(0,V.HN)(e.dataTime,"yyyy-MM-dd HH:mm"),o=t[a];o||(t[a]=o={});let i=`${e.mpId}.${e.attrId}`;o[i]=e.realData;let r=s[i];r||(s[i]=r=`${e.mpName}.${e.attrName}`)}));let i=[],r=(0,l.cloneDeep)(this[o.qX].series);for(let[e,a]of Object.entries(s))i.push({...r,name:a,data:Object.values(t).map((t=>void 0===t[e]?0:t[e]))});e.legend&&(e.legend.data=Object.values(s)),e.xAxis&&(e.xAxis.data=Object.keys(t)),e.series=i,(0,l.merge)(e,a),this.chartDataOption=e}},isCrossingDay(e,t){const a=new Date(1e3*e),o=new Date(1e3*t),s=a.getFullYear(),i=a.getMonth(),r=a.getDate(),l=o.getFullYear(),n=o.getMonth(),V=o.getDate();return s!==l||i!==n||r!==V}}}}},31512:function(e,t,a){"use strict";a.d(t,{c:function(){return o}});const o={inject:["getNodeEventHook","webtopoAPI"],computed:{nodeEventHook(){return this.getNodeEventHook?.()},graph(){return this.getNodeEventHook?.()?.getGraph()}},methods:{selectNode(){return this.getNodeEventHook?.()?.getSelect()}}}},18924:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{s:function(){return Offect}});var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15724),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31764),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),_constants_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94380),_offects_Animation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(90666),_offects_Data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(11282),_offects_Status__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65592),_offects_Style__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(59117),_offects_Text__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(40917),_offects_Original__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(97505),_offects_Progress__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43965),_offects_Transition__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(60977);class Offect{constructor(e,t){this.graph=e,this.cells={},this.data=new _offects_Data__WEBPACK_IMPORTED_MODULE_6__.A,this.animation=new _offects_Animation__WEBPACK_IMPORTED_MODULE_3__.A,this.status=new _offects_Status__WEBPACK_IMPORTED_MODULE_4__.A,this.style=new _offects_Style__WEBPACK_IMPORTED_MODULE_7__.A,this.text=new _offects_Text__WEBPACK_IMPORTED_MODULE_8__.A,this.progress=new _offects_Progress__WEBPACK_IMPORTED_MODULE_9__.A,this.original=new _offects_Original__WEBPACK_IMPORTED_MODULE_10__.A,this.transition=new _offects_Transition__WEBPACK_IMPORTED_MODULE_5__.A,this.audio=t}clear(){this.cells={}}editViewChangeData(e,t,a){let o;if(a){o=this.packageCellConfig(a,e);let t=this.cells[e.id];t&&(o.orgCell=t.orgCell)}this.changeData(e,{},t,o)}changeData(cell,data,isEditView,cellConfigP){console.log("offect 数据改变");let cellConfig=cellConfigP??this.cells[cell.id];if(!cellConfig){let e=cell.getProp("formulas");cellConfig=this.packageCellConfig(e,cell),this.cells[cell.id]=cellConfig}if(cellConfig&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(cellConfig.data,data),this.data.execute(cellConfig),cellConfig?.ifs?.length)){for(let index=0;index<cellConfig.ifs.length;index++){let value=cellConfig.ifs[index],result=isEditView;if(void 0===isEditView){let ifc=this.calcIf(value,cellConfig.data);if(-1!=ifc.indexOf("{"))result=null;else try{result=eval(ifc)}catch(error){}}value.result=result}cellConfig.ifs.sort(((e,t)=>e.result&&t.result?0:!e.result&&t.result?-1:e.result&&!t.result?1:void 0)),this.graph&&this.graph.startBatch(cellConfig.cell.id),cellConfig.ifs.forEach((e=>{null!=e.result&&this.execute(cellConfig,e,e.result,isEditView)})),this.graph&&this.graph.stopBatch(cellConfig.cell.id)}}execute(e,t,a,o){t.touchOff.type.forEach((s=>{switch(s){case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.style.value:this.style.execute(e,t,a);break;case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.status.value:this.status.execute(e,t,a);break;case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.animation.value:this.animation.execute(e,t,a);break;case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.progress.value:this.progress.execute(e,t,a);break;case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.text.value:void 0===o&&this.text.execute(e,t,a);break;case _constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ZT.transition.value:this.transition.execute(e,t,a,o);break;default:break}}))}packageCellConfig(e,t){if(!e)return;let a,o,s=[];return e.cases&&(a=[],e.cases.forEach((e=>{e?.points?.forEach((t=>{e.ifstr=e.ifstr.replaceAll(`{${t.mpKey}.${t.attrKey}}`,`{${t.mpId}.${t.attrId}}`)})),a.push(e),s.push(...e.points)}))),e?.format?.point&&void 0!==e?.format?.point?.mpId&&""!==e?.format?.point?.mpId&&(o=e.format,s.push(o.point)),{cell:t,type:e.type,points:s,ifs:a,format:o,data:{},orgCell:(0,lodash__WEBPACK_IMPORTED_MODULE_1__.cloneDeep)(t.store.data)}}calcIf(e,t){let a=e.ifstr;for(let[o,s]of Object.entries(t))a=a.replaceAll(`{${o}}`,s.value);return a}}},90666:function(e,t,a){"use strict";a.d(t,{A:function(){return s}});a(15724);var o=a(94380);class s{execute(e,t,a){!0===a?this.start(e,t):this.stop(e,t)}start(e,t){let a=t.touchOff?.animation,s=a?.selector??[];s.length||s.push(o.qc);const i=t.touchOff?.animation?.effect,r=[],l=[];if(i)for(let o of i)o.class&&r.push(o.class),o.style&&l.push(o);if(r.length&&r.length){let t=r.join(" "),a=e.cell.attr(`${s}/class`);a&&(t+=" "+a),s.forEach((a=>{e.cell.attr(`${a}/class`,t)}))}if(l.length&&l.length){let t="";for(let e of Object.values(l))for(let[a,o]of Object.entries(e.style))t+=`${a}:${o};`;s.forEach((a=>{e.cell.attr(`${a}/style`,""),e.cell.attr(`${a}/style`,t)}))}}stop(e,t){const a=t.touchOff?.animation?.effect,s=[],i=[];if(a)for(let o of a)o.class&&s.push(o.class),o.style&&i.push(o);if(s.length){let a=t.touchOff?.animation,r=a.selector??[];r.length||r.push(o.qc),s.length&&r.forEach((t=>{let a=e.cell.attr(`${t}/class`);a&&(s.forEach((e=>{a=a.replaceAll(e,"")})),e.cell.attr(`${t}/class`,a))})),i.length&&r.forEach((t=>{e.cell.attr(`${t}/style`,"")}))}}}},11282:function(e,t){"use strict";class a{execute(e){let t=e.format;if(!t||!t.selector)return;if(!t)return;let a=e.data,o=`${t.point.mpId}.${t.point.attrId}`;for(let[s,i]of Object.entries(a))if(s===o){let a=i.value;void 0!=t.multiplier&&(a=this.multiplier(t.multiplier,a)),void 0!=t.decimalNum&&(a=this.decimalNum(t.decimalNum,a)),void 0!=t.unit&&""!=t.unit&&(a+=" "+t.unit),e.cell.attr(`${t.selector}/text`,a);break}}multiplier(e,t){return isNaN(t)?t:t*e}decimalNum(e,t){return isNaN(t)?t:t.toFixed(e)}}t.A=a},97505:function(e,t,a){"use strict";a.d(t,{A:function(){return o}});class o{}},43965:function(e,t,a){"use strict";a.d(t,{A:function(){return o}});class o{execute(e,t,a){if(!1===a)return void this.toOrg(e,t);let o=t.touchOff.progress,{top:s,right:i,bottom:r,left:l}=o.config;if(!s&&!i&&!r&&!l)return;let n=100*(1-a)+"%",V=`inset(${s?n:"0%"} ${i?n:"0%"} ${r?n:"0%"} ${l?n:"0%"})`;o.selector.forEach((t=>{e.cell.attr(t+"/clipPath",V)}))}toOrg(e,t){let a=t.touchOff.progress;a?.selector?.length&&a.selector.forEach((t=>{e.cell.attr(t+"/clipPath","unset")}))}}},65592:function(e,t,a){"use strict";a.d(t,{A:function(){return s}});a(15724);var o=a(94380);class s{execute(e,t,a){!0===a?this.toEffect(e,t):this.toOrg(e,t)}toEffect(e,t){if("object"==typeof t.touchOff.status)for(let[,a]of Object.entries(t.touchOff.status))if(a?.statu?.style&&e.cell.attr(a?.statu?.style),a?.statu?.class){let t=a?.statu?.class?.selector,s=a?.statu?.class?.className;t&&""!=t||(t=o.qc);let i=e.cell.attr(`${t}/class`);i&&(s+=" "+i),e.cell.attr(`${t}/class`,s)}}toOrg(e,t){for(let[,a]of Object.entries(t.touchOff.status)){if(a?.statu?.style){let t=a?.statu?.style;this.recursionRemoveAttr([],t,e.cell),e.cell.attr(e.orgCell.attrs)}if(a?.statu?.class){let t=a?.statu?.class?.selector,s=a?.statu?.class?.className;t&&""!=t||(t=o.qc);let i=e.cell.attr(`${t}/class`);void 0!=i&&(i=i.replaceAll(s,""),e.cell.attr(`${t}/class`,i))}}}recursionRemoveAttr(e,t,a){Object.entries(t).forEach((([t,o])=>{e.push(t),"object"!==typeof o?a.attr(e.join("/"),"none",{silent:!0}):this.recursionRemoveAttr(e,o,a)}))}}},59117:function(e,t,a){"use strict";a.d(t,{A:function(){return o}});class o{execute(e,t,a){!0===a?this.toEffect(e,t):this.toOrg(e,t)}toEffect(e,t){t.touchOff.style&&t.touchOff.style.forEach((t=>{"add"==t.type||"change"==t.type?e.cell.attr(t.attrName,t.attrValue):"remove"==t.type&&e.cell.attr(t.attrName,"")}))}toOrg(e,t){t.touchOff.style&&t.touchOff.style.forEach((t=>{"add"==t.type?e.cell.attr(t.attrName,""):"remove"!=t.type&&"change"!=t.type||e.cell.attr(t.attrName,t.orgAttrValue)}))}}},40917:function(e,t,a){"use strict";a.d(t,{A:function(){return o}});class o{execute(e,t,a){let o=t.touchOff.text.selector,s=t.touchOff.text.texts;if(void 0!=o&&""!=o){let t=s?.find((e=>e.value==a));t=t?.text??a,e.cell.attr(`${o}/text`,t)}}}},60977:function(e,t,a){"use strict";a.d(t,{A:function(){return s}});var o=a(70494);class s{execute(e,t,a,o){this.start(e,t,a,o)}start(e,t,a,s){e.cell.stopTransition("position");let{max:i,duration:r,target:l,delay:n,timing:V="quad"}=t.touchOff.transition.move,{x:c,y:u}=e.orgCell.position,{x:p,y:d}=l;void 0!==s&&(a=i);let h=a/i;h=h>1?1:h;let g=(p-c)*h+c,m=(d-u)*h+u;e.cell.transition("position",{x:g,y:m},{delay:n,duration:r,timing:o.Xo.decorators.reverse(o.Xo[V]),finish:()=>{void 0!==s&&e.cell.position(c,u,{deep:!0})}})}}},38083:function(e,t,a){"use strict";a(15724);var o=a(8080),s=a(94380);class i{constructor(){this.points=[],this.pointList=[],this.isTest=!1}setMpAndMstypeNamesAPI(e){this.getMpAndMstypeNames=e}async init(e,t){let a={};e.forEach((e=>{e.getPoints&&e.getPoints().forEach((e=>{a[`${e.mpKey}.${e.attrKey}`]=e}));let t=e.getProp(s.sD);if(s.jM.echarts==t){let t=e.prop("formulas/points");t?.forEach?.((e=>{a[`${e.mpKey}.${e.attrKey}`]=e}))}}));let o=Object.values(a);console.log("执行这里了",o),await this.setPoints(o,t)}getPAName(e,t){if(e&&t){let a=this.getPoint(e,t);return a?(""!==a.mpName&&null!==a.mpName&&void 0!==a.mpName||(a.mpName=null),""!==a.attrName&&null!==a.attrName&&void 0!==a.attrName||(a.attrName=null),`${a.mpName??a.mpId}.${a.attrName??a.attrId}`):(console.log("执行了"),"未找到测量点")}}getPointName(e){if(e){let t=this.points.find((t=>t.mpKey==e));return t?""===t.mpName||null===t.mpName||void 0===t.mpName?t.mpId:t.mpName:(console.log("执行了"),"未找到测量点")}}getPointById(e,t){if(void 0===e||null===e||""===e)return null;if(void 0===t||null===t||""===t)return null;let a=this.points.find((a=>a.mpId==e&&a.attrId==t));return a}getAttrName(e,t){if(e&&t){let a=this.points.find((a=>a.mpKey==e&&a.attrKey==t));return a?""===a.attrName||null===a.attrName||void 0===a.attrName?a.attrId:a.attrName:(console.log("执行了"),"未找到测量点")}}getPoint(e,t){if(e&&t){let a=this.points.find((a=>a.mpKey==e&&a.attrKey==t));return a}}setPoint(e,t){let a=this.points.find((a=>a.mpId==e.mpId&&a.attrId==t.attrId));return a||(a={mpKey:(0,o.Ak)(),attrKey:(0,o.Ak)(),...e,...t},this.points.push(a)),a}async setPoints(e=[],t){if(this.getMpAndMstypeNames){let{data:a}=await this.getMpAndMstypeNames({mpAttrs:JSON.stringify(e)}).catch((e=>{console.log(e)}));a&&0!==a.length||!t?.points||(a=t.points),a.forEach((t=>{let a=e.find((e=>e.mpId==t.mpId&&e.attrId==t.attrId));a&&(a.mpName=t.mpName,a.attrName=t.attrName)}))}this.points=e,this.pointList=e.map((e=>({mpId:e.mpId,attrId:e.attrId})))}clear(){this.points=[],this.pointList=[]}}t.A=new i},54461:function(e,t,a){"use strict";a.d(t,{HN:function(){return n},Ov:function(){return r},_l:function(){return i},f8:function(){return s}});a(15724);var o=a(94380);const s=(e,t)=>{let a=[];return e.forEach((e=>{e.selector!==o.qc&&e.selector!==o.eo&&e.selector!==o._k&&void 0!=e.selector&&void 0!=t[e.selector]&&a.push(e),e.children&&a.push(...s(e.children,t))})),a},i=(e,t,a,s)=>{const i=new Image;i.src=t,i.onload=()=>{let l=i.width,n=i.height,V=n/l;l=300,n=l*V,a-=l/2,s-=n/2;let c=e.createNode({shape:"super-node",x:a,y:s,width:l,height:n,preserveAspectRatio:!0,[o.f1]:"图片_"+e.getCellCount(),markup:[{tagName:"g",selector:o.eo,children:[{tagName:"g",selector:o.qc,children:[{name:"图片",tagName:"image",selector:"body",attrs:{width:l,height:n}}]}]}],attrs:{body:{refWidth:1,refHeight:1,href:t}}});e.addNode(c),r(e,[c])}},r=(e,t)=>{(t.length>1||1===t.length&&!t[0].isEdge())&&(e.cleanSelection(),e.clearTransformWidgets(),1!==t.length||t[0].isEdge()||e.createTransformWidget(t[0]),e.select(t)),1===t.length&&t[0].isEdge()&&t[0].removeTools(["vertices","segments"])};function l(e,t=2){return null==e?"":String(e).length>=t?String(e):(Array(t).join("0")+e).slice(-t)}function n(e,t="yyyy-MM-dd HH:mm:ss"){if(!e)return"";const a=e=>"string"===typeof e?e.includes("T")?e.replace(/\//g,"-"):e.replace(/-/g,"/"):"number"===typeof e&&10===String(e).length?1e3*e:e,o=new Date(a(e)),s=[l(o.getFullYear(),4),l(o.getMonth()+1),l(o.getDate())],i=[l(o.getHours()),l(o.getMinutes()),l(o.getSeconds())];return t.replace(/yyyy/g,s[0]).replace(/MM/g,s[1]).replace(/dd/g,s[2]).replace(/HH/g,i[0]).replace(/mm/g,i[1]).replace(/ss/g,i[2]).replace(/YYYY/g,s[0]).replace(/DD/g,s[2])}},3680:function(e,t,a){var o={"./chart-theme-dark.js":90051,"./chart-theme-default.js":80542};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=3680},51379:function(e,t,a){var o={"./BarChart.vue":86335,"./CommChart.vue":16986,"./LineChart.vue":98976,"./PieChart.vue":78927};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id=51379}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,a,o,s){if(!a){var i=1/0;for(V=0;V<e.length;V++){a=e[V][0],o=e[V][1],s=e[V][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[l])}))?a.splice(l--,1):(r=!1,s<i&&(i=s));if(r){e.splice(V--,1);var n=o();void 0!==n&&(t=n)}}return t}s=s||0;for(var V=e.length;V>0&&e[V-1][2]>s;V--)e[V]=e[V-1];e[V]=[a,o,s]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,i=a[0],r=a[1],l=a[2],n=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)__webpack_require__.o(r,o)&&(__webpack_require__.m[o]=r[o]);if(l)var V=l(__webpack_require__)}for(t&&t(a);n<i.length;n++)s=i[n],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(V)},a=self["webpackChunkwebtopo"]=self["webpackChunkwebtopo"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[504],(function(){return __webpack_require__(23909)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();